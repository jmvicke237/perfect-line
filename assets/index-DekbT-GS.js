(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function i(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(l){if(l.ep)return;l.ep=!0;const c=i(l);fetch(l.href,c)}})();function Yb(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var nd={exports:{}},ll={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ky;function Kb(){if(Ky)return ll;Ky=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(a,l,c){var h=null;if(c!==void 0&&(h=""+c),l.key!==void 0&&(h=""+l.key),"key"in l){c={};for(var m in l)m!=="key"&&(c[m]=l[m])}else c=l;return l=c.ref,{$$typeof:r,type:a,key:h,ref:l!==void 0?l:null,props:c}}return ll.Fragment=t,ll.jsx=i,ll.jsxs=i,ll}var Xy;function Xb(){return Xy||(Xy=1,nd.exports=Kb()),nd.exports}var K=Xb(),id={exports:{}},Vt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $y;function $b(){if($y)return Vt;$y=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),A=Symbol.iterator;function I(x){return x===null||typeof x!="object"?null:(x=A&&x[A]||x["@@iterator"],typeof x=="function"?x:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,F={};function q(x,W,ot){this.props=x,this.context=W,this.refs=F,this.updater=ot||V}q.prototype.isReactComponent={},q.prototype.setState=function(x,W){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,W,"setState")},q.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function et(){}et.prototype=q.prototype;function X(x,W,ot){this.props=x,this.context=W,this.refs=F,this.updater=ot||V}var nt=X.prototype=new et;nt.constructor=X,H(nt,q.prototype),nt.isPureReactComponent=!0;var ft=Array.isArray,lt={H:null,A:null,T:null,S:null},ht=Object.prototype.hasOwnProperty;function O(x,W,ot,st,at,At){return ot=At.ref,{$$typeof:r,type:x,key:W,ref:ot!==void 0?ot:null,props:At}}function w(x,W){return O(x.type,W,void 0,void 0,void 0,x.props)}function S(x){return typeof x=="object"&&x!==null&&x.$$typeof===r}function D(x){var W={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(ot){return W[ot]})}var M=/\/+/g;function N(x,W){return typeof x=="object"&&x!==null&&x.key!=null?D(""+x.key):W.toString(36)}function R(){}function bt(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then(R,R):(x.status="pending",x.then(function(W){x.status==="pending"&&(x.status="fulfilled",x.value=W)},function(W){x.status==="pending"&&(x.status="rejected",x.reason=W)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function It(x,W,ot,st,at){var At=typeof x;(At==="undefined"||At==="boolean")&&(x=null);var _t=!1;if(x===null)_t=!0;else switch(At){case"bigint":case"string":case"number":_t=!0;break;case"object":switch(x.$$typeof){case r:case t:_t=!0;break;case E:return _t=x._init,It(_t(x._payload),W,ot,st,at)}}if(_t)return at=at(x),_t=st===""?"."+N(x,0):st,ft(at)?(ot="",_t!=null&&(ot=_t.replace(M,"$&/")+"/"),It(at,W,ot,"",function(Ft){return Ft})):at!=null&&(S(at)&&(at=w(at,ot+(at.key==null||x&&x.key===at.key?"":(""+at.key).replace(M,"$&/")+"/")+_t)),W.push(at)),1;_t=0;var ie=st===""?".":st+":";if(ft(x))for(var xt=0;xt<x.length;xt++)st=x[xt],At=ie+N(st,xt),_t+=It(st,W,ot,At,at);else if(xt=I(x),typeof xt=="function")for(x=xt.call(x),xt=0;!(st=x.next()).done;)st=st.value,At=ie+N(st,xt++),_t+=It(st,W,ot,At,at);else if(At==="object"){if(typeof x.then=="function")return It(bt(x),W,ot,st,at);throw W=String(x),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return _t}function it(x,W,ot){if(x==null)return x;var st=[],at=0;return It(x,st,"","",function(At){return W.call(ot,At,at++)}),st}function ct(x){if(x._status===-1){var W=x._result;W=W(),W.then(function(ot){(x._status===0||x._status===-1)&&(x._status=1,x._result=ot)},function(ot){(x._status===0||x._status===-1)&&(x._status=2,x._result=ot)}),x._status===-1&&(x._status=0,x._result=W)}if(x._status===1)return x._result.default;throw x._result}var mt=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)};function ut(){}return Vt.Children={map:it,forEach:function(x,W,ot){it(x,function(){W.apply(this,arguments)},ot)},count:function(x){var W=0;return it(x,function(){W++}),W},toArray:function(x){return it(x,function(W){return W})||[]},only:function(x){if(!S(x))throw Error("React.Children.only expected to receive a single React element child.");return x}},Vt.Component=q,Vt.Fragment=i,Vt.Profiler=l,Vt.PureComponent=X,Vt.StrictMode=a,Vt.Suspense=p,Vt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=lt,Vt.act=function(){throw Error("act(...) is not supported in production builds of React.")},Vt.cache=function(x){return function(){return x.apply(null,arguments)}},Vt.cloneElement=function(x,W,ot){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var st=H({},x.props),at=x.key,At=void 0;if(W!=null)for(_t in W.ref!==void 0&&(At=void 0),W.key!==void 0&&(at=""+W.key),W)!ht.call(W,_t)||_t==="key"||_t==="__self"||_t==="__source"||_t==="ref"&&W.ref===void 0||(st[_t]=W[_t]);var _t=arguments.length-2;if(_t===1)st.children=ot;else if(1<_t){for(var ie=Array(_t),xt=0;xt<_t;xt++)ie[xt]=arguments[xt+2];st.children=ie}return O(x.type,at,void 0,void 0,At,st)},Vt.createContext=function(x){return x={$$typeof:h,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:c,_context:x},x},Vt.createElement=function(x,W,ot){var st,at={},At=null;if(W!=null)for(st in W.key!==void 0&&(At=""+W.key),W)ht.call(W,st)&&st!=="key"&&st!=="__self"&&st!=="__source"&&(at[st]=W[st]);var _t=arguments.length-2;if(_t===1)at.children=ot;else if(1<_t){for(var ie=Array(_t),xt=0;xt<_t;xt++)ie[xt]=arguments[xt+2];at.children=ie}if(x&&x.defaultProps)for(st in _t=x.defaultProps,_t)at[st]===void 0&&(at[st]=_t[st]);return O(x,At,void 0,void 0,null,at)},Vt.createRef=function(){return{current:null}},Vt.forwardRef=function(x){return{$$typeof:m,render:x}},Vt.isValidElement=S,Vt.lazy=function(x){return{$$typeof:E,_payload:{_status:-1,_result:x},_init:ct}},Vt.memo=function(x,W){return{$$typeof:y,type:x,compare:W===void 0?null:W}},Vt.startTransition=function(x){var W=lt.T,ot={};lt.T=ot;try{var st=x(),at=lt.S;at!==null&&at(ot,st),typeof st=="object"&&st!==null&&typeof st.then=="function"&&st.then(ut,mt)}catch(At){mt(At)}finally{lt.T=W}},Vt.unstable_useCacheRefresh=function(){return lt.H.useCacheRefresh()},Vt.use=function(x){return lt.H.use(x)},Vt.useActionState=function(x,W,ot){return lt.H.useActionState(x,W,ot)},Vt.useCallback=function(x,W){return lt.H.useCallback(x,W)},Vt.useContext=function(x){return lt.H.useContext(x)},Vt.useDebugValue=function(){},Vt.useDeferredValue=function(x,W){return lt.H.useDeferredValue(x,W)},Vt.useEffect=function(x,W){return lt.H.useEffect(x,W)},Vt.useId=function(){return lt.H.useId()},Vt.useImperativeHandle=function(x,W,ot){return lt.H.useImperativeHandle(x,W,ot)},Vt.useInsertionEffect=function(x,W){return lt.H.useInsertionEffect(x,W)},Vt.useLayoutEffect=function(x,W){return lt.H.useLayoutEffect(x,W)},Vt.useMemo=function(x,W){return lt.H.useMemo(x,W)},Vt.useOptimistic=function(x,W){return lt.H.useOptimistic(x,W)},Vt.useReducer=function(x,W,ot){return lt.H.useReducer(x,W,ot)},Vt.useRef=function(x){return lt.H.useRef(x)},Vt.useState=function(x){return lt.H.useState(x)},Vt.useSyncExternalStore=function(x,W,ot){return lt.H.useSyncExternalStore(x,W,ot)},Vt.useTransition=function(){return lt.H.useTransition()},Vt.version="19.0.0",Vt}var Zy;function Zd(){return Zy||(Zy=1,id.exports=$b()),id.exports}var B=Zd();const wn=Yb(B);var rd={exports:{}},ul={},sd={exports:{}},ad={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wy;function Zb(){return Wy||(Wy=1,function(r){function t(it,ct){var mt=it.length;it.push(ct);t:for(;0<mt;){var ut=mt-1>>>1,x=it[ut];if(0<l(x,ct))it[ut]=ct,it[mt]=x,mt=ut;else break t}}function i(it){return it.length===0?null:it[0]}function a(it){if(it.length===0)return null;var ct=it[0],mt=it.pop();if(mt!==ct){it[0]=mt;t:for(var ut=0,x=it.length,W=x>>>1;ut<W;){var ot=2*(ut+1)-1,st=it[ot],at=ot+1,At=it[at];if(0>l(st,mt))at<x&&0>l(At,st)?(it[ut]=At,it[at]=mt,ut=at):(it[ut]=st,it[ot]=mt,ut=ot);else if(at<x&&0>l(At,mt))it[ut]=At,it[at]=mt,ut=at;else break t}}return ct}function l(it,ct){var mt=it.sortIndex-ct.sortIndex;return mt!==0?mt:it.id-ct.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var h=Date,m=h.now();r.unstable_now=function(){return h.now()-m}}var p=[],y=[],E=1,A=null,I=3,V=!1,H=!1,F=!1,q=typeof setTimeout=="function"?setTimeout:null,et=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function nt(it){for(var ct=i(y);ct!==null;){if(ct.callback===null)a(y);else if(ct.startTime<=it)a(y),ct.sortIndex=ct.expirationTime,t(p,ct);else break;ct=i(y)}}function ft(it){if(F=!1,nt(it),!H)if(i(p)!==null)H=!0,bt();else{var ct=i(y);ct!==null&&It(ft,ct.startTime-it)}}var lt=!1,ht=-1,O=5,w=-1;function S(){return!(r.unstable_now()-w<O)}function D(){if(lt){var it=r.unstable_now();w=it;var ct=!0;try{t:{H=!1,F&&(F=!1,et(ht),ht=-1),V=!0;var mt=I;try{e:{for(nt(it),A=i(p);A!==null&&!(A.expirationTime>it&&S());){var ut=A.callback;if(typeof ut=="function"){A.callback=null,I=A.priorityLevel;var x=ut(A.expirationTime<=it);if(it=r.unstable_now(),typeof x=="function"){A.callback=x,nt(it),ct=!0;break e}A===i(p)&&a(p),nt(it)}else a(p);A=i(p)}if(A!==null)ct=!0;else{var W=i(y);W!==null&&It(ft,W.startTime-it),ct=!1}}break t}finally{A=null,I=mt,V=!1}ct=void 0}}finally{ct?M():lt=!1}}}var M;if(typeof X=="function")M=function(){X(D)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,R=N.port2;N.port1.onmessage=D,M=function(){R.postMessage(null)}}else M=function(){q(D,0)};function bt(){lt||(lt=!0,M())}function It(it,ct){ht=q(function(){it(r.unstable_now())},ct)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(it){it.callback=null},r.unstable_continueExecution=function(){H||V||(H=!0,bt())},r.unstable_forceFrameRate=function(it){0>it||125<it?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<it?Math.floor(1e3/it):5},r.unstable_getCurrentPriorityLevel=function(){return I},r.unstable_getFirstCallbackNode=function(){return i(p)},r.unstable_next=function(it){switch(I){case 1:case 2:case 3:var ct=3;break;default:ct=I}var mt=I;I=ct;try{return it()}finally{I=mt}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(it,ct){switch(it){case 1:case 2:case 3:case 4:case 5:break;default:it=3}var mt=I;I=it;try{return ct()}finally{I=mt}},r.unstable_scheduleCallback=function(it,ct,mt){var ut=r.unstable_now();switch(typeof mt=="object"&&mt!==null?(mt=mt.delay,mt=typeof mt=="number"&&0<mt?ut+mt:ut):mt=ut,it){case 1:var x=-1;break;case 2:x=250;break;case 5:x=1073741823;break;case 4:x=1e4;break;default:x=5e3}return x=mt+x,it={id:E++,callback:ct,priorityLevel:it,startTime:mt,expirationTime:x,sortIndex:-1},mt>ut?(it.sortIndex=mt,t(y,it),i(p)===null&&it===i(y)&&(F?(et(ht),ht=-1):F=!0,It(ft,mt-ut))):(it.sortIndex=x,t(p,it),H||V||(H=!0,bt())),it},r.unstable_shouldYield=S,r.unstable_wrapCallback=function(it){var ct=I;return function(){var mt=I;I=ct;try{return it.apply(this,arguments)}finally{I=mt}}}}(ad)),ad}var Jy;function Wb(){return Jy||(Jy=1,sd.exports=Zb()),sd.exports}var od={exports:{}},dn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tv;function Jb(){if(tv)return dn;tv=1;var r=Zd();function t(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)y+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(p,y,E){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:A==null?null:""+A,children:p,containerInfo:y,implementation:E}}var h=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,dn.createPortal=function(p,y){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(t(299));return c(p,y,null,E)},dn.flushSync=function(p){var y=h.T,E=a.p;try{if(h.T=null,a.p=2,p)return p()}finally{h.T=y,a.p=E,a.d.f()}},dn.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,a.d.C(p,y))},dn.prefetchDNS=function(p){typeof p=="string"&&a.d.D(p)},dn.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var E=y.as,A=m(E,y.crossOrigin),I=typeof y.integrity=="string"?y.integrity:void 0,V=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;E==="style"?a.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:A,integrity:I,fetchPriority:V}):E==="script"&&a.d.X(p,{crossOrigin:A,integrity:I,fetchPriority:V,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},dn.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var E=m(y.as,y.crossOrigin);a.d.M(p,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&a.d.M(p)},dn.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var E=y.as,A=m(E,y.crossOrigin);a.d.L(p,E,{crossOrigin:A,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},dn.preloadModule=function(p,y){if(typeof p=="string")if(y){var E=m(y.as,y.crossOrigin);a.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else a.d.m(p)},dn.requestFormReset=function(p){a.d.r(p)},dn.unstable_batchedUpdates=function(p,y){return p(y)},dn.useFormState=function(p,y,E){return h.H.useFormState(p,y,E)},dn.useFormStatus=function(){return h.H.useHostTransitionStatus()},dn.version="19.0.0",dn}var ev;function z_(){if(ev)return od.exports;ev=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),od.exports=Jb(),od.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nv;function tS(){if(nv)return ul;nv=1;var r=Wb(),t=Zd(),i=z_();function a(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}var c=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),I=Symbol.for("react.consumer"),V=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),et=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),nt=Symbol.for("react.offscreen"),ft=Symbol.for("react.memo_cache_sentinel"),lt=Symbol.iterator;function ht(e){return e===null||typeof e!="object"?null:(e=lt&&e[lt]||e["@@iterator"],typeof e=="function"?e:null)}var O=Symbol.for("react.client.reference");function w(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===O?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case p:return"Fragment";case m:return"Portal";case E:return"Profiler";case y:return"StrictMode";case F:return"Suspense";case q:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case V:return(e.displayName||"Context")+".Provider";case I:return(e._context.displayName||"Context")+".Consumer";case H:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case et:return n=e.displayName||null,n!==null?n:w(e.type)||"Memo";case X:n=e._payload,e=e._init;try{return w(e(n))}catch{}}return null}var S=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=Object.assign,M,N;function R(e){if(M===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);M=n&&n[1]||"",N=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+M+e+N}var bt=!1;function It(e,n){if(!e||bt)return"";bt=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var tt=function(){throw Error()};if(Object.defineProperty(tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(tt,[])}catch(Q){var j=Q}Reflect.construct(e,[],tt)}else{try{tt.call()}catch(Q){j=Q}e.call(tt.prototype)}}else{try{throw Error()}catch(Q){j=Q}(tt=e())&&typeof tt.catch=="function"&&tt.catch(function(){})}}catch(Q){if(Q&&j&&typeof Q.stack=="string")return[Q.stack,j.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),_=d[0],T=d[1];if(_&&T){var C=_.split(`
`),L=T.split(`
`);for(f=o=0;o<C.length&&!C[o].includes("DetermineComponentFrameRoot");)o++;for(;f<L.length&&!L[f].includes("DetermineComponentFrameRoot");)f++;if(o===C.length||f===L.length)for(o=C.length-1,f=L.length-1;1<=o&&0<=f&&C[o]!==L[f];)f--;for(;1<=o&&0<=f;o--,f--)if(C[o]!==L[f]){if(o!==1||f!==1)do if(o--,f--,0>f||C[o]!==L[f]){var Y=`
`+C[o].replace(" at new "," at ");return e.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",e.displayName)),Y}while(1<=o&&0<=f);break}}}finally{bt=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?R(s):""}function it(e){switch(e.tag){case 26:case 27:case 5:return R(e.type);case 16:return R("Lazy");case 13:return R("Suspense");case 19:return R("SuspenseList");case 0:case 15:return e=It(e.type,!1),e;case 11:return e=It(e.type.render,!1),e;case 1:return e=It(e.type,!0),e;default:return""}}function ct(e){try{var n="";do n+=it(e),e=e.return;while(e);return n}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function mt(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function ut(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function x(e){if(mt(e)!==e)throw Error(a(188))}function W(e){var n=e.alternate;if(!n){if(n=mt(e),n===null)throw Error(a(188));return n!==e?null:e}for(var s=e,o=n;;){var f=s.return;if(f===null)break;var d=f.alternate;if(d===null){if(o=f.return,o!==null){s=o;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===s)return x(f),e;if(d===o)return x(f),n;d=d.sibling}throw Error(a(188))}if(s.return!==o.return)s=f,o=d;else{for(var _=!1,T=f.child;T;){if(T===s){_=!0,s=f,o=d;break}if(T===o){_=!0,o=f,s=d;break}T=T.sibling}if(!_){for(T=d.child;T;){if(T===s){_=!0,s=d,o=f;break}if(T===o){_=!0,o=d,s=f;break}T=T.sibling}if(!_)throw Error(a(189))}}if(s.alternate!==o)throw Error(a(190))}if(s.tag!==3)throw Error(a(188));return s.stateNode.current===s?e:n}function ot(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=ot(e),n!==null)return n;e=e.sibling}return null}var st=Array.isArray,at=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,At={pending:!1,data:null,method:null,action:null},_t=[],ie=-1;function xt(e){return{current:e}}function Ft(e){0>ie||(e.current=_t[ie],_t[ie]=null,ie--)}function vt(e,n){ie++,_t[ie]=e.current,e.current=n}var ye=xt(null),Te=xt(null),Ce=xt(null),Be=xt(null);function yn(e,n){switch(vt(Ce,n),vt(Te,e),vt(ye,null),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)&&(n=n.namespaceURI)?Sy(n):0;break;default:if(e=e===8?n.parentNode:n,n=e.tagName,e=e.namespaceURI)e=Sy(e),n=Ay(e,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Ft(ye),vt(ye,n)}function ln(){Ft(ye),Ft(Te),Ft(Ce)}function pr(e){e.memoizedState!==null&&vt(Be,e);var n=ye.current,s=Ay(n,e.type);n!==s&&(vt(Te,e),vt(ye,s))}function ki(e){Te.current===e&&(Ft(ye),Ft(Te)),Be.current===e&&(Ft(Be),il._currentValue=At)}var mi=Object.prototype.hasOwnProperty,un=r.unstable_scheduleCallback,si=r.unstable_cancelCallback,yr=r.unstable_shouldYield,vr=r.unstable_requestPaint,$e=r.unstable_now,Ws=r.unstable_getCurrentPriorityLevel,ve=r.unstable_ImmediatePriority,re=r.unstable_UserBlockingPriority,cn=r.unstable_NormalPriority,gi=r.unstable_LowPriority,_r=r.unstable_IdlePriority,kn=r.log,pi=r.unstable_setDisableYieldValue,yi=null,je=null;function Bi(e){if(je&&typeof je.onCommitFiberRoot=="function")try{je.onCommitFiberRoot(yi,e,void 0,(e.current.flags&128)===128)}catch{}}function Dn(e){if(typeof kn=="function"&&pi(e),je&&typeof je.setStrictMode=="function")try{je.setStrictMode(yi,e)}catch{}}var Ze=Math.clz32?Math.clz32:ta,Er=Math.log,Js=Math.LN2;function ta(e){return e>>>=0,e===0?32:31-(Er(e)/Js|0)|0}var Bn=128,se=4194304;function ae(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function te(e,n){var s=e.pendingLanes;if(s===0)return 0;var o=0,f=e.suspendedLanes,d=e.pingedLanes,_=e.warmLanes;e=e.finishedLanes!==0;var T=s&134217727;return T!==0?(s=T&~f,s!==0?o=ae(s):(d&=T,d!==0?o=ae(d):e||(_=T&~_,_!==0&&(o=ae(_))))):(T=s&~f,T!==0?o=ae(T):d!==0?o=ae(d):e||(_=s&~_,_!==0&&(o=ae(_)))),o===0?0:n!==0&&n!==o&&(n&f)===0&&(f=o&-o,_=n&-n,f>=_||f===32&&(_&4194176)!==0)?n:o}function We(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function De(e,n){switch(e){case 1:case 2:case 4:case 8:return n+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ie(){var e=Bn;return Bn<<=1,(Bn&4194176)===0&&(Bn=128),e}function xe(){var e=se;return se<<=1,(se&62914560)===0&&(se=4194304),e}function In(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function Ot(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function xn(e,n,s,o,f,d){var _=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var T=e.entanglements,C=e.expirationTimes,L=e.hiddenUpdates;for(s=_&~s;0<s;){var Y=31-Ze(s),tt=1<<Y;T[Y]=0,C[Y]=-1;var j=L[Y];if(j!==null)for(L[Y]=null,Y=0;Y<j.length;Y++){var Q=j[Y];Q!==null&&(Q.lane&=-536870913)}s&=~tt}o!==0&&Ve(e,o,0),d!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=d&~(_&~n))}function Ve(e,n,s){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-Ze(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|s&4194218}function qe(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var o=31-Ze(s),f=1<<o;f&n|e[o]&n&&(e[o]|=n),s&=~f}}function vi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function _i(){var e=at.p;return e!==0?e:(e=window.event,e===void 0?32:qy(e.type))}function Je(e,n){var s=at.p;try{return at.p=e,n()}finally{at.p=s}}var fn=Math.random().toString(36).slice(2),he="__reactFiber$"+fn,Oe="__reactProps$"+fn,ji="__reactContainer$"+fn,fs="__reactEvents$"+fn,ea="__reactListeners$"+fn,Ei="__reactHandles$"+fn,lo="__reactResources$"+fn,Tr="__reactMarker$"+fn;function hs(e){delete e[he],delete e[Oe],delete e[fs],delete e[ea],delete e[Ei]}function ai(e){var n=e[he];if(n)return n;for(var s=e.parentNode;s;){if(n=s[ji]||s[he]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=Cy(e);e!==null;){if(s=e[he])return s;e=Cy(e)}return n}e=s,s=e.parentNode}return null}function qi(e){if(e=e[he]||e[ji]){var n=e.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return e}return null}function br(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(a(33))}function Sr(e){var n=e[lo];return n||(n=e[lo]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function le(e){e[Tr]=!0}var uo=new Set,na={};function Vn(e,n){bn(e,n),bn(e+"Capture",n)}function bn(e,n){for(na[e]=n,e=0;e<n.length;e++)uo.add(n[e])}var On=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),af=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),co={},fo={};function jl(e){return mi.call(fo,e)?!0:mi.call(co,e)?!1:af.test(e)?fo[e]=!0:(co[e]=!0,!1)}function Ar(e,n,s){if(jl(n))if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+s)}}function wr(e,n,s){if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+s)}}function jn(e,n,s,o){if(o===null)e.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(n,s,""+o)}}function vn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ql(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function of(e){var n=ql(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),o=""+e[n];if(!e.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var f=s.get,d=s.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return f.call(this)},set:function(_){o=""+_,d.call(this,_)}}),Object.defineProperty(e,n,{enumerable:s.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function ds(e){e._valueTracker||(e._valueTracker=of(e))}function ho(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),o="";return e&&(o=ql(e)?e.checked?"true":"false":e.value),e=o,e!==s?(n.setValue(e),!0):!1}function ia(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Hi=/[\n"\\]/g;function de(e){return e.replace(Hi,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Rr(e,n,s,o,f,d,_,T){e.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.type=_:e.removeAttribute("type"),n!=null?_==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+vn(n)):e.value!==""+vn(n)&&(e.value=""+vn(n)):_!=="submit"&&_!=="reset"||e.removeAttribute("value"),n!=null?ra(e,_,vn(n)):s!=null?ra(e,_,vn(s)):o!=null&&e.removeAttribute("value"),f==null&&d!=null&&(e.defaultChecked=!!d),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?e.name=""+vn(T):e.removeAttribute("name")}function ms(e,n,s,o,f,d,_,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),n!=null||s!=null){if(!(d!=="submit"&&d!=="reset"||n!=null))return;s=s!=null?""+vn(s):"",n=n!=null?""+vn(n):s,T||n===e.value||(e.value=n),e.defaultValue=n}o=o??f,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=T?e.checked:!!o,e.defaultChecked=!!o,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(e.name=_)}function ra(e,n,s){n==="number"&&ia(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Gt(e,n,s,o){if(e=e.options,n){n={};for(var f=0;f<s.length;f++)n["$"+s[f]]=!0;for(s=0;s<e.length;s++)f=n.hasOwnProperty("$"+e[s].value),e[s].selected!==f&&(e[s].selected=f),f&&o&&(e[s].defaultSelected=!0)}else{for(s=""+vn(s),n=null,f=0;f<e.length;f++){if(e[f].value===s){e[f].selected=!0,o&&(e[f].defaultSelected=!0);return}n!==null||e[f].disabled||(n=e[f])}n!==null&&(n.selected=!0)}}function gs(e,n,s){if(n!=null&&(n=""+vn(n),n!==e.value&&(e.value=n),s==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=s!=null?""+vn(s):""}function Cr(e,n,s,o){if(n==null){if(o!=null){if(s!=null)throw Error(a(92));if(st(o)){if(1<o.length)throw Error(a(93));o=o[0]}s=o}s==null&&(s=""),n=s}s=vn(n),e.defaultValue=s,o=e.textContent,o===s&&o!==""&&o!==null&&(e.value=o)}function qn(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var lf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function mo(e,n,s){var o=n.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,s):typeof s!="number"||s===0||lf.has(n)?n==="float"?e.cssFloat=s:e[n]=(""+s).trim():e[n]=s+"px"}function Hl(e,n,s){if(n!=null&&typeof n!="object")throw Error(a(62));if(e=e.style,s!=null){for(var o in s)!s.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var f in n)o=n[f],n.hasOwnProperty(f)&&s[f]!==o&&mo(e,f,o)}else for(var d in n)n.hasOwnProperty(d)&&mo(e,d,n[d])}function go(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),cf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ti(e){return cf.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Hn=null;function sa(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Fi=null,Gi=null;function Qi(e){var n=qi(e);if(n&&(e=n.stateNode)){var s=e[Oe]||null;t:switch(e=n.stateNode,n.type){case"input":if(Rr(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+de(""+n)+'"][type="radio"]'),n=0;n<s.length;n++){var o=s[n];if(o!==e&&o.form===e.form){var f=o[Oe]||null;if(!f)throw Error(a(90));Rr(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(n=0;n<s.length;n++)o=s[n],o.form===e.form&&ho(o)}break t;case"textarea":gs(e,s.value,s.defaultValue);break t;case"select":n=s.value,n!=null&&Gt(e,!!s.multiple,n,!1)}}}var po=!1;function Fl(e,n,s){if(po)return e(n,s);po=!0;try{var o=e(n);return o}finally{if(po=!1,(Fi!==null||Gi!==null)&&(Uu(),Fi&&(n=Fi,e=Gi,Gi=Fi=null,Qi(n),e)))for(n=0;n<e.length;n++)Qi(e[n])}}function ps(e,n){var s=e.stateNode;if(s===null)return null;var o=s[Oe]||null;if(o===null)return null;s=o[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(a(231,n,typeof s));return s}var Fn=!1;if(On)try{var ys={};Object.defineProperty(ys,"passive",{get:function(){Fn=!0}}),window.addEventListener("test",ys,ys),window.removeEventListener("test",ys,ys)}catch{Fn=!1}var bi=null,Dr=null,Yi=null;function yo(){if(Yi)return Yi;var e,n=Dr,s=n.length,o,f="value"in bi?bi.value:bi.textContent,d=f.length;for(e=0;e<s&&n[e]===f[e];e++);var _=s-e;for(o=1;o<=_&&n[s-o]===f[d-o];o++);return Yi=f.slice(e,1<o?1-o:void 0)}function Si(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Ai(){return!0}function vo(){return!1}function He(e){function n(s,o,f,d,_){this._reactName=s,this._targetInst=f,this.type=o,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var T in e)e.hasOwnProperty(T)&&(s=e[T],this[T]=s?s(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ai:vo,this.isPropagationStopped=vo,this}return D(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Ai)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Ai)},persist:function(){},isPersistent:Ai}),n}var Xt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},aa=He(Xt),vs=D({},Xt,{view:0,detail:0}),Gl=He(vs),oa,la,wi,_s=D({},vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bs,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==wi&&(wi&&e.type==="mousemove"?(oa=e.screenX-wi.screenX,la=e.screenY-wi.screenY):la=oa=0,wi=e),oa)},movementY:function(e){return"movementY"in e?e.movementY:la}}),Gn=He(_s),Ql=D({},_s,{dataTransfer:0}),ff=He(Ql),Es=D({},vs,{relatedTarget:0}),ua=He(Es),_o=D({},Xt,{animationName:0,elapsedTime:0,pseudoElement:0}),ca=He(_o),Yl=D({},Xt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),fa=He(Yl),hf=D({},Xt,{data:0}),Eo=He(hf),Ts={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function To(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Xl[e])?!!n[e]:!1}function bs(){return To}var $l=D({},vs,{key:function(e){if(e.key){var n=Ts[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Si(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Kl[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bs,charCode:function(e){return e.type==="keypress"?Si(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Si(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ha=He($l),Zl=D({},_s,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bo=He(Zl),Ki=D({},vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bs}),Wl=He(Ki),Jl=D({},Xt,{propertyName:0,elapsedTime:0,pseudoElement:0}),tu=He(Jl),eu=D({},_s,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),da=He(eu),_n=D({},Xt,{newState:0,oldState:0}),nu=He(_n),iu=[9,13,27,32],Ri=On&&"CompositionEvent"in window,u=null;On&&"documentMode"in document&&(u=document.documentMode);var g=On&&"TextEvent"in window&&!u,v=On&&(!Ri||u&&8<u&&11>=u),b=" ",P=!1;function G(e,n){switch(e){case"keyup":return iu.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rt(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var kt=!1;function Me(e,n){switch(e){case"compositionend":return rt(n);case"keypress":return n.which!==32?null:(P=!0,b);case"textInput":return e=n.data,e===b&&P?null:e;default:return null}}function Bt(e,n){if(kt)return e==="compositionend"||!Ri&&G(e,n)?(e=yo(),Yi=Dr=bi=null,kt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return v&&n.locale!=="ko"?null:n.data;default:return null}}var Fe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ne(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Fe[e.type]:n==="textarea"}function Xi(e,n,s,o){Fi?Gi?Gi.push(o):Gi=[o]:Fi=o,n=Bu(n,"onChange"),0<n.length&&(s=new aa("onChange","change",null,s,o),e.push({event:s,listeners:n}))}var tn=null,Ci=null;function So(e){vy(e,0)}function ru(e){var n=br(e);if(ho(n))return e}function Ym(e,n){if(e==="change")return n}var Km=!1;if(On){var df;if(On){var mf="oninput"in document;if(!mf){var Xm=document.createElement("div");Xm.setAttribute("oninput","return;"),mf=typeof Xm.oninput=="function"}df=mf}else df=!1;Km=df&&(!document.documentMode||9<document.documentMode)}function $m(){tn&&(tn.detachEvent("onpropertychange",Zm),Ci=tn=null)}function Zm(e){if(e.propertyName==="value"&&ru(Ci)){var n=[];Xi(n,Ci,e,sa(e)),Fl(So,n)}}function ST(e,n,s){e==="focusin"?($m(),tn=n,Ci=s,tn.attachEvent("onpropertychange",Zm)):e==="focusout"&&$m()}function AT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ru(Ci)}function wT(e,n){if(e==="click")return ru(n)}function RT(e,n){if(e==="input"||e==="change")return ru(n)}function CT(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Mn=typeof Object.is=="function"?Object.is:CT;function Ao(e,n){if(Mn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),o=Object.keys(n);if(s.length!==o.length)return!1;for(o=0;o<s.length;o++){var f=s[o];if(!mi.call(n,f)||!Mn(e[f],n[f]))return!1}return!0}function Wm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jm(e,n){var s=Wm(e);e=0;for(var o;s;){if(s.nodeType===3){if(o=e+s.textContent.length,e<=n&&o>=n)return{node:s,offset:n-e};e=o}t:{for(;s;){if(s.nextSibling){s=s.nextSibling;break t}s=s.parentNode}s=void 0}s=Wm(s)}}function tg(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?tg(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function eg(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=ia(e.document);n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=ia(e.document)}return n}function gf(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function DT(e,n){var s=eg(n);n=e.focusedElem;var o=e.selectionRange;if(s!==n&&n&&n.ownerDocument&&tg(n.ownerDocument.documentElement,n)){if(o!==null&&gf(n)){if(e=o.start,s=o.end,s===void 0&&(s=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(s,n.value.length);else if(s=(e=n.ownerDocument||document)&&e.defaultView||window,s.getSelection){s=s.getSelection();var f=n.textContent.length,d=Math.min(o.start,f);o=o.end===void 0?d:Math.min(o.end,f),!s.extend&&d>o&&(f=o,o=d,d=f),f=Jm(n,d);var _=Jm(n,o);f&&_&&(s.rangeCount!==1||s.anchorNode!==f.node||s.anchorOffset!==f.offset||s.focusNode!==_.node||s.focusOffset!==_.offset)&&(e=e.createRange(),e.setStart(f.node,f.offset),s.removeAllRanges(),d>o?(s.addRange(e),s.extend(_.node,_.offset)):(e.setEnd(_.node,_.offset),s.addRange(e)))}}for(e=[],s=n;s=s.parentNode;)s.nodeType===1&&e.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)s=e[n],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var IT=On&&"documentMode"in document&&11>=document.documentMode,ma=null,pf=null,wo=null,yf=!1;function ng(e,n,s){var o=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;yf||ma==null||ma!==ia(o)||(o=ma,"selectionStart"in o&&gf(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),wo&&Ao(wo,o)||(wo=o,o=Bu(pf,"onSelect"),0<o.length&&(n=new aa("onSelect","select",null,n,s),e.push({event:n,listeners:o}),n.target=ma)))}function Ss(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var ga={animationend:Ss("Animation","AnimationEnd"),animationiteration:Ss("Animation","AnimationIteration"),animationstart:Ss("Animation","AnimationStart"),transitionrun:Ss("Transition","TransitionRun"),transitionstart:Ss("Transition","TransitionStart"),transitioncancel:Ss("Transition","TransitionCancel"),transitionend:Ss("Transition","TransitionEnd")},vf={},ig={};On&&(ig=document.createElement("div").style,"AnimationEvent"in window||(delete ga.animationend.animation,delete ga.animationiteration.animation,delete ga.animationstart.animation),"TransitionEvent"in window||delete ga.transitionend.transition);function As(e){if(vf[e])return vf[e];if(!ga[e])return e;var n=ga[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in ig)return vf[e]=n[s];return e}var rg=As("animationend"),sg=As("animationiteration"),ag=As("animationstart"),xT=As("transitionrun"),VT=As("transitionstart"),OT=As("transitioncancel"),og=As("transitionend"),lg=new Map,ug="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function oi(e,n){lg.set(e,n),Vn(n,[e])}var Qn=[],pa=0,_f=0;function su(){for(var e=pa,n=_f=pa=0;n<e;){var s=Qn[n];Qn[n++]=null;var o=Qn[n];Qn[n++]=null;var f=Qn[n];Qn[n++]=null;var d=Qn[n];if(Qn[n++]=null,o!==null&&f!==null){var _=o.pending;_===null?f.next=f:(f.next=_.next,_.next=f),o.pending=f}d!==0&&cg(s,f,d)}}function au(e,n,s,o){Qn[pa++]=e,Qn[pa++]=n,Qn[pa++]=s,Qn[pa++]=o,_f|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Ef(e,n,s,o){return au(e,n,s,o),ou(e)}function Ir(e,n){return au(e,null,null,n),ou(e)}function cg(e,n,s){e.lanes|=s;var o=e.alternate;o!==null&&(o.lanes|=s);for(var f=!1,d=e.return;d!==null;)d.childLanes|=s,o=d.alternate,o!==null&&(o.childLanes|=s),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(f=!0)),e=d,d=d.return;f&&n!==null&&e.tag===3&&(d=e.stateNode,f=31-Ze(s),d=d.hiddenUpdates,e=d[f],e===null?d[f]=[n]:e.push(n),n.lane=s|536870912)}function ou(e){if(50<$o)throw $o=0,Rh=null,Error(a(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var ya={},fg=new WeakMap;function Yn(e,n){if(typeof e=="object"&&e!==null){var s=fg.get(e);return s!==void 0?s:(n={value:e,source:n,stack:ct(n)},fg.set(e,n),n)}return{value:e,source:n,stack:ct(n)}}var va=[],_a=0,lu=null,uu=0,Kn=[],Xn=0,ws=null,$i=1,Zi="";function Rs(e,n){va[_a++]=uu,va[_a++]=lu,lu=e,uu=n}function hg(e,n,s){Kn[Xn++]=$i,Kn[Xn++]=Zi,Kn[Xn++]=ws,ws=e;var o=$i;e=Zi;var f=32-Ze(o)-1;o&=~(1<<f),s+=1;var d=32-Ze(n)+f;if(30<d){var _=f-f%5;d=(o&(1<<_)-1).toString(32),o>>=_,f-=_,$i=1<<32-Ze(n)+f|s<<f|o,Zi=d+e}else $i=1<<d|s<<f|o,Zi=e}function Tf(e){e.return!==null&&(Rs(e,1),hg(e,1,0))}function bf(e){for(;e===lu;)lu=va[--_a],va[_a]=null,uu=va[--_a],va[_a]=null;for(;e===ws;)ws=Kn[--Xn],Kn[Xn]=null,Zi=Kn[--Xn],Kn[Xn]=null,$i=Kn[--Xn],Kn[Xn]=null}var En=null,en=null,Qt=!1,li=null,Di=!1,Sf=Error(a(519));function Cs(e){var n=Error(a(418,""));throw Do(Yn(n,e)),Sf}function dg(e){var n=e.stateNode,s=e.type,o=e.memoizedProps;switch(n[he]=e,n[Oe]=o,s){case"dialog":Pt("cancel",n),Pt("close",n);break;case"iframe":case"object":case"embed":Pt("load",n);break;case"video":case"audio":for(s=0;s<Wo.length;s++)Pt(Wo[s],n);break;case"source":Pt("error",n);break;case"img":case"image":case"link":Pt("error",n),Pt("load",n);break;case"details":Pt("toggle",n);break;case"input":Pt("invalid",n),ms(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),ds(n);break;case"select":Pt("invalid",n);break;case"textarea":Pt("invalid",n),Cr(n,o.value,o.defaultValue,o.children),ds(n)}s=o.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||n.textContent===""+s||o.suppressHydrationWarning===!0||by(n.textContent,s)?(o.popover!=null&&(Pt("beforetoggle",n),Pt("toggle",n)),o.onScroll!=null&&Pt("scroll",n),o.onScrollEnd!=null&&Pt("scrollend",n),o.onClick!=null&&(n.onclick=ju),n=!0):n=!1,n||Cs(e)}function mg(e){for(En=e.return;En;)switch(En.tag){case 3:case 27:Di=!0;return;case 5:case 13:Di=!1;return;default:En=En.return}}function Ro(e){if(e!==En)return!1;if(!Qt)return mg(e),Qt=!0,!1;var n=!1,s;if((s=e.tag!==3&&e.tag!==27)&&((s=e.tag===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||Hh(e.type,e.memoizedProps)),s=!s),s&&(n=!0),n&&en&&Cs(e),mg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));t:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8)if(s=e.data,s==="/$"){if(n===0){en=ci(e.nextSibling);break t}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++;e=e.nextSibling}en=null}}else en=En?ci(e.stateNode.nextSibling):null;return!0}function Co(){en=En=null,Qt=!1}function Do(e){li===null?li=[e]:li.push(e)}var Io=Error(a(460)),gg=Error(a(474)),Af={then:function(){}};function pg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function cu(){}function yg(e,n,s){switch(s=e[s],s===void 0?e.push(n):s!==n&&(n.then(cu,cu),n=s),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,e===Io?Error(a(483)):e;default:if(typeof n.status=="string")n.then(cu,cu);else{if(e=ee,e!==null&&100<e.shellSuspendCounter)throw Error(a(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var f=n;f.status="fulfilled",f.value=o}},function(o){if(n.status==="pending"){var f=n;f.status="rejected",f.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,e===Io?Error(a(483)):e}throw xo=n,Io}}var xo=null;function vg(){if(xo===null)throw Error(a(459));var e=xo;return xo=null,e}var Ea=null,Vo=0;function fu(e){var n=Vo;return Vo+=1,Ea===null&&(Ea=[]),yg(Ea,e,n)}function Oo(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function hu(e,n){throw n.$$typeof===c?Error(a(525)):(e=Object.prototype.toString.call(n),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function _g(e){var n=e._init;return n(e._payload)}function Eg(e){function n(z,U){if(e){var k=z.deletions;k===null?(z.deletions=[U],z.flags|=16):k.push(U)}}function s(z,U){if(!e)return null;for(;U!==null;)n(z,U),U=U.sibling;return null}function o(z){for(var U=new Map;z!==null;)z.key!==null?U.set(z.key,z):U.set(z.index,z),z=z.sibling;return U}function f(z,U){return z=jr(z,U),z.index=0,z.sibling=null,z}function d(z,U,k){return z.index=k,e?(k=z.alternate,k!==null?(k=k.index,k<U?(z.flags|=33554434,U):k):(z.flags|=33554434,U)):(z.flags|=1048576,U)}function _(z){return e&&z.alternate===null&&(z.flags|=33554434),z}function T(z,U,k,$){return U===null||U.tag!==6?(U=vh(k,z.mode,$),U.return=z,U):(U=f(U,k),U.return=z,U)}function C(z,U,k,$){var gt=k.type;return gt===p?Y(z,U,k.props.children,$,k.key):U!==null&&(U.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===X&&_g(gt)===U.type)?(U=f(U,k.props),Oo(U,k),U.return=z,U):(U=xu(k.type,k.key,k.props,null,z.mode,$),Oo(U,k),U.return=z,U)}function L(z,U,k,$){return U===null||U.tag!==4||U.stateNode.containerInfo!==k.containerInfo||U.stateNode.implementation!==k.implementation?(U=_h(k,z.mode,$),U.return=z,U):(U=f(U,k.children||[]),U.return=z,U)}function Y(z,U,k,$,gt){return U===null||U.tag!==7?(U=zs(k,z.mode,$,gt),U.return=z,U):(U=f(U,k),U.return=z,U)}function tt(z,U,k){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=vh(""+U,z.mode,k),U.return=z,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case h:return k=xu(U.type,U.key,U.props,null,z.mode,k),Oo(k,U),k.return=z,k;case m:return U=_h(U,z.mode,k),U.return=z,U;case X:var $=U._init;return U=$(U._payload),tt(z,U,k)}if(st(U)||ht(U))return U=zs(U,z.mode,k,null),U.return=z,U;if(typeof U.then=="function")return tt(z,fu(U),k);if(U.$$typeof===V)return tt(z,Cu(z,U),k);hu(z,U)}return null}function j(z,U,k,$){var gt=U!==null?U.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return gt!==null?null:T(z,U,""+k,$);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case h:return k.key===gt?C(z,U,k,$):null;case m:return k.key===gt?L(z,U,k,$):null;case X:return gt=k._init,k=gt(k._payload),j(z,U,k,$)}if(st(k)||ht(k))return gt!==null?null:Y(z,U,k,$,null);if(typeof k.then=="function")return j(z,U,fu(k),$);if(k.$$typeof===V)return j(z,U,Cu(z,k),$);hu(z,k)}return null}function Q(z,U,k,$,gt){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return z=z.get(k)||null,T(U,z,""+$,gt);if(typeof $=="object"&&$!==null){switch($.$$typeof){case h:return z=z.get($.key===null?k:$.key)||null,C(U,z,$,gt);case m:return z=z.get($.key===null?k:$.key)||null,L(U,z,$,gt);case X:var Ut=$._init;return $=Ut($._payload),Q(z,U,k,$,gt)}if(st($)||ht($))return z=z.get(k)||null,Y(U,z,$,gt,null);if(typeof $.then=="function")return Q(z,U,k,fu($),gt);if($.$$typeof===V)return Q(z,U,k,Cu(U,$),gt);hu(U,$)}return null}function yt(z,U,k,$){for(var gt=null,Ut=null,Et=U,St=U=0,Ye=null;Et!==null&&St<k.length;St++){Et.index>St?(Ye=Et,Et=null):Ye=Et.sibling;var Yt=j(z,Et,k[St],$);if(Yt===null){Et===null&&(Et=Ye);break}e&&Et&&Yt.alternate===null&&n(z,Et),U=d(Yt,U,St),Ut===null?gt=Yt:Ut.sibling=Yt,Ut=Yt,Et=Ye}if(St===k.length)return s(z,Et),Qt&&Rs(z,St),gt;if(Et===null){for(;St<k.length;St++)Et=tt(z,k[St],$),Et!==null&&(U=d(Et,U,St),Ut===null?gt=Et:Ut.sibling=Et,Ut=Et);return Qt&&Rs(z,St),gt}for(Et=o(Et);St<k.length;St++)Ye=Q(Et,z,St,k[St],$),Ye!==null&&(e&&Ye.alternate!==null&&Et.delete(Ye.key===null?St:Ye.key),U=d(Ye,U,St),Ut===null?gt=Ye:Ut.sibling=Ye,Ut=Ye);return e&&Et.forEach(function(Kr){return n(z,Kr)}),Qt&&Rs(z,St),gt}function Ct(z,U,k,$){if(k==null)throw Error(a(151));for(var gt=null,Ut=null,Et=U,St=U=0,Ye=null,Yt=k.next();Et!==null&&!Yt.done;St++,Yt=k.next()){Et.index>St?(Ye=Et,Et=null):Ye=Et.sibling;var Kr=j(z,Et,Yt.value,$);if(Kr===null){Et===null&&(Et=Ye);break}e&&Et&&Kr.alternate===null&&n(z,Et),U=d(Kr,U,St),Ut===null?gt=Kr:Ut.sibling=Kr,Ut=Kr,Et=Ye}if(Yt.done)return s(z,Et),Qt&&Rs(z,St),gt;if(Et===null){for(;!Yt.done;St++,Yt=k.next())Yt=tt(z,Yt.value,$),Yt!==null&&(U=d(Yt,U,St),Ut===null?gt=Yt:Ut.sibling=Yt,Ut=Yt);return Qt&&Rs(z,St),gt}for(Et=o(Et);!Yt.done;St++,Yt=k.next())Yt=Q(Et,z,St,Yt.value,$),Yt!==null&&(e&&Yt.alternate!==null&&Et.delete(Yt.key===null?St:Yt.key),U=d(Yt,U,St),Ut===null?gt=Yt:Ut.sibling=Yt,Ut=Yt);return e&&Et.forEach(function(Qb){return n(z,Qb)}),Qt&&Rs(z,St),gt}function pe(z,U,k,$){if(typeof k=="object"&&k!==null&&k.type===p&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case h:t:{for(var gt=k.key;U!==null;){if(U.key===gt){if(gt=k.type,gt===p){if(U.tag===7){s(z,U.sibling),$=f(U,k.props.children),$.return=z,z=$;break t}}else if(U.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===X&&_g(gt)===U.type){s(z,U.sibling),$=f(U,k.props),Oo($,k),$.return=z,z=$;break t}s(z,U);break}else n(z,U);U=U.sibling}k.type===p?($=zs(k.props.children,z.mode,$,k.key),$.return=z,z=$):($=xu(k.type,k.key,k.props,null,z.mode,$),Oo($,k),$.return=z,z=$)}return _(z);case m:t:{for(gt=k.key;U!==null;){if(U.key===gt)if(U.tag===4&&U.stateNode.containerInfo===k.containerInfo&&U.stateNode.implementation===k.implementation){s(z,U.sibling),$=f(U,k.children||[]),$.return=z,z=$;break t}else{s(z,U);break}else n(z,U);U=U.sibling}$=_h(k,z.mode,$),$.return=z,z=$}return _(z);case X:return gt=k._init,k=gt(k._payload),pe(z,U,k,$)}if(st(k))return yt(z,U,k,$);if(ht(k)){if(gt=ht(k),typeof gt!="function")throw Error(a(150));return k=gt.call(k),Ct(z,U,k,$)}if(typeof k.then=="function")return pe(z,U,fu(k),$);if(k.$$typeof===V)return pe(z,U,Cu(z,k),$);hu(z,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,U!==null&&U.tag===6?(s(z,U.sibling),$=f(U,k),$.return=z,z=$):(s(z,U),$=vh(k,z.mode,$),$.return=z,z=$),_(z)):s(z,U)}return function(z,U,k,$){try{Vo=0;var gt=pe(z,U,k,$);return Ea=null,gt}catch(Et){if(Et===Io)throw Et;var Ut=Jn(29,Et,null,z.mode);return Ut.lanes=$,Ut.return=z,Ut}finally{}}}var Ds=Eg(!0),Tg=Eg(!1),Ta=xt(null),du=xt(0);function bg(e,n){e=lr,vt(du,e),vt(Ta,n),lr=e|n.baseLanes}function wf(){vt(du,lr),vt(Ta,Ta.current)}function Rf(){lr=du.current,Ft(Ta),Ft(du)}var $n=xt(null),Ii=null;function xr(e){var n=e.alternate;vt(Ue,Ue.current&1),vt($n,e),Ii===null&&(n===null||Ta.current!==null||n.memoizedState!==null)&&(Ii=e)}function Sg(e){if(e.tag===22){if(vt(Ue,Ue.current),vt($n,e),Ii===null){var n=e.alternate;n!==null&&n.memoizedState!==null&&(Ii=e)}}else Vr()}function Vr(){vt(Ue,Ue.current),vt($n,$n.current)}function Wi(e){Ft($n),Ii===e&&(Ii=null),Ft(Ue)}var Ue=xt(0);function mu(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var MT=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(s,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(s){return s()})}},NT=r.unstable_scheduleCallback,UT=r.unstable_NormalPriority,Le={$$typeof:V,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Cf(){return{controller:new MT,data:new Map,refCount:0}}function Mo(e){e.refCount--,e.refCount===0&&NT(UT,function(){e.controller.abort()})}var No=null,Df=0,ba=0,Sa=null;function LT(e,n){if(No===null){var s=No=[];Df=0,ba=Nh(),Sa={status:"pending",value:void 0,then:function(o){s.push(o)}}}return Df++,n.then(Ag,Ag),n}function Ag(){if(--Df===0&&No!==null){Sa!==null&&(Sa.status="fulfilled");var e=No;No=null,ba=0,Sa=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function zT(e,n){var s=[],o={status:"pending",value:null,reason:null,then:function(f){s.push(f)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var f=0;f<s.length;f++)(0,s[f])(n)},function(f){for(o.status="rejected",o.reason=f,f=0;f<s.length;f++)(0,s[f])(void 0)}),o}var wg=S.S;S.S=function(e,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&LT(e,n),wg!==null&&wg(e,n)};var Is=xt(null);function If(){var e=Is.current;return e!==null?e:ee.pooledCache}function gu(e,n){n===null?vt(Is,Is.current):vt(Is,n.pool)}function Rg(){var e=If();return e===null?null:{parent:Le._currentValue,pool:e}}var Or=0,Mt=null,Zt=null,be=null,pu=!1,Aa=!1,xs=!1,yu=0,Uo=0,wa=null,PT=0;function _e(){throw Error(a(321))}function xf(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!Mn(e[s],n[s]))return!1;return!0}function Vf(e,n,s,o,f,d){return Or=d,Mt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,S.H=e===null||e.memoizedState===null?Vs:Mr,xs=!1,d=s(o,f),xs=!1,Aa&&(d=Dg(n,s,o,f)),Cg(e),d}function Cg(e){S.H=xi;var n=Zt!==null&&Zt.next!==null;if(Or=0,be=Zt=Mt=null,pu=!1,Uo=0,wa=null,n)throw Error(a(300));e===null||Ge||(e=e.dependencies,e!==null&&Ru(e)&&(Ge=!0))}function Dg(e,n,s,o){Mt=e;var f=0;do{if(Aa&&(wa=null),Uo=0,Aa=!1,25<=f)throw Error(a(301));if(f+=1,be=Zt=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}S.H=Os,d=n(s,o)}while(Aa);return d}function kT(){var e=S.H,n=e.useState()[0];return n=typeof n.then=="function"?Lo(n):n,e=e.useState()[0],(Zt!==null?Zt.memoizedState:null)!==e&&(Mt.flags|=1024),n}function Of(){var e=yu!==0;return yu=0,e}function Mf(e,n,s){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~s}function Nf(e){if(pu){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}pu=!1}Or=0,be=Zt=Mt=null,Aa=!1,Uo=yu=0,wa=null}function Sn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return be===null?Mt.memoizedState=be=e:be=be.next=e,be}function Se(){if(Zt===null){var e=Mt.alternate;e=e!==null?e.memoizedState:null}else e=Zt.next;var n=be===null?Mt.memoizedState:be.next;if(n!==null)be=n,Zt=e;else{if(e===null)throw Mt.alternate===null?Error(a(467)):Error(a(310));Zt=e,e={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},be===null?Mt.memoizedState=be=e:be=be.next=e}return be}var vu;vu=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Lo(e){var n=Uo;return Uo+=1,wa===null&&(wa=[]),e=yg(wa,e,n),n=Mt,(be===null?n.memoizedState:be.next)===null&&(n=n.alternate,S.H=n===null||n.memoizedState===null?Vs:Mr),e}function _u(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Lo(e);if(e.$$typeof===V)return hn(e)}throw Error(a(438,String(e)))}function Uf(e){var n=null,s=Mt.updateQueue;if(s!==null&&(n=s.memoCache),n==null){var o=Mt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(f){return f.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),s===null&&(s=vu(),Mt.updateQueue=s),s.memoCache=n,s=n.data[n.index],s===void 0)for(s=n.data[n.index]=Array(e),o=0;o<e;o++)s[o]=ft;return n.index++,s}function Ji(e,n){return typeof n=="function"?n(e):n}function Eu(e){var n=Se();return Lf(n,Zt,e)}function Lf(e,n,s){var o=e.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=s;var f=e.baseQueue,d=o.pending;if(d!==null){if(f!==null){var _=f.next;f.next=d.next,d.next=_}n.baseQueue=f=d,o.pending=null}if(d=e.baseState,f===null)e.memoizedState=d;else{n=f.next;var T=_=null,C=null,L=n,Y=!1;do{var tt=L.lane&-536870913;if(tt!==L.lane?(jt&tt)===tt:(Or&tt)===tt){var j=L.revertLane;if(j===0)C!==null&&(C=C.next={lane:0,revertLane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),tt===ba&&(Y=!0);else if((Or&j)===j){L=L.next,j===ba&&(Y=!0);continue}else tt={lane:0,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},C===null?(T=C=tt,_=d):C=C.next=tt,Mt.lanes|=j,qr|=j;tt=L.action,xs&&s(d,tt),d=L.hasEagerState?L.eagerState:s(d,tt)}else j={lane:tt,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},C===null?(T=C=j,_=d):C=C.next=j,Mt.lanes|=tt,qr|=tt;L=L.next}while(L!==null&&L!==n);if(C===null?_=d:C.next=T,!Mn(d,e.memoizedState)&&(Ge=!0,Y&&(s=Sa,s!==null)))throw s;e.memoizedState=d,e.baseState=_,e.baseQueue=C,o.lastRenderedState=d}return f===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function zf(e){var n=Se(),s=n.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=e;var o=s.dispatch,f=s.pending,d=n.memoizedState;if(f!==null){s.pending=null;var _=f=f.next;do d=e(d,_.action),_=_.next;while(_!==f);Mn(d,n.memoizedState)||(Ge=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),s.lastRenderedState=d}return[d,o]}function Ig(e,n,s){var o=Mt,f=Se(),d=Qt;if(d){if(s===void 0)throw Error(a(407));s=s()}else s=n();var _=!Mn((Zt||f).memoizedState,s);if(_&&(f.memoizedState=s,Ge=!0),f=f.queue,Bf(Og.bind(null,o,f,e),[e]),f.getSnapshot!==n||_||be!==null&&be.memoizedState.tag&1){if(o.flags|=2048,Ra(9,Vg.bind(null,o,f,s,n),{destroy:void 0},null),ee===null)throw Error(a(349));d||(Or&60)!==0||xg(o,n,s)}return s}function xg(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=Mt.updateQueue,n===null?(n=vu(),Mt.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function Vg(e,n,s,o){n.value=s,n.getSnapshot=o,Mg(n)&&Ng(e)}function Og(e,n,s){return s(function(){Mg(n)&&Ng(e)})}function Mg(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!Mn(e,s)}catch{return!0}}function Ng(e){var n=Ir(e,2);n!==null&&Tn(n,e,2)}function Pf(e){var n=Sn();if(typeof e=="function"){var s=e;if(e=s(),xs){Dn(!0);try{s()}finally{Dn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:e},n}function Ug(e,n,s,o){return e.baseState=s,Lf(e,Zt,typeof o=="function"?o:Ji)}function BT(e,n,s,o,f){if(Su(e))throw Error(a(485));if(e=n.action,e!==null){var d={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};S.T!==null?s(!0):d.isTransition=!1,o(d),s=n.pending,s===null?(d.next=n.pending=d,Lg(n,d)):(d.next=s.next,n.pending=s.next=d)}}function Lg(e,n){var s=n.action,o=n.payload,f=e.state;if(n.isTransition){var d=S.T,_={};S.T=_;try{var T=s(f,o),C=S.S;C!==null&&C(_,T),zg(e,n,T)}catch(L){kf(e,n,L)}finally{S.T=d}}else try{d=s(f,o),zg(e,n,d)}catch(L){kf(e,n,L)}}function zg(e,n,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(o){Pg(e,n,o)},function(o){return kf(e,n,o)}):Pg(e,n,s)}function Pg(e,n,s){n.status="fulfilled",n.value=s,kg(n),e.state=s,n=e.pending,n!==null&&(s=n.next,s===n?e.pending=null:(s=s.next,n.next=s,Lg(e,s)))}function kf(e,n,s){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=s,kg(n),n=n.next;while(n!==o)}e.action=null}function kg(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Bg(e,n){return n}function jg(e,n){if(Qt){var s=ee.formState;if(s!==null){t:{var o=Mt;if(Qt){if(en){e:{for(var f=en,d=Di;f.nodeType!==8;){if(!d){f=null;break e}if(f=ci(f.nextSibling),f===null){f=null;break e}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){en=ci(f.nextSibling),o=f.data==="F!";break t}}Cs(o)}o=!1}o&&(n=s[0])}}return s=Sn(),s.memoizedState=s.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bg,lastRenderedState:n},s.queue=o,s=sp.bind(null,Mt,o),o.dispatch=s,o=Pf(!1),d=Gf.bind(null,Mt,!1,o.queue),o=Sn(),f={state:n,dispatch:null,action:e,pending:null},o.queue=f,s=BT.bind(null,Mt,f,d,s),f.dispatch=s,o.memoizedState=e,[n,s,!1]}function qg(e){var n=Se();return Hg(n,Zt,e)}function Hg(e,n,s){n=Lf(e,n,Bg)[0],e=Eu(Ji)[0],n=typeof n=="object"&&n!==null&&typeof n.then=="function"?Lo(n):n;var o=Se(),f=o.queue,d=f.dispatch;return s!==o.memoizedState&&(Mt.flags|=2048,Ra(9,jT.bind(null,f,s),{destroy:void 0},null)),[n,d,e]}function jT(e,n){e.action=n}function Fg(e){var n=Se(),s=Zt;if(s!==null)return Hg(n,s,e);Se(),n=n.memoizedState,s=Se();var o=s.queue.dispatch;return s.memoizedState=e,[n,o,!1]}function Ra(e,n,s,o){return e={tag:e,create:n,inst:s,deps:o,next:null},n=Mt.updateQueue,n===null&&(n=vu(),Mt.updateQueue=n),s=n.lastEffect,s===null?n.lastEffect=e.next=e:(o=s.next,s.next=e,e.next=o,n.lastEffect=e),e}function Gg(){return Se().memoizedState}function Tu(e,n,s,o){var f=Sn();Mt.flags|=e,f.memoizedState=Ra(1|n,s,{destroy:void 0},o===void 0?null:o)}function bu(e,n,s,o){var f=Se();o=o===void 0?null:o;var d=f.memoizedState.inst;Zt!==null&&o!==null&&xf(o,Zt.memoizedState.deps)?f.memoizedState=Ra(n,s,d,o):(Mt.flags|=e,f.memoizedState=Ra(1|n,s,d,o))}function Qg(e,n){Tu(8390656,8,e,n)}function Bf(e,n){bu(2048,8,e,n)}function Yg(e,n){return bu(4,2,e,n)}function Kg(e,n){return bu(4,4,e,n)}function Xg(e,n){if(typeof n=="function"){e=e();var s=n(e);return function(){typeof s=="function"?s():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function $g(e,n,s){s=s!=null?s.concat([e]):null,bu(4,4,Xg.bind(null,n,e),s)}function jf(){}function Zg(e,n){var s=Se();n=n===void 0?null:n;var o=s.memoizedState;return n!==null&&xf(n,o[1])?o[0]:(s.memoizedState=[e,n],e)}function Wg(e,n){var s=Se();n=n===void 0?null:n;var o=s.memoizedState;if(n!==null&&xf(n,o[1]))return o[0];if(o=e(),xs){Dn(!0);try{e()}finally{Dn(!1)}}return s.memoizedState=[o,n],o}function qf(e,n,s){return s===void 0||(Or&1073741824)!==0?e.memoizedState=n:(e.memoizedState=s,e=ty(),Mt.lanes|=e,qr|=e,s)}function Jg(e,n,s,o){return Mn(s,n)?s:Ta.current!==null?(e=qf(e,s,o),Mn(e,n)||(Ge=!0),e):(Or&42)===0?(Ge=!0,e.memoizedState=s):(e=ty(),Mt.lanes|=e,qr|=e,n)}function tp(e,n,s,o,f){var d=at.p;at.p=d!==0&&8>d?d:8;var _=S.T,T={};S.T=T,Gf(e,!1,n,s);try{var C=f(),L=S.S;if(L!==null&&L(T,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var Y=zT(C,o);zo(e,n,Y,zn(e))}else zo(e,n,o,zn(e))}catch(tt){zo(e,n,{then:function(){},status:"rejected",reason:tt},zn())}finally{at.p=d,S.T=_}}function qT(){}function Hf(e,n,s,o){if(e.tag!==5)throw Error(a(476));var f=ep(e).queue;tp(e,f,n,At,s===null?qT:function(){return np(e),s(o)})}function ep(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:At,baseState:At,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:At},next:null};var s={};return n.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:s},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function np(e){var n=ep(e).next.queue;zo(e,n,{},zn())}function Ff(){return hn(il)}function ip(){return Se().memoizedState}function rp(){return Se().memoizedState}function HT(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var s=zn();e=Lr(s);var o=zr(n,e,s);o!==null&&(Tn(o,n,s),Bo(o,n,s)),n={cache:Cf()},e.payload=n;return}n=n.return}}function FT(e,n,s){var o=zn();s={lane:o,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},Su(e)?ap(n,s):(s=Ef(e,n,s,o),s!==null&&(Tn(s,e,o),op(s,n,o)))}function sp(e,n,s){var o=zn();zo(e,n,s,o)}function zo(e,n,s,o){var f={lane:o,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(Su(e))ap(n,f);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var _=n.lastRenderedState,T=d(_,s);if(f.hasEagerState=!0,f.eagerState=T,Mn(T,_))return au(e,n,f,0),ee===null&&su(),!1}catch{}finally{}if(s=Ef(e,n,f,o),s!==null)return Tn(s,e,o),op(s,n,o),!0}return!1}function Gf(e,n,s,o){if(o={lane:2,revertLane:Nh(),action:o,hasEagerState:!1,eagerState:null,next:null},Su(e)){if(n)throw Error(a(479))}else n=Ef(e,s,o,2),n!==null&&Tn(n,e,2)}function Su(e){var n=e.alternate;return e===Mt||n!==null&&n===Mt}function ap(e,n){Aa=pu=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function op(e,n,s){if((s&4194176)!==0){var o=n.lanes;o&=e.pendingLanes,s|=o,n.lanes=s,qe(e,s)}}var xi={readContext:hn,use:_u,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useLayoutEffect:_e,useInsertionEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useSyncExternalStore:_e,useId:_e};xi.useCacheRefresh=_e,xi.useMemoCache=_e,xi.useHostTransitionStatus=_e,xi.useFormState=_e,xi.useActionState=_e,xi.useOptimistic=_e;var Vs={readContext:hn,use:_u,useCallback:function(e,n){return Sn().memoizedState=[e,n===void 0?null:n],e},useContext:hn,useEffect:Qg,useImperativeHandle:function(e,n,s){s=s!=null?s.concat([e]):null,Tu(4194308,4,Xg.bind(null,n,e),s)},useLayoutEffect:function(e,n){return Tu(4194308,4,e,n)},useInsertionEffect:function(e,n){Tu(4,2,e,n)},useMemo:function(e,n){var s=Sn();n=n===void 0?null:n;var o=e();if(xs){Dn(!0);try{e()}finally{Dn(!1)}}return s.memoizedState=[o,n],o},useReducer:function(e,n,s){var o=Sn();if(s!==void 0){var f=s(n);if(xs){Dn(!0);try{s(n)}finally{Dn(!1)}}}else f=n;return o.memoizedState=o.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},o.queue=e,e=e.dispatch=FT.bind(null,Mt,e),[o.memoizedState,e]},useRef:function(e){var n=Sn();return e={current:e},n.memoizedState=e},useState:function(e){e=Pf(e);var n=e.queue,s=sp.bind(null,Mt,n);return n.dispatch=s,[e.memoizedState,s]},useDebugValue:jf,useDeferredValue:function(e,n){var s=Sn();return qf(s,e,n)},useTransition:function(){var e=Pf(!1);return e=tp.bind(null,Mt,e.queue,!0,!1),Sn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,s){var o=Mt,f=Sn();if(Qt){if(s===void 0)throw Error(a(407));s=s()}else{if(s=n(),ee===null)throw Error(a(349));(jt&60)!==0||xg(o,n,s)}f.memoizedState=s;var d={value:s,getSnapshot:n};return f.queue=d,Qg(Og.bind(null,o,d,e),[e]),o.flags|=2048,Ra(9,Vg.bind(null,o,d,s,n),{destroy:void 0},null),s},useId:function(){var e=Sn(),n=ee.identifierPrefix;if(Qt){var s=Zi,o=$i;s=(o&~(1<<32-Ze(o)-1)).toString(32)+s,n=":"+n+"R"+s,s=yu++,0<s&&(n+="H"+s.toString(32)),n+=":"}else s=PT++,n=":"+n+"r"+s.toString(32)+":";return e.memoizedState=n},useCacheRefresh:function(){return Sn().memoizedState=HT.bind(null,Mt)}};Vs.useMemoCache=Uf,Vs.useHostTransitionStatus=Ff,Vs.useFormState=jg,Vs.useActionState=jg,Vs.useOptimistic=function(e){var n=Sn();n.memoizedState=n.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=s,n=Gf.bind(null,Mt,!0,s),s.dispatch=n,[e,n]};var Mr={readContext:hn,use:_u,useCallback:Zg,useContext:hn,useEffect:Bf,useImperativeHandle:$g,useInsertionEffect:Yg,useLayoutEffect:Kg,useMemo:Wg,useReducer:Eu,useRef:Gg,useState:function(){return Eu(Ji)},useDebugValue:jf,useDeferredValue:function(e,n){var s=Se();return Jg(s,Zt.memoizedState,e,n)},useTransition:function(){var e=Eu(Ji)[0],n=Se().memoizedState;return[typeof e=="boolean"?e:Lo(e),n]},useSyncExternalStore:Ig,useId:ip};Mr.useCacheRefresh=rp,Mr.useMemoCache=Uf,Mr.useHostTransitionStatus=Ff,Mr.useFormState=qg,Mr.useActionState=qg,Mr.useOptimistic=function(e,n){var s=Se();return Ug(s,Zt,e,n)};var Os={readContext:hn,use:_u,useCallback:Zg,useContext:hn,useEffect:Bf,useImperativeHandle:$g,useInsertionEffect:Yg,useLayoutEffect:Kg,useMemo:Wg,useReducer:zf,useRef:Gg,useState:function(){return zf(Ji)},useDebugValue:jf,useDeferredValue:function(e,n){var s=Se();return Zt===null?qf(s,e,n):Jg(s,Zt.memoizedState,e,n)},useTransition:function(){var e=zf(Ji)[0],n=Se().memoizedState;return[typeof e=="boolean"?e:Lo(e),n]},useSyncExternalStore:Ig,useId:ip};Os.useCacheRefresh=rp,Os.useMemoCache=Uf,Os.useHostTransitionStatus=Ff,Os.useFormState=Fg,Os.useActionState=Fg,Os.useOptimistic=function(e,n){var s=Se();return Zt!==null?Ug(s,Zt,e,n):(s.baseState=e,[e,s.queue.dispatch])};function Qf(e,n,s,o){n=e.memoizedState,s=s(o,n),s=s==null?n:D({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Yf={isMounted:function(e){return(e=e._reactInternals)?mt(e)===e:!1},enqueueSetState:function(e,n,s){e=e._reactInternals;var o=zn(),f=Lr(o);f.payload=n,s!=null&&(f.callback=s),n=zr(e,f,o),n!==null&&(Tn(n,e,o),Bo(n,e,o))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var o=zn(),f=Lr(o);f.tag=1,f.payload=n,s!=null&&(f.callback=s),n=zr(e,f,o),n!==null&&(Tn(n,e,o),Bo(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=zn(),o=Lr(s);o.tag=2,n!=null&&(o.callback=n),n=zr(e,o,s),n!==null&&(Tn(n,e,s),Bo(n,e,s))}};function lp(e,n,s,o,f,d,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,d,_):n.prototype&&n.prototype.isPureReactComponent?!Ao(s,o)||!Ao(f,d):!0}function up(e,n,s,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,o),n.state!==e&&Yf.enqueueReplaceState(n,n.state,null)}function Ms(e,n){var s=n;if("ref"in n){s={};for(var o in n)o!=="ref"&&(s[o]=n[o])}if(e=e.defaultProps){s===n&&(s=D({},s));for(var f in e)s[f]===void 0&&(s[f]=e[f])}return s}var Au=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function cp(e){Au(e)}function fp(e){console.error(e)}function hp(e){Au(e)}function wu(e,n){try{var s=e.onUncaughtError;s(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function dp(e,n,s){try{var o=e.onCaughtError;o(s.value,{componentStack:s.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Kf(e,n,s){return s=Lr(s),s.tag=3,s.payload={element:null},s.callback=function(){wu(e,n)},s}function mp(e){return e=Lr(e),e.tag=3,e}function gp(e,n,s,o){var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var d=o.value;e.payload=function(){return f(d)},e.callback=function(){dp(n,s,o)}}var _=s.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(e.callback=function(){dp(n,s,o),typeof f!="function"&&(Hr===null?Hr=new Set([this]):Hr.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})})}function GT(e,n,s,o,f){if(s.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=s.alternate,n!==null&&ko(n,s,f,!0),s=$n.current,s!==null){switch(s.tag){case 13:return Ii===null?Ih():s.alternate===null&&ge===0&&(ge=3),s.flags&=-257,s.flags|=65536,s.lanes=f,o===Af?s.flags|=16384:(n=s.updateQueue,n===null?s.updateQueue=new Set([o]):n.add(o),Vh(e,o,f)),!1;case 22:return s.flags|=65536,o===Af?s.flags|=16384:(n=s.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},s.updateQueue=n):(s=n.retryQueue,s===null?n.retryQueue=new Set([o]):s.add(o)),Vh(e,o,f)),!1}throw Error(a(435,s.tag))}return Vh(e,o,f),Ih(),!1}if(Qt)return n=$n.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=f,o!==Sf&&(e=Error(a(422),{cause:o}),Do(Yn(e,s)))):(o!==Sf&&(n=Error(a(423),{cause:o}),Do(Yn(n,s))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,o=Yn(o,s),f=Kf(e.stateNode,o,f),uh(e,f),ge!==4&&(ge=2)),!1;var d=Error(a(520),{cause:o});if(d=Yn(d,s),Ko===null?Ko=[d]:Ko.push(d),ge!==4&&(ge=2),n===null)return!0;o=Yn(o,s),s=n;do{switch(s.tag){case 3:return s.flags|=65536,e=f&-f,s.lanes|=e,e=Kf(s.stateNode,o,e),uh(s,e),!1;case 1:if(n=s.type,d=s.stateNode,(s.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Hr===null||!Hr.has(d))))return s.flags|=65536,f&=-f,s.lanes|=f,f=mp(f),gp(f,e,s,o),uh(s,f),!1}s=s.return}while(s!==null);return!1}var pp=Error(a(461)),Ge=!1;function nn(e,n,s,o){n.child=e===null?Tg(n,null,s,o):Ds(n,e.child,s,o)}function yp(e,n,s,o,f){s=s.render;var d=n.ref;if("ref"in o){var _={};for(var T in o)T!=="ref"&&(_[T]=o[T])}else _=o;return Us(n),o=Vf(e,n,s,_,d,f),T=Of(),e!==null&&!Ge?(Mf(e,n,f),tr(e,n,f)):(Qt&&T&&Tf(n),n.flags|=1,nn(e,n,o,f),n.child)}function vp(e,n,s,o,f){if(e===null){var d=s.type;return typeof d=="function"&&!yh(d)&&d.defaultProps===void 0&&s.compare===null?(n.tag=15,n.type=d,_p(e,n,d,o,f)):(e=xu(s.type,null,o,n,n.mode,f),e.ref=n.ref,e.return=n,n.child=e)}if(d=e.child,!ih(e,f)){var _=d.memoizedProps;if(s=s.compare,s=s!==null?s:Ao,s(_,o)&&e.ref===n.ref)return tr(e,n,f)}return n.flags|=1,e=jr(d,o),e.ref=n.ref,e.return=n,n.child=e}function _p(e,n,s,o,f){if(e!==null){var d=e.memoizedProps;if(Ao(d,o)&&e.ref===n.ref)if(Ge=!1,n.pendingProps=o=d,ih(e,f))(e.flags&131072)!==0&&(Ge=!0);else return n.lanes=e.lanes,tr(e,n,f)}return Xf(e,n,s,o,f)}function Ep(e,n,s){var o=n.pendingProps,f=o.children,d=(n.stateNode._pendingVisibility&2)!==0,_=e!==null?e.memoizedState:null;if(Po(e,n),o.mode==="hidden"||d){if((n.flags&128)!==0){if(o=_!==null?_.baseLanes|s:s,e!==null){for(f=n.child=e.child,d=0;f!==null;)d=d|f.lanes|f.childLanes,f=f.sibling;n.childLanes=d&~o}else n.childLanes=0,n.child=null;return Tp(e,n,o,s)}if((s&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&gu(n,_!==null?_.cachePool:null),_!==null?bg(n,_):wf(),Sg(n);else return n.lanes=n.childLanes=536870912,Tp(e,n,_!==null?_.baseLanes|s:s,s)}else _!==null?(gu(n,_.cachePool),bg(n,_),Vr(),n.memoizedState=null):(e!==null&&gu(n,null),wf(),Vr());return nn(e,n,f,s),n.child}function Tp(e,n,s,o){var f=If();return f=f===null?null:{parent:Le._currentValue,pool:f},n.memoizedState={baseLanes:s,cachePool:f},e!==null&&gu(n,null),wf(),Sg(n),e!==null&&ko(e,n,o,!0),null}function Po(e,n){var s=n.ref;if(s===null)e!==null&&e.ref!==null&&(n.flags|=2097664);else{if(typeof s!="function"&&typeof s!="object")throw Error(a(284));(e===null||e.ref!==s)&&(n.flags|=2097664)}}function Xf(e,n,s,o,f){return Us(n),s=Vf(e,n,s,o,void 0,f),o=Of(),e!==null&&!Ge?(Mf(e,n,f),tr(e,n,f)):(Qt&&o&&Tf(n),n.flags|=1,nn(e,n,s,f),n.child)}function bp(e,n,s,o,f,d){return Us(n),n.updateQueue=null,s=Dg(n,o,s,f),Cg(e),o=Of(),e!==null&&!Ge?(Mf(e,n,d),tr(e,n,d)):(Qt&&o&&Tf(n),n.flags|=1,nn(e,n,s,d),n.child)}function Sp(e,n,s,o,f){if(Us(n),n.stateNode===null){var d=ya,_=s.contextType;typeof _=="object"&&_!==null&&(d=hn(_)),d=new s(o,d),n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Yf,n.stateNode=d,d._reactInternals=n,d=n.stateNode,d.props=o,d.state=n.memoizedState,d.refs={},oh(n),_=s.contextType,d.context=typeof _=="object"&&_!==null?hn(_):ya,d.state=n.memoizedState,_=s.getDerivedStateFromProps,typeof _=="function"&&(Qf(n,s,_,o),d.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&Yf.enqueueReplaceState(d,d.state,null),qo(n,o,d,f),jo(),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){d=n.stateNode;var T=n.memoizedProps,C=Ms(s,T);d.props=C;var L=d.context,Y=s.contextType;_=ya,typeof Y=="object"&&Y!==null&&(_=hn(Y));var tt=s.getDerivedStateFromProps;Y=typeof tt=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=n.pendingProps!==T,Y||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||L!==_)&&up(n,d,o,_),Ur=!1;var j=n.memoizedState;d.state=j,qo(n,o,d,f),jo(),L=n.memoizedState,T||j!==L||Ur?(typeof tt=="function"&&(Qf(n,s,tt,o),L=n.memoizedState),(C=Ur||lp(n,s,C,o,j,L,_))?(Y||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(n.flags|=4194308)):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=L),d.props=o,d.state=L,d.context=_,o=C):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{d=n.stateNode,lh(e,n),_=n.memoizedProps,Y=Ms(s,_),d.props=Y,tt=n.pendingProps,j=d.context,L=s.contextType,C=ya,typeof L=="object"&&L!==null&&(C=hn(L)),T=s.getDerivedStateFromProps,(L=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==tt||j!==C)&&up(n,d,o,C),Ur=!1,j=n.memoizedState,d.state=j,qo(n,o,d,f),jo();var Q=n.memoizedState;_!==tt||j!==Q||Ur||e!==null&&e.dependencies!==null&&Ru(e.dependencies)?(typeof T=="function"&&(Qf(n,s,T,o),Q=n.memoizedState),(Y=Ur||lp(n,s,Y,o,j,Q,C)||e!==null&&e.dependencies!==null&&Ru(e.dependencies))?(L||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,Q,C),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,Q,C)),typeof d.componentDidUpdate=="function"&&(n.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===e.memoizedProps&&j===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&j===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=Q),d.props=o,d.state=Q,d.context=C,o=Y):(typeof d.componentDidUpdate!="function"||_===e.memoizedProps&&j===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&j===e.memoizedState||(n.flags|=1024),o=!1)}return d=o,Po(e,n),o=(n.flags&128)!==0,d||o?(d=n.stateNode,s=o&&typeof s.getDerivedStateFromError!="function"?null:d.render(),n.flags|=1,e!==null&&o?(n.child=Ds(n,e.child,null,f),n.child=Ds(n,null,s,f)):nn(e,n,s,f),n.memoizedState=d.state,e=n.child):e=tr(e,n,f),e}function Ap(e,n,s,o){return Co(),n.flags|=256,nn(e,n,s,o),n.child}var $f={dehydrated:null,treeContext:null,retryLane:0};function Zf(e){return{baseLanes:e,cachePool:Rg()}}function Wf(e,n,s){return e=e!==null?e.childLanes&~s:0,n&&(e|=ti),e}function wp(e,n,s){var o=n.pendingProps,f=!1,d=(n.flags&128)!==0,_;if((_=d)||(_=e!==null&&e.memoizedState===null?!1:(Ue.current&2)!==0),_&&(f=!0,n.flags&=-129),_=(n.flags&32)!==0,n.flags&=-33,e===null){if(Qt){if(f?xr(n):Vr(),Qt){var T=en,C;if(C=T){t:{for(C=T,T=Di;C.nodeType!==8;){if(!T){T=null;break t}if(C=ci(C.nextSibling),C===null){T=null;break t}}T=C}T!==null?(n.memoizedState={dehydrated:T,treeContext:ws!==null?{id:$i,overflow:Zi}:null,retryLane:536870912},C=Jn(18,null,null,0),C.stateNode=T,C.return=n,n.child=C,En=n,en=null,C=!0):C=!1}C||Cs(n)}if(T=n.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return T.data==="$!"?n.lanes=16:n.lanes=536870912,null;Wi(n)}return T=o.children,o=o.fallback,f?(Vr(),f=n.mode,T=th({mode:"hidden",children:T},f),o=zs(o,f,s,null),T.return=n,o.return=n,T.sibling=o,n.child=T,f=n.child,f.memoizedState=Zf(s),f.childLanes=Wf(e,_,s),n.memoizedState=$f,o):(xr(n),Jf(n,T))}if(C=e.memoizedState,C!==null&&(T=C.dehydrated,T!==null)){if(d)n.flags&256?(xr(n),n.flags&=-257,n=eh(e,n,s)):n.memoizedState!==null?(Vr(),n.child=e.child,n.flags|=128,n=null):(Vr(),f=o.fallback,T=n.mode,o=th({mode:"visible",children:o.children},T),f=zs(f,T,s,null),f.flags|=2,o.return=n,f.return=n,o.sibling=f,n.child=o,Ds(n,e.child,null,s),o=n.child,o.memoizedState=Zf(s),o.childLanes=Wf(e,_,s),n.memoizedState=$f,n=f);else if(xr(n),T.data==="$!"){if(_=T.nextSibling&&T.nextSibling.dataset,_)var L=_.dgst;_=L,o=Error(a(419)),o.stack="",o.digest=_,Do({value:o,source:null,stack:null}),n=eh(e,n,s)}else if(Ge||ko(e,n,s,!1),_=(s&e.childLanes)!==0,Ge||_){if(_=ee,_!==null){if(o=s&-s,(o&42)!==0)o=1;else switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=64;break;case 268435456:o=134217728;break;default:o=0}if(o=(o&(_.suspendedLanes|s))!==0?0:o,o!==0&&o!==C.retryLane)throw C.retryLane=o,Ir(e,o),Tn(_,e,o),pp}T.data==="$?"||Ih(),n=eh(e,n,s)}else T.data==="$?"?(n.flags|=128,n.child=e.child,n=ab.bind(null,e),T._reactRetry=n,n=null):(e=C.treeContext,en=ci(T.nextSibling),En=n,Qt=!0,li=null,Di=!1,e!==null&&(Kn[Xn++]=$i,Kn[Xn++]=Zi,Kn[Xn++]=ws,$i=e.id,Zi=e.overflow,ws=n),n=Jf(n,o.children),n.flags|=4096);return n}return f?(Vr(),f=o.fallback,T=n.mode,C=e.child,L=C.sibling,o=jr(C,{mode:"hidden",children:o.children}),o.subtreeFlags=C.subtreeFlags&31457280,L!==null?f=jr(L,f):(f=zs(f,T,s,null),f.flags|=2),f.return=n,o.return=n,o.sibling=f,n.child=o,o=f,f=n.child,T=e.child.memoizedState,T===null?T=Zf(s):(C=T.cachePool,C!==null?(L=Le._currentValue,C=C.parent!==L?{parent:L,pool:L}:C):C=Rg(),T={baseLanes:T.baseLanes|s,cachePool:C}),f.memoizedState=T,f.childLanes=Wf(e,_,s),n.memoizedState=$f,o):(xr(n),s=e.child,e=s.sibling,s=jr(s,{mode:"visible",children:o.children}),s.return=n,s.sibling=null,e!==null&&(_=n.deletions,_===null?(n.deletions=[e],n.flags|=16):_.push(e)),n.child=s,n.memoizedState=null,s)}function Jf(e,n){return n=th({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function th(e,n){return Zp(e,n,0,null)}function eh(e,n,s){return Ds(n,e.child,null,s),e=Jf(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Rp(e,n,s){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),sh(e.return,n,s)}function nh(e,n,s,o,f){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:s,tailMode:f}:(d.isBackwards=n,d.rendering=null,d.renderingStartTime=0,d.last=o,d.tail=s,d.tailMode=f)}function Cp(e,n,s){var o=n.pendingProps,f=o.revealOrder,d=o.tail;if(nn(e,n,o.children,s),o=Ue.current,(o&2)!==0)o=o&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Rp(e,s,n);else if(e.tag===19)Rp(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}switch(vt(Ue,o),f){case"forwards":for(s=n.child,f=null;s!==null;)e=s.alternate,e!==null&&mu(e)===null&&(f=s),s=s.sibling;s=f,s===null?(f=n.child,n.child=null):(f=s.sibling,s.sibling=null),nh(n,!1,f,s,d);break;case"backwards":for(s=null,f=n.child,n.child=null;f!==null;){if(e=f.alternate,e!==null&&mu(e)===null){n.child=f;break}e=f.sibling,f.sibling=s,s=f,f=e}nh(n,!0,s,null,d);break;case"together":nh(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function tr(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),qr|=n.lanes,(s&n.childLanes)===0)if(e!==null){if(ko(e,n,s,!1),(s&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(a(153));if(n.child!==null){for(e=n.child,s=jr(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=jr(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function ih(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Ru(e)))}function QT(e,n,s){switch(n.tag){case 3:yn(n,n.stateNode.containerInfo),Nr(n,Le,e.memoizedState.cache),Co();break;case 27:case 5:pr(n);break;case 4:yn(n,n.stateNode.containerInfo);break;case 10:Nr(n,n.type,n.memoizedProps.value);break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(xr(n),n.flags|=128,null):(s&n.child.childLanes)!==0?wp(e,n,s):(xr(n),e=tr(e,n,s),e!==null?e.sibling:null);xr(n);break;case 19:var f=(e.flags&128)!==0;if(o=(s&n.childLanes)!==0,o||(ko(e,n,s,!1),o=(s&n.childLanes)!==0),f){if(o)return Cp(e,n,s);n.flags|=128}if(f=n.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),vt(Ue,Ue.current),o)break;return null;case 22:case 23:return n.lanes=0,Ep(e,n,s);case 24:Nr(n,Le,e.memoizedState.cache)}return tr(e,n,s)}function Dp(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps)Ge=!0;else{if(!ih(e,s)&&(n.flags&128)===0)return Ge=!1,QT(e,n,s);Ge=(e.flags&131072)!==0}else Ge=!1,Qt&&(n.flags&1048576)!==0&&hg(n,uu,n.index);switch(n.lanes=0,n.tag){case 16:t:{e=n.pendingProps;var o=n.elementType,f=o._init;if(o=f(o._payload),n.type=o,typeof o=="function")yh(o)?(e=Ms(o,e),n.tag=1,n=Sp(null,n,o,e,s)):(n.tag=0,n=Xf(null,n,o,e,s));else{if(o!=null){if(f=o.$$typeof,f===H){n.tag=11,n=yp(null,n,o,e,s);break t}else if(f===et){n.tag=14,n=vp(null,n,o,e,s);break t}}throw n=w(o)||o,Error(a(306,n,""))}}return n;case 0:return Xf(e,n,n.type,n.pendingProps,s);case 1:return o=n.type,f=Ms(o,n.pendingProps),Sp(e,n,o,f,s);case 3:t:{if(yn(n,n.stateNode.containerInfo),e===null)throw Error(a(387));var d=n.pendingProps;f=n.memoizedState,o=f.element,lh(e,n),qo(n,d,null,s);var _=n.memoizedState;if(d=_.cache,Nr(n,Le,d),d!==f.cache&&ah(n,[Le],s,!0),jo(),d=_.element,f.isDehydrated)if(f={element:d,isDehydrated:!1,cache:_.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=Ap(e,n,d,s);break t}else if(d!==o){o=Yn(Error(a(424)),n),Do(o),n=Ap(e,n,d,s);break t}else for(en=ci(n.stateNode.containerInfo.firstChild),En=n,Qt=!0,li=null,Di=!0,s=Tg(n,null,d,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Co(),d===o){n=tr(e,n,s);break t}nn(e,n,d,s)}n=n.child}return n;case 26:return Po(e,n),e===null?(s=Vy(n.type,null,n.pendingProps,null))?n.memoizedState=s:Qt||(s=n.type,e=n.pendingProps,o=qu(Ce.current).createElement(s),o[he]=n,o[Oe]=e,rn(o,s,e),le(o),n.stateNode=o):n.memoizedState=Vy(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return pr(n),e===null&&Qt&&(o=n.stateNode=Dy(n.type,n.pendingProps,Ce.current),En=n,Di=!0,en=ci(o.firstChild)),o=n.pendingProps.children,e!==null||Qt?nn(e,n,o,s):n.child=Ds(n,null,o,s),Po(e,n),n.child;case 5:return e===null&&Qt&&((f=o=en)&&(o=bb(o,n.type,n.pendingProps,Di),o!==null?(n.stateNode=o,En=n,en=ci(o.firstChild),Di=!1,f=!0):f=!1),f||Cs(n)),pr(n),f=n.type,d=n.pendingProps,_=e!==null?e.memoizedProps:null,o=d.children,Hh(f,d)?o=null:_!==null&&Hh(f,_)&&(n.flags|=32),n.memoizedState!==null&&(f=Vf(e,n,kT,null,null,s),il._currentValue=f),Po(e,n),nn(e,n,o,s),n.child;case 6:return e===null&&Qt&&((e=s=en)&&(s=Sb(s,n.pendingProps,Di),s!==null?(n.stateNode=s,En=n,en=null,e=!0):e=!1),e||Cs(n)),null;case 13:return wp(e,n,s);case 4:return yn(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=Ds(n,null,o,s):nn(e,n,o,s),n.child;case 11:return yp(e,n,n.type,n.pendingProps,s);case 7:return nn(e,n,n.pendingProps,s),n.child;case 8:return nn(e,n,n.pendingProps.children,s),n.child;case 12:return nn(e,n,n.pendingProps.children,s),n.child;case 10:return o=n.pendingProps,Nr(n,n.type,o.value),nn(e,n,o.children,s),n.child;case 9:return f=n.type._context,o=n.pendingProps.children,Us(n),f=hn(f),o=o(f),n.flags|=1,nn(e,n,o,s),n.child;case 14:return vp(e,n,n.type,n.pendingProps,s);case 15:return _p(e,n,n.type,n.pendingProps,s);case 19:return Cp(e,n,s);case 22:return Ep(e,n,s);case 24:return Us(n),o=hn(Le),e===null?(f=If(),f===null&&(f=ee,d=Cf(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=s),f=d),n.memoizedState={parent:o,cache:f},oh(n),Nr(n,Le,f)):((e.lanes&s)!==0&&(lh(e,n),qo(n,null,null,s),jo()),f=e.memoizedState,d=n.memoizedState,f.parent!==o?(f={parent:o,cache:o},n.memoizedState=f,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=f),Nr(n,Le,o)):(o=d.cache,Nr(n,Le,o),o!==f.cache&&ah(n,[Le],s,!0))),nn(e,n,n.pendingProps.children,s),n.child;case 29:throw n.pendingProps}throw Error(a(156,n.tag))}var rh=xt(null),Ns=null,er=null;function Nr(e,n,s){vt(rh,n._currentValue),n._currentValue=s}function nr(e){e._currentValue=rh.current,Ft(rh)}function sh(e,n,s){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===s)break;e=e.return}}function ah(e,n,s,o){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var d=f.dependencies;if(d!==null){var _=f.child;d=d.firstContext;t:for(;d!==null;){var T=d;d=f;for(var C=0;C<n.length;C++)if(T.context===n[C]){d.lanes|=s,T=d.alternate,T!==null&&(T.lanes|=s),sh(d.return,s,e),o||(_=null);break t}d=T.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(a(341));_.lanes|=s,d=_.alternate,d!==null&&(d.lanes|=s),sh(_,s,e),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===e){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function ko(e,n,s,o){e=null;for(var f=n,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(a(387));if(_=_.memoizedProps,_!==null){var T=f.type;Mn(f.pendingProps.value,_.value)||(e!==null?e.push(T):e=[T])}}else if(f===Be.current){if(_=f.alternate,_===null)throw Error(a(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(il):e=[il])}f=f.return}e!==null&&ah(n,e,s,o),n.flags|=262144}function Ru(e){for(e=e.firstContext;e!==null;){if(!Mn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Us(e){Ns=e,er=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function hn(e){return Ip(Ns,e)}function Cu(e,n){return Ns===null&&Us(e),Ip(e,n)}function Ip(e,n){var s=n._currentValue;if(n={context:n,memoizedValue:s,next:null},er===null){if(e===null)throw Error(a(308));er=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else er=er.next=n;return s}var Ur=!1;function oh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function lh(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Lr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function zr(e,n,s){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(ce&2)!==0){var f=o.pending;return f===null?n.next=n:(n.next=f.next,f.next=n),o.pending=n,n=ou(e),cg(e,null,s),n}return au(e,o,n,s),ou(e)}function Bo(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194176)!==0)){var o=n.lanes;o&=e.pendingLanes,s|=o,n.lanes=s,qe(e,s)}}function uh(e,n){var s=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,s===o)){var f=null,d=null;if(s=s.firstBaseUpdate,s!==null){do{var _={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};d===null?f=d=_:d=d.next=_,s=s.next}while(s!==null);d===null?f=d=n:d=d.next=n}else f=d=n;s={baseState:o.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}var ch=!1;function jo(){if(ch){var e=Sa;if(e!==null)throw e}}function qo(e,n,s,o){ch=!1;var f=e.updateQueue;Ur=!1;var d=f.firstBaseUpdate,_=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var C=T,L=C.next;C.next=null,_===null?d=L:_.next=L,_=C;var Y=e.alternate;Y!==null&&(Y=Y.updateQueue,T=Y.lastBaseUpdate,T!==_&&(T===null?Y.firstBaseUpdate=L:T.next=L,Y.lastBaseUpdate=C))}if(d!==null){var tt=f.baseState;_=0,Y=L=C=null,T=d;do{var j=T.lane&-536870913,Q=j!==T.lane;if(Q?(jt&j)===j:(o&j)===j){j!==0&&j===ba&&(ch=!0),Y!==null&&(Y=Y.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});t:{var yt=e,Ct=T;j=n;var pe=s;switch(Ct.tag){case 1:if(yt=Ct.payload,typeof yt=="function"){tt=yt.call(pe,tt,j);break t}tt=yt;break t;case 3:yt.flags=yt.flags&-65537|128;case 0:if(yt=Ct.payload,j=typeof yt=="function"?yt.call(pe,tt,j):yt,j==null)break t;tt=D({},tt,j);break t;case 2:Ur=!0}}j=T.callback,j!==null&&(e.flags|=64,Q&&(e.flags|=8192),Q=f.callbacks,Q===null?f.callbacks=[j]:Q.push(j))}else Q={lane:j,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Y===null?(L=Y=Q,C=tt):Y=Y.next=Q,_|=j;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;Q=T,T=Q.next,Q.next=null,f.lastBaseUpdate=Q,f.shared.pending=null}}while(!0);Y===null&&(C=tt),f.baseState=C,f.firstBaseUpdate=L,f.lastBaseUpdate=Y,d===null&&(f.shared.lanes=0),qr|=_,e.lanes=_,e.memoizedState=tt}}function xp(e,n){if(typeof e!="function")throw Error(a(191,e));e.call(n)}function Vp(e,n){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)xp(s[e],n)}function Ho(e,n){try{var s=n.updateQueue,o=s!==null?s.lastEffect:null;if(o!==null){var f=o.next;s=f;do{if((s.tag&e)===e){o=void 0;var d=s.create,_=s.inst;o=d(),_.destroy=o}s=s.next}while(s!==f)}}catch(T){Jt(n,n.return,T)}}function Pr(e,n,s){try{var o=n.updateQueue,f=o!==null?o.lastEffect:null;if(f!==null){var d=f.next;o=d;do{if((o.tag&e)===e){var _=o.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,f=n;var C=s;try{T()}catch(L){Jt(f,C,L)}}}o=o.next}while(o!==d)}}catch(L){Jt(n,n.return,L)}}function Op(e){var n=e.updateQueue;if(n!==null){var s=e.stateNode;try{Vp(n,s)}catch(o){Jt(e,e.return,o)}}}function Mp(e,n,s){s.props=Ms(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(o){Jt(e,n,o)}}function Ls(e,n){try{var s=e.ref;if(s!==null){var o=e.stateNode;switch(e.tag){case 26:case 27:case 5:var f=o;break;default:f=o}typeof s=="function"?e.refCleanup=s(f):s.current=f}}catch(d){Jt(e,n,d)}}function Nn(e,n){var s=e.ref,o=e.refCleanup;if(s!==null)if(typeof o=="function")try{o()}catch(f){Jt(e,n,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(f){Jt(e,n,f)}else s.current=null}function Np(e){var n=e.type,s=e.memoizedProps,o=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":s.autoFocus&&o.focus();break t;case"img":s.src?o.src=s.src:s.srcSet&&(o.srcset=s.srcSet)}}catch(f){Jt(e,e.return,f)}}function Up(e,n,s){try{var o=e.stateNode;yb(o,e.type,s,n),o[Oe]=n}catch(f){Jt(e,e.return,f)}}function Lp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27||e.tag===4}function fh(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Lp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==27&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function hh(e,n,s){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?s.nodeType===8?s.parentNode.insertBefore(e,n):s.insertBefore(e,n):(s.nodeType===8?(n=s.parentNode,n.insertBefore(e,s)):(n=s,n.appendChild(e)),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=ju));else if(o!==4&&o!==27&&(e=e.child,e!==null))for(hh(e,n,s),e=e.sibling;e!==null;)hh(e,n,s),e=e.sibling}function Du(e,n,s){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(o!==4&&o!==27&&(e=e.child,e!==null))for(Du(e,n,s),e=e.sibling;e!==null;)Du(e,n,s),e=e.sibling}var ir=!1,me=!1,dh=!1,zp=typeof WeakSet=="function"?WeakSet:Set,Qe=null,Pp=!1;function YT(e,n){if(e=e.containerInfo,jh=Ku,e=eg(e),gf(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else t:{s=(s=e.ownerDocument)&&s.defaultView||window;var o=s.getSelection&&s.getSelection();if(o&&o.rangeCount!==0){s=o.anchorNode;var f=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{s.nodeType,d.nodeType}catch{s=null;break t}var _=0,T=-1,C=-1,L=0,Y=0,tt=e,j=null;e:for(;;){for(var Q;tt!==s||f!==0&&tt.nodeType!==3||(T=_+f),tt!==d||o!==0&&tt.nodeType!==3||(C=_+o),tt.nodeType===3&&(_+=tt.nodeValue.length),(Q=tt.firstChild)!==null;)j=tt,tt=Q;for(;;){if(tt===e)break e;if(j===s&&++L===f&&(T=_),j===d&&++Y===o&&(C=_),(Q=tt.nextSibling)!==null)break;tt=j,j=tt.parentNode}tt=Q}s=T===-1||C===-1?null:{start:T,end:C}}else s=null}s=s||{start:0,end:0}}else s=null;for(qh={focusedElem:e,selectionRange:s},Ku=!1,Qe=n;Qe!==null;)if(n=Qe,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Qe=e;else for(;Qe!==null;){switch(n=Qe,d=n.alternate,e=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,s=n,f=d.memoizedProps,d=d.memoizedState,o=s.stateNode;try{var yt=Ms(s.type,f,s.elementType===s.type);e=o.getSnapshotBeforeUpdate(yt,d),o.__reactInternalSnapshotBeforeUpdate=e}catch(Ct){Jt(s,s.return,Ct)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,s=e.nodeType,s===9)Qh(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Qh(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(a(163))}if(e=n.sibling,e!==null){e.return=n.return,Qe=e;break}Qe=n.return}return yt=Pp,Pp=!1,yt}function kp(e,n,s){var o=s.flags;switch(s.tag){case 0:case 11:case 15:sr(e,s),o&4&&Ho(5,s);break;case 1:if(sr(e,s),o&4)if(e=s.stateNode,n===null)try{e.componentDidMount()}catch(T){Jt(s,s.return,T)}else{var f=Ms(s.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(f,n,e.__reactInternalSnapshotBeforeUpdate)}catch(T){Jt(s,s.return,T)}}o&64&&Op(s),o&512&&Ls(s,s.return);break;case 3:if(sr(e,s),o&64&&(o=s.updateQueue,o!==null)){if(e=null,s.child!==null)switch(s.child.tag){case 27:case 5:e=s.child.stateNode;break;case 1:e=s.child.stateNode}try{Vp(o,e)}catch(T){Jt(s,s.return,T)}}break;case 26:sr(e,s),o&512&&Ls(s,s.return);break;case 27:case 5:sr(e,s),n===null&&o&4&&Np(s),o&512&&Ls(s,s.return);break;case 12:sr(e,s);break;case 13:sr(e,s),o&4&&qp(e,s);break;case 22:if(f=s.memoizedState!==null||ir,!f){n=n!==null&&n.memoizedState!==null||me;var d=ir,_=me;ir=f,(me=n)&&!_?kr(e,s,(s.subtreeFlags&8772)!==0):sr(e,s),ir=d,me=_}o&512&&(s.memoizedProps.mode==="manual"?Ls(s,s.return):Nn(s,s.return));break;default:sr(e,s)}}function Bp(e){var n=e.alternate;n!==null&&(e.alternate=null,Bp(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&hs(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ae=null,Un=!1;function rr(e,n,s){for(s=s.child;s!==null;)jp(e,n,s),s=s.sibling}function jp(e,n,s){if(je&&typeof je.onCommitFiberUnmount=="function")try{je.onCommitFiberUnmount(yi,s)}catch{}switch(s.tag){case 26:me||Nn(s,n),rr(e,n,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:me||Nn(s,n);var o=Ae,f=Un;for(Ae=s.stateNode,rr(e,n,s),s=s.stateNode,n=s.attributes;n.length;)s.removeAttributeNode(n[0]);hs(s),Ae=o,Un=f;break;case 5:me||Nn(s,n);case 6:f=Ae;var d=Un;if(Ae=null,rr(e,n,s),Ae=f,Un=d,Ae!==null)if(Un)try{e=Ae,o=s.stateNode,e.nodeType===8?e.parentNode.removeChild(o):e.removeChild(o)}catch(_){Jt(s,n,_)}else try{Ae.removeChild(s.stateNode)}catch(_){Jt(s,n,_)}break;case 18:Ae!==null&&(Un?(n=Ae,s=s.stateNode,n.nodeType===8?Gh(n.parentNode,s):n.nodeType===1&&Gh(n,s),ol(n)):Gh(Ae,s.stateNode));break;case 4:o=Ae,f=Un,Ae=s.stateNode.containerInfo,Un=!0,rr(e,n,s),Ae=o,Un=f;break;case 0:case 11:case 14:case 15:me||Pr(2,s,n),me||Pr(4,s,n),rr(e,n,s);break;case 1:me||(Nn(s,n),o=s.stateNode,typeof o.componentWillUnmount=="function"&&Mp(s,n,o)),rr(e,n,s);break;case 21:rr(e,n,s);break;case 22:me||Nn(s,n),me=(o=me)||s.memoizedState!==null,rr(e,n,s),me=o;break;default:rr(e,n,s)}}function qp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ol(e)}catch(s){Jt(n,n.return,s)}}function KT(e){switch(e.tag){case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new zp),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new zp),n;default:throw Error(a(435,e.tag))}}function mh(e,n){var s=KT(e);n.forEach(function(o){var f=ob.bind(null,e,o);s.has(o)||(s.add(o),o.then(f,f))})}function Zn(e,n){var s=n.deletions;if(s!==null)for(var o=0;o<s.length;o++){var f=s[o],d=e,_=n,T=_;t:for(;T!==null;){switch(T.tag){case 27:case 5:Ae=T.stateNode,Un=!1;break t;case 3:Ae=T.stateNode.containerInfo,Un=!0;break t;case 4:Ae=T.stateNode.containerInfo,Un=!0;break t}T=T.return}if(Ae===null)throw Error(a(160));jp(d,_,f),Ae=null,Un=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)Hp(n,e),n=n.sibling}var ui=null;function Hp(e,n){var s=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Zn(n,e),Wn(e),o&4&&(Pr(3,e,e.return),Ho(3,e),Pr(5,e,e.return));break;case 1:Zn(n,e),Wn(e),o&512&&(me||s===null||Nn(s,s.return)),o&64&&ir&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?o:s.concat(o))));break;case 26:var f=ui;if(Zn(n,e),Wn(e),o&512&&(me||s===null||Nn(s,s.return)),o&4){var d=s!==null?s.memoizedState:null;if(o=e.memoizedState,s===null)if(o===null)if(e.stateNode===null){t:{o=e.type,s=e.memoizedProps,f=f.ownerDocument||f;e:switch(o){case"title":d=f.getElementsByTagName("title")[0],(!d||d[Tr]||d[he]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(o),f.head.insertBefore(d,f.querySelector("head > title"))),rn(d,o,s),d[he]=e,le(d),o=d;break t;case"link":var _=Ny("link","href",f).get(o+(s.href||""));if(_){for(var T=0;T<_.length;T++)if(d=_[T],d.getAttribute("href")===(s.href==null?null:s.href)&&d.getAttribute("rel")===(s.rel==null?null:s.rel)&&d.getAttribute("title")===(s.title==null?null:s.title)&&d.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){_.splice(T,1);break e}}d=f.createElement(o),rn(d,o,s),f.head.appendChild(d);break;case"meta":if(_=Ny("meta","content",f).get(o+(s.content||""))){for(T=0;T<_.length;T++)if(d=_[T],d.getAttribute("content")===(s.content==null?null:""+s.content)&&d.getAttribute("name")===(s.name==null?null:s.name)&&d.getAttribute("property")===(s.property==null?null:s.property)&&d.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&d.getAttribute("charset")===(s.charSet==null?null:s.charSet)){_.splice(T,1);break e}}d=f.createElement(o),rn(d,o,s),f.head.appendChild(d);break;default:throw Error(a(468,o))}d[he]=e,le(d),o=d}e.stateNode=o}else Uy(f,e.type,e.stateNode);else e.stateNode=My(f,o,e.memoizedProps);else d!==o?(d===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):d.count--,o===null?Uy(f,e.type,e.stateNode):My(f,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Up(e,e.memoizedProps,s.memoizedProps)}break;case 27:if(o&4&&e.alternate===null){f=e.stateNode,d=e.memoizedProps;try{for(var C=f.firstChild;C;){var L=C.nextSibling,Y=C.nodeName;C[Tr]||Y==="HEAD"||Y==="BODY"||Y==="SCRIPT"||Y==="STYLE"||Y==="LINK"&&C.rel.toLowerCase()==="stylesheet"||f.removeChild(C),C=L}for(var tt=e.type,j=f.attributes;j.length;)f.removeAttributeNode(j[0]);rn(f,tt,d),f[he]=e,f[Oe]=d}catch(yt){Jt(e,e.return,yt)}}case 5:if(Zn(n,e),Wn(e),o&512&&(me||s===null||Nn(s,s.return)),e.flags&32){f=e.stateNode;try{qn(f,"")}catch(yt){Jt(e,e.return,yt)}}o&4&&e.stateNode!=null&&(f=e.memoizedProps,Up(e,f,s!==null?s.memoizedProps:f)),o&1024&&(dh=!0);break;case 6:if(Zn(n,e),Wn(e),o&4){if(e.stateNode===null)throw Error(a(162));o=e.memoizedProps,s=e.stateNode;try{s.nodeValue=o}catch(yt){Jt(e,e.return,yt)}}break;case 3:if(Gu=null,f=ui,ui=Hu(n.containerInfo),Zn(n,e),ui=f,Wn(e),o&4&&s!==null&&s.memoizedState.isDehydrated)try{ol(n.containerInfo)}catch(yt){Jt(e,e.return,yt)}dh&&(dh=!1,Fp(e));break;case 4:o=ui,ui=Hu(e.stateNode.containerInfo),Zn(n,e),Wn(e),ui=o;break;case 12:Zn(n,e),Wn(e);break;case 13:Zn(n,e),Wn(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Sh=$e()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,mh(e,o)));break;case 22:if(o&512&&(me||s===null||Nn(s,s.return)),C=e.memoizedState!==null,L=s!==null&&s.memoizedState!==null,Y=ir,tt=me,ir=Y||C,me=tt||L,Zn(n,e),me=tt,ir=Y,Wn(e),n=e.stateNode,n._current=e,n._visibility&=-3,n._visibility|=n._pendingVisibility&2,o&8192&&(n._visibility=C?n._visibility&-2:n._visibility|1,C&&(n=ir||me,s===null||L||n||Ca(e)),e.memoizedProps===null||e.memoizedProps.mode!=="manual"))t:for(s=null,n=e;;){if(n.tag===5||n.tag===26||n.tag===27){if(s===null){L=s=n;try{if(f=L.stateNode,C)d=f.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none";else{_=L.stateNode,T=L.memoizedProps.style;var Q=T!=null&&T.hasOwnProperty("display")?T.display:null;_.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(yt){Jt(L,L.return,yt)}}}else if(n.tag===6){if(s===null){L=n;try{L.stateNode.nodeValue=C?"":L.memoizedProps}catch(yt){Jt(L,L.return,yt)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;s===n&&(s=null),n=n.return}s===n&&(s=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(s=o.retryQueue,s!==null&&(o.retryQueue=null,mh(e,s))));break;case 19:Zn(n,e),Wn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,mh(e,o)));break;case 21:break;default:Zn(n,e),Wn(e)}}function Wn(e){var n=e.flags;if(n&2){try{if(e.tag!==27){t:{for(var s=e.return;s!==null;){if(Lp(s)){var o=s;break t}s=s.return}throw Error(a(160))}switch(o.tag){case 27:var f=o.stateNode,d=fh(e);Du(e,d,f);break;case 5:var _=o.stateNode;o.flags&32&&(qn(_,""),o.flags&=-33);var T=fh(e);Du(e,T,_);break;case 3:case 4:var C=o.stateNode.containerInfo,L=fh(e);hh(e,L,C);break;default:throw Error(a(161))}}}catch(Y){Jt(e,e.return,Y)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Fp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Fp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function sr(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)kp(e,n.alternate,n),n=n.sibling}function Ca(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Pr(4,n,n.return),Ca(n);break;case 1:Nn(n,n.return);var s=n.stateNode;typeof s.componentWillUnmount=="function"&&Mp(n,n.return,s),Ca(n);break;case 26:case 27:case 5:Nn(n,n.return),Ca(n);break;case 22:Nn(n,n.return),n.memoizedState===null&&Ca(n);break;default:Ca(n)}e=e.sibling}}function kr(e,n,s){for(s=s&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,f=e,d=n,_=d.flags;switch(d.tag){case 0:case 11:case 15:kr(f,d,s),Ho(4,d);break;case 1:if(kr(f,d,s),o=d,f=o.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(L){Jt(o,o.return,L)}if(o=d,f=o.updateQueue,f!==null){var T=o.stateNode;try{var C=f.shared.hiddenCallbacks;if(C!==null)for(f.shared.hiddenCallbacks=null,f=0;f<C.length;f++)xp(C[f],T)}catch(L){Jt(o,o.return,L)}}s&&_&64&&Op(d),Ls(d,d.return);break;case 26:case 27:case 5:kr(f,d,s),s&&o===null&&_&4&&Np(d),Ls(d,d.return);break;case 12:kr(f,d,s);break;case 13:kr(f,d,s),s&&_&4&&qp(f,d);break;case 22:d.memoizedState===null&&kr(f,d,s),Ls(d,d.return);break;default:kr(f,d,s)}n=n.sibling}}function gh(e,n){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&Mo(s))}function ph(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Mo(e))}function Br(e,n,s,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Gp(e,n,s,o),n=n.sibling}function Gp(e,n,s,o){var f=n.flags;switch(n.tag){case 0:case 11:case 15:Br(e,n,s,o),f&2048&&Ho(9,n);break;case 3:Br(e,n,s,o),f&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Mo(e)));break;case 12:if(f&2048){Br(e,n,s,o),e=n.stateNode;try{var d=n.memoizedProps,_=d.id,T=d.onPostCommit;typeof T=="function"&&T(_,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(C){Jt(n,n.return,C)}}else Br(e,n,s,o);break;case 23:break;case 22:d=n.stateNode,n.memoizedState!==null?d._visibility&4?Br(e,n,s,o):Fo(e,n):d._visibility&4?Br(e,n,s,o):(d._visibility|=4,Da(e,n,s,o,(n.subtreeFlags&10256)!==0)),f&2048&&gh(n.alternate,n);break;case 24:Br(e,n,s,o),f&2048&&ph(n.alternate,n);break;default:Br(e,n,s,o)}}function Da(e,n,s,o,f){for(f=f&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var d=e,_=n,T=s,C=o,L=_.flags;switch(_.tag){case 0:case 11:case 15:Da(d,_,T,C,f),Ho(8,_);break;case 23:break;case 22:var Y=_.stateNode;_.memoizedState!==null?Y._visibility&4?Da(d,_,T,C,f):Fo(d,_):(Y._visibility|=4,Da(d,_,T,C,f)),f&&L&2048&&gh(_.alternate,_);break;case 24:Da(d,_,T,C,f),f&&L&2048&&ph(_.alternate,_);break;default:Da(d,_,T,C,f)}n=n.sibling}}function Fo(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var s=e,o=n,f=o.flags;switch(o.tag){case 22:Fo(s,o),f&2048&&gh(o.alternate,o);break;case 24:Fo(s,o),f&2048&&ph(o.alternate,o);break;default:Fo(s,o)}n=n.sibling}}var Go=8192;function Ia(e){if(e.subtreeFlags&Go)for(e=e.child;e!==null;)Qp(e),e=e.sibling}function Qp(e){switch(e.tag){case 26:Ia(e),e.flags&Go&&e.memoizedState!==null&&Lb(ui,e.memoizedState,e.memoizedProps);break;case 5:Ia(e);break;case 3:case 4:var n=ui;ui=Hu(e.stateNode.containerInfo),Ia(e),ui=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=Go,Go=16777216,Ia(e),Go=n):Ia(e));break;default:Ia(e)}}function Yp(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Qo(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var o=n[s];Qe=o,Xp(o,e)}Yp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Kp(e),e=e.sibling}function Kp(e){switch(e.tag){case 0:case 11:case 15:Qo(e),e.flags&2048&&Pr(9,e,e.return);break;case 3:Qo(e);break;case 12:Qo(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&4&&(e.return===null||e.return.tag!==13)?(n._visibility&=-5,Iu(e)):Qo(e);break;default:Qo(e)}}function Iu(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var o=n[s];Qe=o,Xp(o,e)}Yp(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Pr(8,n,n.return),Iu(n);break;case 22:s=n.stateNode,s._visibility&4&&(s._visibility&=-5,Iu(n));break;default:Iu(n)}e=e.sibling}}function Xp(e,n){for(;Qe!==null;){var s=Qe;switch(s.tag){case 0:case 11:case 15:Pr(8,s,n);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var o=s.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Mo(s.memoizedState.cache)}if(o=s.child,o!==null)o.return=s,Qe=o;else t:for(s=e;Qe!==null;){o=Qe;var f=o.sibling,d=o.return;if(Bp(o),o===s){Qe=null;break t}if(f!==null){f.return=d,Qe=f;break t}Qe=d}}}function XT(e,n,s,o){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jn(e,n,s,o){return new XT(e,n,s,o)}function yh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function jr(e,n){var s=e.alternate;return s===null?(s=Jn(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&31457280,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function $p(e,n){e.flags&=31457282;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,n=s.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function xu(e,n,s,o,f,d){var _=0;if(o=e,typeof e=="function")yh(e)&&(_=1);else if(typeof e=="string")_=Nb(e,s,ye.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case p:return zs(s.children,f,d,n);case y:_=8,f|=24;break;case E:return e=Jn(12,s,n,f|2),e.elementType=E,e.lanes=d,e;case F:return e=Jn(13,s,n,f),e.elementType=F,e.lanes=d,e;case q:return e=Jn(19,s,n,f),e.elementType=q,e.lanes=d,e;case nt:return Zp(s,f,d,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case A:case V:_=10;break t;case I:_=9;break t;case H:_=11;break t;case et:_=14;break t;case X:_=16,o=null;break t}_=29,s=Error(a(130,e===null?"null":typeof e,"")),o=null}return n=Jn(_,s,n,f),n.elementType=e,n.type=o,n.lanes=d,n}function zs(e,n,s,o){return e=Jn(7,e,o,n),e.lanes=s,e}function Zp(e,n,s,o){e=Jn(22,e,o,n),e.elementType=nt,e.lanes=s;var f={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var d=f._current;if(d===null)throw Error(a(456));if((f._pendingVisibility&2)===0){var _=Ir(d,2);_!==null&&(f._pendingVisibility|=2,Tn(_,d,2))}},attach:function(){var d=f._current;if(d===null)throw Error(a(456));if((f._pendingVisibility&2)!==0){var _=Ir(d,2);_!==null&&(f._pendingVisibility&=-3,Tn(_,d,2))}}};return e.stateNode=f,e}function vh(e,n,s){return e=Jn(6,e,null,n),e.lanes=s,e}function _h(e,n,s){return n=Jn(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function ar(e){e.flags|=4}function Wp(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Ly(n)){if(n=$n.current,n!==null&&((jt&4194176)===jt?Ii!==null:(jt&62914560)!==jt&&(jt&536870912)===0||n!==Ii))throw xo=Af,gg;e.flags|=8192}}function Vu(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?xe():536870912,e.lanes|=n,Va|=n)}function Yo(e,n){if(!Qt)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function ue(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,o=0;if(n)for(var f=e.child;f!==null;)s|=f.lanes|f.childLanes,o|=f.subtreeFlags&31457280,o|=f.flags&31457280,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)s|=f.lanes|f.childLanes,o|=f.subtreeFlags,o|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=o,e.childLanes=s,n}function $T(e,n,s){var o=n.pendingProps;switch(bf(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ue(n),null;case 1:return ue(n),null;case 3:return s=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),nr(Le),ln(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Ro(n)?ar(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,li!==null&&(Ch(li),li=null))),ue(n),null;case 26:return s=n.memoizedState,e===null?(ar(n),s!==null?(ue(n),Wp(n,s)):(ue(n),n.flags&=-16777217)):s?s!==e.memoizedState?(ar(n),ue(n),Wp(n,s)):(ue(n),n.flags&=-16777217):(e.memoizedProps!==o&&ar(n),ue(n),n.flags&=-16777217),null;case 27:ki(n),s=Ce.current;var f=n.type;if(e!==null&&n.stateNode!=null)e.memoizedProps!==o&&ar(n);else{if(!o){if(n.stateNode===null)throw Error(a(166));return ue(n),null}e=ye.current,Ro(n)?dg(n):(e=Dy(f,o,s),n.stateNode=e,ar(n))}return ue(n),null;case 5:if(ki(n),s=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&ar(n);else{if(!o){if(n.stateNode===null)throw Error(a(166));return ue(n),null}if(e=ye.current,Ro(n))dg(n);else{switch(f=qu(Ce.current),e){case 1:e=f.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:e=f.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":e=f.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":e=f.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof o.is=="string"?f.createElement("select",{is:o.is}):f.createElement("select"),o.multiple?e.multiple=!0:o.size&&(e.size=o.size);break;default:e=typeof o.is=="string"?f.createElement(s,{is:o.is}):f.createElement(s)}}e[he]=n,e[Oe]=o;t:for(f=n.child;f!==null;){if(f.tag===5||f.tag===6)e.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break t;for(;f.sibling===null;){if(f.return===null||f.return===n)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}n.stateNode=e;t:switch(rn(e,s,o),s){case"button":case"input":case"select":case"textarea":e=!!o.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&ar(n)}}return ue(n),n.flags&=-16777217,null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&ar(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(a(166));if(e=Ce.current,Ro(n)){if(e=n.stateNode,s=n.memoizedProps,o=null,f=En,f!==null)switch(f.tag){case 27:case 5:o=f.memoizedProps}e[he]=n,e=!!(e.nodeValue===s||o!==null&&o.suppressHydrationWarning===!0||by(e.nodeValue,s)),e||Cs(n)}else e=qu(e).createTextNode(o),e[he]=n,n.stateNode=e}return ue(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=Ro(n),o!==null&&o.dehydrated!==null){if(e===null){if(!f)throw Error(a(318));if(f=n.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[he]=n}else Co(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;ue(n),f=!1}else li!==null&&(Ch(li),li=null),f=!0;if(!f)return n.flags&256?(Wi(n),n):(Wi(n),null)}if(Wi(n),(n.flags&128)!==0)return n.lanes=s,n;if(s=o!==null,e=e!==null&&e.memoizedState!==null,s){o=n.child,f=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(f=o.alternate.memoizedState.cachePool.pool);var d=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==f&&(o.flags|=2048)}return s!==e&&s&&(n.child.flags|=8192),Vu(n,n.updateQueue),ue(n),null;case 4:return ln(),e===null&&Ph(n.stateNode.containerInfo),ue(n),null;case 10:return nr(n.type),ue(n),null;case 19:if(Ft(Ue),f=n.memoizedState,f===null)return ue(n),null;if(o=(n.flags&128)!==0,d=f.rendering,d===null)if(o)Yo(f,!1);else{if(ge!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(d=mu(e),d!==null){for(n.flags|=128,Yo(f,!1),e=d.updateQueue,n.updateQueue=e,Vu(n,e),n.subtreeFlags=0,e=s,s=n.child;s!==null;)$p(s,e),s=s.sibling;return vt(Ue,Ue.current&1|2),n.child}e=e.sibling}f.tail!==null&&$e()>Ou&&(n.flags|=128,o=!0,Yo(f,!1),n.lanes=4194304)}else{if(!o)if(e=mu(d),e!==null){if(n.flags|=128,o=!0,e=e.updateQueue,n.updateQueue=e,Vu(n,e),Yo(f,!0),f.tail===null&&f.tailMode==="hidden"&&!d.alternate&&!Qt)return ue(n),null}else 2*$e()-f.renderingStartTime>Ou&&s!==536870912&&(n.flags|=128,o=!0,Yo(f,!1),n.lanes=4194304);f.isBackwards?(d.sibling=n.child,n.child=d):(e=f.last,e!==null?e.sibling=d:n.child=d,f.last=d)}return f.tail!==null?(n=f.tail,f.rendering=n,f.tail=n.sibling,f.renderingStartTime=$e(),n.sibling=null,e=Ue.current,vt(Ue,o?e&1|2:e&1),n):(ue(n),null);case 22:case 23:return Wi(n),Rf(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(s&536870912)!==0&&(n.flags&128)===0&&(ue(n),n.subtreeFlags&6&&(n.flags|=8192)):ue(n),s=n.updateQueue,s!==null&&Vu(n,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==s&&(n.flags|=2048),e!==null&&Ft(Is),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),nr(Le),ue(n),null;case 25:return null}throw Error(a(156,n.tag))}function ZT(e,n){switch(bf(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return nr(Le),ln(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return ki(n),null;case 13:if(Wi(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(a(340));Co()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Ft(Ue),null;case 4:return ln(),null;case 10:return nr(n.type),null;case 22:case 23:return Wi(n),Rf(),e!==null&&Ft(Is),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return nr(Le),null;case 25:return null;default:return null}}function Jp(e,n){switch(bf(n),n.tag){case 3:nr(Le),ln();break;case 26:case 27:case 5:ki(n);break;case 4:ln();break;case 13:Wi(n);break;case 19:Ft(Ue);break;case 10:nr(n.type);break;case 22:case 23:Wi(n),Rf(),e!==null&&Ft(Is);break;case 24:nr(Le)}}var WT={getCacheForType:function(e){var n=hn(Le),s=n.data.get(e);return s===void 0&&(s=e(),n.data.set(e,s)),s}},JT=typeof WeakMap=="function"?WeakMap:Map,ce=0,ee=null,Lt=null,jt=0,ne=0,Ln=null,or=!1,xa=!1,Eh=!1,lr=0,ge=0,qr=0,Ps=0,Th=0,ti=0,Va=0,Ko=null,Vi=null,bh=!1,Sh=0,Ou=1/0,Mu=null,Hr=null,Nu=!1,ks=null,Xo=0,Ah=0,wh=null,$o=0,Rh=null;function zn(){if((ce&2)!==0&&jt!==0)return jt&-jt;if(S.T!==null){var e=ba;return e!==0?e:Nh()}return _i()}function ty(){ti===0&&(ti=(jt&536870912)===0||Qt?Ie():536870912);var e=$n.current;return e!==null&&(e.flags|=32),ti}function Tn(e,n,s){(e===ee&&ne===2||e.cancelPendingCommit!==null)&&(Oa(e,0),ur(e,jt,ti,!1)),Ot(e,s),((ce&2)===0||e!==ee)&&(e===ee&&((ce&2)===0&&(Ps|=s),ge===4&&ur(e,jt,ti,!1)),Oi(e))}function ey(e,n,s){if((ce&6)!==0)throw Error(a(327));var o=!s&&(n&60)===0&&(n&e.expiredLanes)===0||We(e,n),f=o?nb(e,n):xh(e,n,!0),d=o;do{if(f===0){xa&&!o&&ur(e,n,0,!1);break}else if(f===6)ur(e,n,0,!or);else{if(s=e.current.alternate,d&&!tb(s)){f=xh(e,n,!1),d=!1;continue}if(f===2){if(d=n,e.errorRecoveryDisabledLanes&d)var _=0;else _=e.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){n=_;t:{var T=e;f=Ko;var C=T.current.memoizedState.isDehydrated;if(C&&(Oa(T,_).flags|=256),_=xh(T,_,!1),_!==2){if(Eh&&!C){T.errorRecoveryDisabledLanes|=d,Ps|=d,f=4;break t}d=Vi,Vi=f,d!==null&&Ch(d)}f=_}if(d=!1,f!==2)continue}}if(f===1){Oa(e,0),ur(e,n,0,!0);break}t:{switch(o=e,f){case 0:case 1:throw Error(a(345));case 4:if((n&4194176)===n){ur(o,n,ti,!or);break t}break;case 2:Vi=null;break;case 3:case 5:break;default:throw Error(a(329))}if(o.finishedWork=s,o.finishedLanes=n,(n&62914560)===n&&(d=Sh+300-$e(),10<d)){if(ur(o,n,ti,!or),te(o,0)!==0)break t;o.timeoutHandle=wy(ny.bind(null,o,s,Vi,Mu,bh,n,ti,Ps,Va,or,2,-0,0),d);break t}ny(o,s,Vi,Mu,bh,n,ti,Ps,Va,or,0,-0,0)}}break}while(!0);Oi(e)}function Ch(e){Vi===null?Vi=e:Vi.push.apply(Vi,e)}function ny(e,n,s,o,f,d,_,T,C,L,Y,tt,j){var Q=n.subtreeFlags;if((Q&8192||(Q&16785408)===16785408)&&(nl={stylesheets:null,count:0,unsuspend:Ub},Qp(n),n=zb(),n!==null)){e.cancelPendingCommit=n(uy.bind(null,e,s,o,f,_,T,C,1,tt,j)),ur(e,d,_,!L);return}uy(e,s,o,f,_,T,C,Y,tt,j)}function tb(e){for(var n=e;;){var s=n.tag;if((s===0||s===11||s===15)&&n.flags&16384&&(s=n.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var o=0;o<s.length;o++){var f=s[o],d=f.getSnapshot;f=f.value;try{if(!Mn(d(),f))return!1}catch{return!1}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function ur(e,n,s,o){n&=~Th,n&=~Ps,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var f=n;0<f;){var d=31-Ze(f),_=1<<d;o[d]=-1,f&=~_}s!==0&&Ve(e,s,n)}function Uu(){return(ce&6)===0?(Zo(0),!1):!0}function Dh(){if(Lt!==null){if(ne===0)var e=Lt.return;else e=Lt,er=Ns=null,Nf(e),Ea=null,Vo=0,e=Lt;for(;e!==null;)Jp(e.alternate,e),e=e.return;Lt=null}}function Oa(e,n){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,_b(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),Dh(),ee=e,Lt=s=jr(e.current,null),jt=n,ne=0,Ln=null,or=!1,xa=We(e,n),Eh=!1,Va=ti=Th=Ps=qr=ge=0,Vi=Ko=null,bh=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var f=31-Ze(o),d=1<<f;n|=e[f],o&=~d}return lr=n,su(),s}function iy(e,n){Mt=null,S.H=xi,n===Io?(n=vg(),ne=3):n===gg?(n=vg(),ne=4):ne=n===pp?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Ln=n,Lt===null&&(ge=1,wu(e,Yn(n,e.current)))}function ry(){var e=S.H;return S.H=xi,e===null?xi:e}function sy(){var e=S.A;return S.A=WT,e}function Ih(){ge=4,or||(jt&4194176)!==jt&&$n.current!==null||(xa=!0),(qr&134217727)===0&&(Ps&134217727)===0||ee===null||ur(ee,jt,ti,!1)}function xh(e,n,s){var o=ce;ce|=2;var f=ry(),d=sy();(ee!==e||jt!==n)&&(Mu=null,Oa(e,n)),n=!1;var _=ge;t:do try{if(ne!==0&&Lt!==null){var T=Lt,C=Ln;switch(ne){case 8:Dh(),_=6;break t;case 3:case 2:case 6:$n.current===null&&(n=!0);var L=ne;if(ne=0,Ln=null,Ma(e,T,C,L),s&&xa){_=0;break t}break;default:L=ne,ne=0,Ln=null,Ma(e,T,C,L)}}eb(),_=ge;break}catch(Y){iy(e,Y)}while(!0);return n&&e.shellSuspendCounter++,er=Ns=null,ce=o,S.H=f,S.A=d,Lt===null&&(ee=null,jt=0,su()),_}function eb(){for(;Lt!==null;)ay(Lt)}function nb(e,n){var s=ce;ce|=2;var o=ry(),f=sy();ee!==e||jt!==n?(Mu=null,Ou=$e()+500,Oa(e,n)):xa=We(e,n);t:do try{if(ne!==0&&Lt!==null){n=Lt;var d=Ln;e:switch(ne){case 1:ne=0,Ln=null,Ma(e,n,d,1);break;case 2:if(pg(d)){ne=0,Ln=null,oy(n);break}n=function(){ne===2&&ee===e&&(ne=7),Oi(e)},d.then(n,n);break t;case 3:ne=7;break t;case 4:ne=5;break t;case 7:pg(d)?(ne=0,Ln=null,oy(n)):(ne=0,Ln=null,Ma(e,n,d,7));break;case 5:var _=null;switch(Lt.tag){case 26:_=Lt.memoizedState;case 5:case 27:var T=Lt;if(!_||Ly(_)){ne=0,Ln=null;var C=T.sibling;if(C!==null)Lt=C;else{var L=T.return;L!==null?(Lt=L,Lu(L)):Lt=null}break e}}ne=0,Ln=null,Ma(e,n,d,5);break;case 6:ne=0,Ln=null,Ma(e,n,d,6);break;case 8:Dh(),ge=6;break t;default:throw Error(a(462))}}ib();break}catch(Y){iy(e,Y)}while(!0);return er=Ns=null,S.H=o,S.A=f,ce=s,Lt!==null?0:(ee=null,jt=0,su(),ge)}function ib(){for(;Lt!==null&&!yr();)ay(Lt)}function ay(e){var n=Dp(e.alternate,e,lr);e.memoizedProps=e.pendingProps,n===null?Lu(e):Lt=n}function oy(e){var n=e,s=n.alternate;switch(n.tag){case 15:case 0:n=bp(s,n,n.pendingProps,n.type,void 0,jt);break;case 11:n=bp(s,n,n.pendingProps,n.type.render,n.ref,jt);break;case 5:Nf(n);default:Jp(s,n),n=Lt=$p(n,lr),n=Dp(s,n,lr)}e.memoizedProps=e.pendingProps,n===null?Lu(e):Lt=n}function Ma(e,n,s,o){er=Ns=null,Nf(n),Ea=null,Vo=0;var f=n.return;try{if(GT(e,f,n,s,jt)){ge=1,wu(e,Yn(s,e.current)),Lt=null;return}}catch(d){if(f!==null)throw Lt=f,d;ge=1,wu(e,Yn(s,e.current)),Lt=null;return}n.flags&32768?(Qt||o===1?e=!0:xa||(jt&536870912)!==0?e=!1:(or=e=!0,(o===2||o===3||o===6)&&(o=$n.current,o!==null&&o.tag===13&&(o.flags|=16384))),ly(n,e)):Lu(n)}function Lu(e){var n=e;do{if((n.flags&32768)!==0){ly(n,or);return}e=n.return;var s=$T(n.alternate,n,lr);if(s!==null){Lt=s;return}if(n=n.sibling,n!==null){Lt=n;return}Lt=n=e}while(n!==null);ge===0&&(ge=5)}function ly(e,n){do{var s=ZT(e.alternate,e);if(s!==null){s.flags&=32767,Lt=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!n&&(e=e.sibling,e!==null)){Lt=e;return}Lt=e=s}while(e!==null);ge=6,Lt=null}function uy(e,n,s,o,f,d,_,T,C,L){var Y=S.T,tt=at.p;try{at.p=2,S.T=null,rb(e,n,s,o,tt,f,d,_,T,C,L)}finally{S.T=Y,at.p=tt}}function rb(e,n,s,o,f,d,_,T){do Na();while(ks!==null);if((ce&6)!==0)throw Error(a(327));var C=e.finishedWork;if(o=e.finishedLanes,C===null)return null;if(e.finishedWork=null,e.finishedLanes=0,C===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var L=C.lanes|C.childLanes;if(L|=_f,xn(e,o,L,d,_,T),e===ee&&(Lt=ee=null,jt=0),(C.subtreeFlags&10256)===0&&(C.flags&10256)===0||Nu||(Nu=!0,Ah=L,wh=s,lb(cn,function(){return Na(),null})),s=(C.flags&15990)!==0,(C.subtreeFlags&15990)!==0||s?(s=S.T,S.T=null,d=at.p,at.p=2,_=ce,ce|=4,YT(e,C),Hp(C,e),DT(qh,e.containerInfo),Ku=!!jh,qh=jh=null,e.current=C,kp(e,C.alternate,C),vr(),ce=_,at.p=d,S.T=s):e.current=C,Nu?(Nu=!1,ks=e,Xo=o):cy(e,L),L=e.pendingLanes,L===0&&(Hr=null),Bi(C.stateNode),Oi(e),n!==null)for(f=e.onRecoverableError,C=0;C<n.length;C++)L=n[C],f(L.value,{componentStack:L.stack});return(Xo&3)!==0&&Na(),L=e.pendingLanes,(o&4194218)!==0&&(L&42)!==0?e===Rh?$o++:($o=0,Rh=e):$o=0,Zo(0),null}function cy(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Mo(n)))}function Na(){if(ks!==null){var e=ks,n=Ah;Ah=0;var s=vi(Xo),o=S.T,f=at.p;try{if(at.p=32>s?32:s,S.T=null,ks===null)var d=!1;else{s=wh,wh=null;var _=ks,T=Xo;if(ks=null,Xo=0,(ce&6)!==0)throw Error(a(331));var C=ce;if(ce|=4,Kp(_.current),Gp(_,_.current,T,s),ce=C,Zo(0,!1),je&&typeof je.onPostCommitFiberRoot=="function")try{je.onPostCommitFiberRoot(yi,_)}catch{}d=!0}return d}finally{at.p=f,S.T=o,cy(e,n)}}return!1}function fy(e,n,s){n=Yn(s,n),n=Kf(e.stateNode,n,2),e=zr(e,n,2),e!==null&&(Ot(e,2),Oi(e))}function Jt(e,n,s){if(e.tag===3)fy(e,e,s);else for(;n!==null;){if(n.tag===3){fy(n,e,s);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Hr===null||!Hr.has(o))){e=Yn(s,e),s=mp(2),o=zr(n,s,2),o!==null&&(gp(s,o,n,e),Ot(o,2),Oi(o));break}}n=n.return}}function Vh(e,n,s){var o=e.pingCache;if(o===null){o=e.pingCache=new JT;var f=new Set;o.set(n,f)}else f=o.get(n),f===void 0&&(f=new Set,o.set(n,f));f.has(s)||(Eh=!0,f.add(s),e=sb.bind(null,e,n,s),n.then(e,e))}function sb(e,n,s){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,ee===e&&(jt&s)===s&&(ge===4||ge===3&&(jt&62914560)===jt&&300>$e()-Sh?(ce&2)===0&&Oa(e,0):Th|=s,Va===jt&&(Va=0)),Oi(e)}function hy(e,n){n===0&&(n=xe()),e=Ir(e,n),e!==null&&(Ot(e,n),Oi(e))}function ab(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),hy(e,s)}function ob(e,n){var s=0;switch(e.tag){case 13:var o=e.stateNode,f=e.memoizedState;f!==null&&(s=f.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(a(314))}o!==null&&o.delete(n),hy(e,s)}function lb(e,n){return un(e,n)}var zu=null,Ua=null,Oh=!1,Pu=!1,Mh=!1,Bs=0;function Oi(e){e!==Ua&&e.next===null&&(Ua===null?zu=Ua=e:Ua=Ua.next=e),Pu=!0,Oh||(Oh=!0,cb(ub))}function Zo(e,n){if(!Mh&&Pu){Mh=!0;do for(var s=!1,o=zu;o!==null;){if(e!==0){var f=o.pendingLanes;if(f===0)var d=0;else{var _=o.suspendedLanes,T=o.pingedLanes;d=(1<<31-Ze(42|e)+1)-1,d&=f&~(_&~T),d=d&201326677?d&201326677|1:d?d|2:0}d!==0&&(s=!0,gy(o,d))}else d=jt,d=te(o,o===ee?d:0),(d&3)===0||We(o,d)||(s=!0,gy(o,d));o=o.next}while(s);Mh=!1}}function ub(){Pu=Oh=!1;var e=0;Bs!==0&&(vb()&&(e=Bs),Bs=0);for(var n=$e(),s=null,o=zu;o!==null;){var f=o.next,d=dy(o,n);d===0?(o.next=null,s===null?zu=f:s.next=f,f===null&&(Ua=s)):(s=o,(e!==0||(d&3)!==0)&&(Pu=!0)),o=f}Zo(e)}function dy(e,n){for(var s=e.suspendedLanes,o=e.pingedLanes,f=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var _=31-Ze(d),T=1<<_,C=f[_];C===-1?((T&s)===0||(T&o)!==0)&&(f[_]=De(T,n)):C<=n&&(e.expiredLanes|=T),d&=~T}if(n=ee,s=jt,s=te(e,e===n?s:0),o=e.callbackNode,s===0||e===n&&ne===2||e.cancelPendingCommit!==null)return o!==null&&o!==null&&si(o),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||We(e,s)){if(n=s&-s,n===e.callbackPriority)return n;switch(o!==null&&si(o),vi(s)){case 2:case 8:s=re;break;case 32:s=cn;break;case 268435456:s=_r;break;default:s=cn}return o=my.bind(null,e),s=un(s,o),e.callbackPriority=n,e.callbackNode=s,n}return o!==null&&o!==null&&si(o),e.callbackPriority=2,e.callbackNode=null,2}function my(e,n){var s=e.callbackNode;if(Na()&&e.callbackNode!==s)return null;var o=jt;return o=te(e,e===ee?o:0),o===0?null:(ey(e,o,n),dy(e,$e()),e.callbackNode!=null&&e.callbackNode===s?my.bind(null,e):null)}function gy(e,n){if(Na())return null;ey(e,n,!0)}function cb(e){Eb(function(){(ce&6)!==0?un(ve,e):e()})}function Nh(){return Bs===0&&(Bs=Ie()),Bs}function py(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ti(""+e)}function yy(e,n){var s=n.ownerDocument.createElement("input");return s.name=n.name,s.value=n.value,e.id&&s.setAttribute("form",e.id),n.parentNode.insertBefore(s,n),e=new FormData(e),s.parentNode.removeChild(s),e}function fb(e,n,s,o,f){if(n==="submit"&&s&&s.stateNode===f){var d=py((f[Oe]||null).action),_=o.submitter;_&&(n=(n=_[Oe]||null)?py(n.formAction):_.getAttribute("formAction"),n!==null&&(d=n,_=null));var T=new aa("action","action",null,o,f);e.push({event:T,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Bs!==0){var C=_?yy(f,_):new FormData(f);Hf(s,{pending:!0,data:C,method:f.method,action:d},null,C)}}else typeof d=="function"&&(T.preventDefault(),C=_?yy(f,_):new FormData(f),Hf(s,{pending:!0,data:C,method:f.method,action:d},d,C))},currentTarget:f}]})}}for(var Uh=0;Uh<ug.length;Uh++){var Lh=ug[Uh],hb=Lh.toLowerCase(),db=Lh[0].toUpperCase()+Lh.slice(1);oi(hb,"on"+db)}oi(rg,"onAnimationEnd"),oi(sg,"onAnimationIteration"),oi(ag,"onAnimationStart"),oi("dblclick","onDoubleClick"),oi("focusin","onFocus"),oi("focusout","onBlur"),oi(xT,"onTransitionRun"),oi(VT,"onTransitionStart"),oi(OT,"onTransitionCancel"),oi(og,"onTransitionEnd"),bn("onMouseEnter",["mouseout","mouseover"]),bn("onMouseLeave",["mouseout","mouseover"]),bn("onPointerEnter",["pointerout","pointerover"]),bn("onPointerLeave",["pointerout","pointerover"]),Vn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wo));function vy(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var o=e[s],f=o.event;o=o.listeners;t:{var d=void 0;if(n)for(var _=o.length-1;0<=_;_--){var T=o[_],C=T.instance,L=T.currentTarget;if(T=T.listener,C!==d&&f.isPropagationStopped())break t;d=T,f.currentTarget=L;try{d(f)}catch(Y){Au(Y)}f.currentTarget=null,d=C}else for(_=0;_<o.length;_++){if(T=o[_],C=T.instance,L=T.currentTarget,T=T.listener,C!==d&&f.isPropagationStopped())break t;d=T,f.currentTarget=L;try{d(f)}catch(Y){Au(Y)}f.currentTarget=null,d=C}}}}function Pt(e,n){var s=n[fs];s===void 0&&(s=n[fs]=new Set);var o=e+"__bubble";s.has(o)||(_y(n,e,2,!1),s.add(o))}function zh(e,n,s){var o=0;n&&(o|=4),_y(s,e,o,n)}var ku="_reactListening"+Math.random().toString(36).slice(2);function Ph(e){if(!e[ku]){e[ku]=!0,uo.forEach(function(s){s!=="selectionchange"&&(mb.has(s)||zh(s,!1,e),zh(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[ku]||(n[ku]=!0,zh("selectionchange",!1,n))}}function _y(e,n,s,o){switch(qy(n)){case 2:var f=Bb;break;case 8:f=jb;break;default:f=Zh}s=f.bind(null,n,s,e),f=void 0,!Fn||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(f=!0),o?f!==void 0?e.addEventListener(n,s,{capture:!0,passive:f}):e.addEventListener(n,s,!0):f!==void 0?e.addEventListener(n,s,{passive:f}):e.addEventListener(n,s,!1)}function kh(e,n,s,o,f){var d=o;if((n&1)===0&&(n&2)===0&&o!==null)t:for(;;){if(o===null)return;var _=o.tag;if(_===3||_===4){var T=o.stateNode.containerInfo;if(T===f||T.nodeType===8&&T.parentNode===f)break;if(_===4)for(_=o.return;_!==null;){var C=_.tag;if((C===3||C===4)&&(C=_.stateNode.containerInfo,C===f||C.nodeType===8&&C.parentNode===f))return;_=_.return}for(;T!==null;){if(_=ai(T),_===null)return;if(C=_.tag,C===5||C===6||C===26||C===27){o=d=_;continue t}T=T.parentNode}}o=o.return}Fl(function(){var L=d,Y=sa(s),tt=[];t:{var j=lg.get(e);if(j!==void 0){var Q=aa,yt=e;switch(e){case"keypress":if(Si(s)===0)break t;case"keydown":case"keyup":Q=ha;break;case"focusin":yt="focus",Q=ua;break;case"focusout":yt="blur",Q=ua;break;case"beforeblur":case"afterblur":Q=ua;break;case"click":if(s.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=ff;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=Wl;break;case rg:case sg:case ag:Q=ca;break;case og:Q=tu;break;case"scroll":case"scrollend":Q=Gl;break;case"wheel":Q=da;break;case"copy":case"cut":case"paste":Q=fa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=bo;break;case"toggle":case"beforetoggle":Q=nu}var Ct=(n&4)!==0,pe=!Ct&&(e==="scroll"||e==="scrollend"),z=Ct?j!==null?j+"Capture":null:j;Ct=[];for(var U=L,k;U!==null;){var $=U;if(k=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||k===null||z===null||($=ps(U,z),$!=null&&Ct.push(Jo(U,$,k))),pe)break;U=U.return}0<Ct.length&&(j=new Q(j,yt,null,s,Y),tt.push({event:j,listeners:Ct}))}}if((n&7)===0){t:{if(j=e==="mouseover"||e==="pointerover",Q=e==="mouseout"||e==="pointerout",j&&s!==Hn&&(yt=s.relatedTarget||s.fromElement)&&(ai(yt)||yt[ji]))break t;if((Q||j)&&(j=Y.window===Y?Y:(j=Y.ownerDocument)?j.defaultView||j.parentWindow:window,Q?(yt=s.relatedTarget||s.toElement,Q=L,yt=yt?ai(yt):null,yt!==null&&(pe=mt(yt),Ct=yt.tag,yt!==pe||Ct!==5&&Ct!==27&&Ct!==6)&&(yt=null)):(Q=null,yt=L),Q!==yt)){if(Ct=Gn,$="onMouseLeave",z="onMouseEnter",U="mouse",(e==="pointerout"||e==="pointerover")&&(Ct=bo,$="onPointerLeave",z="onPointerEnter",U="pointer"),pe=Q==null?j:br(Q),k=yt==null?j:br(yt),j=new Ct($,U+"leave",Q,s,Y),j.target=pe,j.relatedTarget=k,$=null,ai(Y)===L&&(Ct=new Ct(z,U+"enter",yt,s,Y),Ct.target=k,Ct.relatedTarget=pe,$=Ct),pe=$,Q&&yt)e:{for(Ct=Q,z=yt,U=0,k=Ct;k;k=La(k))U++;for(k=0,$=z;$;$=La($))k++;for(;0<U-k;)Ct=La(Ct),U--;for(;0<k-U;)z=La(z),k--;for(;U--;){if(Ct===z||z!==null&&Ct===z.alternate)break e;Ct=La(Ct),z=La(z)}Ct=null}else Ct=null;Q!==null&&Ey(tt,j,Q,Ct,!1),yt!==null&&pe!==null&&Ey(tt,pe,yt,Ct,!0)}}t:{if(j=L?br(L):window,Q=j.nodeName&&j.nodeName.toLowerCase(),Q==="select"||Q==="input"&&j.type==="file")var gt=Ym;else if(Ne(j))if(Km)gt=RT;else{gt=AT;var Ut=ST}else Q=j.nodeName,!Q||Q.toLowerCase()!=="input"||j.type!=="checkbox"&&j.type!=="radio"?L&&go(L.elementType)&&(gt=Ym):gt=wT;if(gt&&(gt=gt(e,L))){Xi(tt,gt,s,Y);break t}Ut&&Ut(e,j,L),e==="focusout"&&L&&j.type==="number"&&L.memoizedProps.value!=null&&ra(j,"number",j.value)}switch(Ut=L?br(L):window,e){case"focusin":(Ne(Ut)||Ut.contentEditable==="true")&&(ma=Ut,pf=L,wo=null);break;case"focusout":wo=pf=ma=null;break;case"mousedown":yf=!0;break;case"contextmenu":case"mouseup":case"dragend":yf=!1,ng(tt,s,Y);break;case"selectionchange":if(IT)break;case"keydown":case"keyup":ng(tt,s,Y)}var Et;if(Ri)t:{switch(e){case"compositionstart":var St="onCompositionStart";break t;case"compositionend":St="onCompositionEnd";break t;case"compositionupdate":St="onCompositionUpdate";break t}St=void 0}else kt?G(e,s)&&(St="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(St="onCompositionStart");St&&(v&&s.locale!=="ko"&&(kt||St!=="onCompositionStart"?St==="onCompositionEnd"&&kt&&(Et=yo()):(bi=Y,Dr="value"in bi?bi.value:bi.textContent,kt=!0)),Ut=Bu(L,St),0<Ut.length&&(St=new Eo(St,e,null,s,Y),tt.push({event:St,listeners:Ut}),Et?St.data=Et:(Et=rt(s),Et!==null&&(St.data=Et)))),(Et=g?Me(e,s):Bt(e,s))&&(St=Bu(L,"onBeforeInput"),0<St.length&&(Ut=new Eo("onBeforeInput","beforeinput",null,s,Y),tt.push({event:Ut,listeners:St}),Ut.data=Et)),fb(tt,e,L,s,Y)}vy(tt,n)})}function Jo(e,n,s){return{instance:e,listener:n,currentTarget:s}}function Bu(e,n){for(var s=n+"Capture",o=[];e!==null;){var f=e,d=f.stateNode;f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=ps(e,s),f!=null&&o.unshift(Jo(e,f,d)),f=ps(e,n),f!=null&&o.push(Jo(e,f,d))),e=e.return}return o}function La(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ey(e,n,s,o,f){for(var d=n._reactName,_=[];s!==null&&s!==o;){var T=s,C=T.alternate,L=T.stateNode;if(T=T.tag,C!==null&&C===o)break;T!==5&&T!==26&&T!==27||L===null||(C=L,f?(L=ps(s,d),L!=null&&_.unshift(Jo(s,L,C))):f||(L=ps(s,d),L!=null&&_.push(Jo(s,L,C)))),s=s.return}_.length!==0&&e.push({event:n,listeners:_})}var gb=/\r\n?/g,pb=/\u0000|\uFFFD/g;function Ty(e){return(typeof e=="string"?e:""+e).replace(gb,`
`).replace(pb,"")}function by(e,n){return n=Ty(n),Ty(e)===n}function ju(){}function Wt(e,n,s,o,f,d){switch(s){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||qn(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&qn(e,""+o);break;case"className":wr(e,"class",o);break;case"tabIndex":wr(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":wr(e,s,o);break;case"style":Hl(e,o,d);break;case"data":if(n!=="object"){wr(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||s!=="href")){e.removeAttribute(s);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(s);break}o=Ti(""+o),e.setAttribute(s,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(s==="formAction"?(n!=="input"&&Wt(e,n,"name",f.name,f,null),Wt(e,n,"formEncType",f.formEncType,f,null),Wt(e,n,"formMethod",f.formMethod,f,null),Wt(e,n,"formTarget",f.formTarget,f,null)):(Wt(e,n,"encType",f.encType,f,null),Wt(e,n,"method",f.method,f,null),Wt(e,n,"target",f.target,f,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(s);break}o=Ti(""+o),e.setAttribute(s,o);break;case"onClick":o!=null&&(e.onclick=ju);break;case"onScroll":o!=null&&Pt("scroll",e);break;case"onScrollEnd":o!=null&&Pt("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(a(61));if(s=o.__html,s!=null){if(f.children!=null)throw Error(a(60));e.innerHTML=s}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}s=Ti(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(s,""+o):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":o===!0?e.setAttribute(s,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(s,o):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(s,o):e.removeAttribute(s);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(s):e.setAttribute(s,o);break;case"popover":Pt("beforetoggle",e),Pt("toggle",e),Ar(e,"popover",o);break;case"xlinkActuate":jn(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":jn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":jn(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":jn(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":jn(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":jn(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":jn(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":jn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":jn(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Ar(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=uf.get(s)||s,Ar(e,s,o))}}function Bh(e,n,s,o,f,d){switch(s){case"style":Hl(e,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(a(61));if(s=o.__html,s!=null){if(f.children!=null)throw Error(a(60));e.innerHTML=s}}break;case"children":typeof o=="string"?qn(e,o):(typeof o=="number"||typeof o=="bigint")&&qn(e,""+o);break;case"onScroll":o!=null&&Pt("scroll",e);break;case"onScrollEnd":o!=null&&Pt("scrollend",e);break;case"onClick":o!=null&&(e.onclick=ju);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!na.hasOwnProperty(s))t:{if(s[0]==="o"&&s[1]==="n"&&(f=s.endsWith("Capture"),n=s.slice(2,f?s.length-7:void 0),d=e[Oe]||null,d=d!=null?d[s]:null,typeof d=="function"&&e.removeEventListener(n,d,f),typeof o=="function")){typeof d!="function"&&d!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(n,o,f);break t}s in e?e[s]=o:o===!0?e.setAttribute(s,""):Ar(e,s,o)}}}function rn(e,n,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pt("error",e),Pt("load",e);var o=!1,f=!1,d;for(d in s)if(s.hasOwnProperty(d)){var _=s[d];if(_!=null)switch(d){case"src":o=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:Wt(e,n,d,_,s,null)}}f&&Wt(e,n,"srcSet",s.srcSet,s,null),o&&Wt(e,n,"src",s.src,s,null);return;case"input":Pt("invalid",e);var T=d=_=f=null,C=null,L=null;for(o in s)if(s.hasOwnProperty(o)){var Y=s[o];if(Y!=null)switch(o){case"name":f=Y;break;case"type":_=Y;break;case"checked":C=Y;break;case"defaultChecked":L=Y;break;case"value":d=Y;break;case"defaultValue":T=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(a(137,n));break;default:Wt(e,n,o,Y,s,null)}}ms(e,d,T,C,L,_,f,!1),ds(e);return;case"select":Pt("invalid",e),o=_=d=null;for(f in s)if(s.hasOwnProperty(f)&&(T=s[f],T!=null))switch(f){case"value":d=T;break;case"defaultValue":_=T;break;case"multiple":o=T;default:Wt(e,n,f,T,s,null)}n=d,s=_,e.multiple=!!o,n!=null?Gt(e,!!o,n,!1):s!=null&&Gt(e,!!o,s,!0);return;case"textarea":Pt("invalid",e),d=f=o=null;for(_ in s)if(s.hasOwnProperty(_)&&(T=s[_],T!=null))switch(_){case"value":o=T;break;case"defaultValue":f=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(a(91));break;default:Wt(e,n,_,T,s,null)}Cr(e,o,f,d),ds(e);return;case"option":for(C in s)if(s.hasOwnProperty(C)&&(o=s[C],o!=null))switch(C){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Wt(e,n,C,o,s,null)}return;case"dialog":Pt("cancel",e),Pt("close",e);break;case"iframe":case"object":Pt("load",e);break;case"video":case"audio":for(o=0;o<Wo.length;o++)Pt(Wo[o],e);break;case"image":Pt("error",e),Pt("load",e);break;case"details":Pt("toggle",e);break;case"embed":case"source":case"link":Pt("error",e),Pt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in s)if(s.hasOwnProperty(L)&&(o=s[L],o!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:Wt(e,n,L,o,s,null)}return;default:if(go(n)){for(Y in s)s.hasOwnProperty(Y)&&(o=s[Y],o!==void 0&&Bh(e,n,Y,o,s,void 0));return}}for(T in s)s.hasOwnProperty(T)&&(o=s[T],o!=null&&Wt(e,n,T,o,s,null))}function yb(e,n,s,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,_=null,T=null,C=null,L=null,Y=null;for(Q in s){var tt=s[Q];if(s.hasOwnProperty(Q)&&tt!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":C=tt;default:o.hasOwnProperty(Q)||Wt(e,n,Q,null,o,tt)}}for(var j in o){var Q=o[j];if(tt=s[j],o.hasOwnProperty(j)&&(Q!=null||tt!=null))switch(j){case"type":d=Q;break;case"name":f=Q;break;case"checked":L=Q;break;case"defaultChecked":Y=Q;break;case"value":_=Q;break;case"defaultValue":T=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(a(137,n));break;default:Q!==tt&&Wt(e,n,j,Q,o,tt)}}Rr(e,_,T,C,L,Y,d,f);return;case"select":Q=_=T=j=null;for(d in s)if(C=s[d],s.hasOwnProperty(d)&&C!=null)switch(d){case"value":break;case"multiple":Q=C;default:o.hasOwnProperty(d)||Wt(e,n,d,null,o,C)}for(f in o)if(d=o[f],C=s[f],o.hasOwnProperty(f)&&(d!=null||C!=null))switch(f){case"value":j=d;break;case"defaultValue":T=d;break;case"multiple":_=d;default:d!==C&&Wt(e,n,f,d,o,C)}n=T,s=_,o=Q,j!=null?Gt(e,!!s,j,!1):!!o!=!!s&&(n!=null?Gt(e,!!s,n,!0):Gt(e,!!s,s?[]:"",!1));return;case"textarea":Q=j=null;for(T in s)if(f=s[T],s.hasOwnProperty(T)&&f!=null&&!o.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Wt(e,n,T,null,o,f)}for(_ in o)if(f=o[_],d=s[_],o.hasOwnProperty(_)&&(f!=null||d!=null))switch(_){case"value":j=f;break;case"defaultValue":Q=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==d&&Wt(e,n,_,f,o,d)}gs(e,j,Q);return;case"option":for(var yt in s)if(j=s[yt],s.hasOwnProperty(yt)&&j!=null&&!o.hasOwnProperty(yt))switch(yt){case"selected":e.selected=!1;break;default:Wt(e,n,yt,null,o,j)}for(C in o)if(j=o[C],Q=s[C],o.hasOwnProperty(C)&&j!==Q&&(j!=null||Q!=null))switch(C){case"selected":e.selected=j&&typeof j!="function"&&typeof j!="symbol";break;default:Wt(e,n,C,j,o,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ct in s)j=s[Ct],s.hasOwnProperty(Ct)&&j!=null&&!o.hasOwnProperty(Ct)&&Wt(e,n,Ct,null,o,j);for(L in o)if(j=o[L],Q=s[L],o.hasOwnProperty(L)&&j!==Q&&(j!=null||Q!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(a(137,n));break;default:Wt(e,n,L,j,o,Q)}return;default:if(go(n)){for(var pe in s)j=s[pe],s.hasOwnProperty(pe)&&j!==void 0&&!o.hasOwnProperty(pe)&&Bh(e,n,pe,void 0,o,j);for(Y in o)j=o[Y],Q=s[Y],!o.hasOwnProperty(Y)||j===Q||j===void 0&&Q===void 0||Bh(e,n,Y,j,o,Q);return}}for(var z in s)j=s[z],s.hasOwnProperty(z)&&j!=null&&!o.hasOwnProperty(z)&&Wt(e,n,z,null,o,j);for(tt in o)j=o[tt],Q=s[tt],!o.hasOwnProperty(tt)||j===Q||j==null&&Q==null||Wt(e,n,tt,j,o,Q)}var jh=null,qh=null;function qu(e){return e.nodeType===9?e:e.ownerDocument}function Sy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ay(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Hh(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Fh=null;function vb(){var e=window.event;return e&&e.type==="popstate"?e===Fh?!1:(Fh=e,!0):(Fh=null,!1)}var wy=typeof setTimeout=="function"?setTimeout:void 0,_b=typeof clearTimeout=="function"?clearTimeout:void 0,Ry=typeof Promise=="function"?Promise:void 0,Eb=typeof queueMicrotask=="function"?queueMicrotask:typeof Ry<"u"?function(e){return Ry.resolve(null).then(e).catch(Tb)}:wy;function Tb(e){setTimeout(function(){throw e})}function Gh(e,n){var s=n,o=0;do{var f=s.nextSibling;if(e.removeChild(s),f&&f.nodeType===8)if(s=f.data,s==="/$"){if(o===0){e.removeChild(f),ol(n);return}o--}else s!=="$"&&s!=="$?"&&s!=="$!"||o++;s=f}while(s);ol(n)}function Qh(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var s=n;switch(n=n.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Qh(s),hs(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function bb(e,n,s,o){for(;e.nodeType===1;){var f=s;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[Tr])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==f.rel||e.getAttribute("href")!==(f.href==null?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=ci(e.nextSibling),e===null)break}return null}function Sb(e,n,s){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=ci(e.nextSibling),e===null))return null;return e}function ci(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return e}function Cy(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return e;n--}else s==="/$"&&n++}e=e.previousSibling}return null}function Dy(e,n,s){switch(n=qu(s),e){case"html":if(e=n.documentElement,!e)throw Error(a(452));return e;case"head":if(e=n.head,!e)throw Error(a(453));return e;case"body":if(e=n.body,!e)throw Error(a(454));return e;default:throw Error(a(451))}}var ei=new Map,Iy=new Set;function Hu(e){return typeof e.getRootNode=="function"?e.getRootNode():e.ownerDocument}var cr=at.d;at.d={f:Ab,r:wb,D:Rb,C:Cb,L:Db,m:Ib,X:Vb,S:xb,M:Ob};function Ab(){var e=cr.f(),n=Uu();return e||n}function wb(e){var n=qi(e);n!==null&&n.tag===5&&n.type==="form"?np(n):cr.r(e)}var za=typeof document>"u"?null:document;function xy(e,n,s){var o=za;if(o&&typeof n=="string"&&n){var f=de(n);f='link[rel="'+e+'"][href="'+f+'"]',typeof s=="string"&&(f+='[crossorigin="'+s+'"]'),Iy.has(f)||(Iy.add(f),e={rel:e,crossOrigin:s,href:n},o.querySelector(f)===null&&(n=o.createElement("link"),rn(n,"link",e),le(n),o.head.appendChild(n)))}}function Rb(e){cr.D(e),xy("dns-prefetch",e,null)}function Cb(e,n){cr.C(e,n),xy("preconnect",e,n)}function Db(e,n,s){cr.L(e,n,s);var o=za;if(o&&e&&n){var f='link[rel="preload"][as="'+de(n)+'"]';n==="image"&&s&&s.imageSrcSet?(f+='[imagesrcset="'+de(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(f+='[imagesizes="'+de(s.imageSizes)+'"]')):f+='[href="'+de(e)+'"]';var d=f;switch(n){case"style":d=Pa(e);break;case"script":d=ka(e)}ei.has(d)||(e=D({rel:"preload",href:n==="image"&&s&&s.imageSrcSet?void 0:e,as:n},s),ei.set(d,e),o.querySelector(f)!==null||n==="style"&&o.querySelector(tl(d))||n==="script"&&o.querySelector(el(d))||(n=o.createElement("link"),rn(n,"link",e),le(n),o.head.appendChild(n)))}}function Ib(e,n){cr.m(e,n);var s=za;if(s&&e){var o=n&&typeof n.as=="string"?n.as:"script",f='link[rel="modulepreload"][as="'+de(o)+'"][href="'+de(e)+'"]',d=f;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=ka(e)}if(!ei.has(d)&&(e=D({rel:"modulepreload",href:e},n),ei.set(d,e),s.querySelector(f)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(el(d)))return}o=s.createElement("link"),rn(o,"link",e),le(o),s.head.appendChild(o)}}}function xb(e,n,s){cr.S(e,n,s);var o=za;if(o&&e){var f=Sr(o).hoistableStyles,d=Pa(e);n=n||"default";var _=f.get(d);if(!_){var T={loading:0,preload:null};if(_=o.querySelector(tl(d)))T.loading=5;else{e=D({rel:"stylesheet",href:e,"data-precedence":n},s),(s=ei.get(d))&&Yh(e,s);var C=_=o.createElement("link");le(C),rn(C,"link",e),C._p=new Promise(function(L,Y){C.onload=L,C.onerror=Y}),C.addEventListener("load",function(){T.loading|=1}),C.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Fu(_,n,o)}_={type:"stylesheet",instance:_,count:1,state:T},f.set(d,_)}}}function Vb(e,n){cr.X(e,n);var s=za;if(s&&e){var o=Sr(s).hoistableScripts,f=ka(e),d=o.get(f);d||(d=s.querySelector(el(f)),d||(e=D({src:e,async:!0},n),(n=ei.get(f))&&Kh(e,n),d=s.createElement("script"),le(d),rn(d,"link",e),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(f,d))}}function Ob(e,n){cr.M(e,n);var s=za;if(s&&e){var o=Sr(s).hoistableScripts,f=ka(e),d=o.get(f);d||(d=s.querySelector(el(f)),d||(e=D({src:e,async:!0,type:"module"},n),(n=ei.get(f))&&Kh(e,n),d=s.createElement("script"),le(d),rn(d,"link",e),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(f,d))}}function Vy(e,n,s,o){var f=(f=Ce.current)?Hu(f):null;if(!f)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(n=Pa(s.href),s=Sr(f).hoistableStyles,o=s.get(n),o||(o={type:"style",instance:null,count:0,state:null},s.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=Pa(s.href);var d=Sr(f).hoistableStyles,_=d.get(e);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,_),(d=f.querySelector(tl(e)))&&!d._p&&(_.instance=d,_.state.loading=5),ei.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},ei.set(e,s),d||Mb(f,e,s,_.state))),n&&o===null)throw Error(a(528,""));return _}if(n&&o!==null)throw Error(a(529,""));return null;case"script":return n=s.async,s=s.src,typeof s=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=ka(s),s=Sr(f).hoistableScripts,o=s.get(n),o||(o={type:"script",instance:null,count:0,state:null},s.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Pa(e){return'href="'+de(e)+'"'}function tl(e){return'link[rel="stylesheet"]['+e+"]"}function Oy(e){return D({},e,{"data-precedence":e.precedence,precedence:null})}function Mb(e,n,s,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),rn(n,"link",s),le(n),e.head.appendChild(n))}function ka(e){return'[src="'+de(e)+'"]'}function el(e){return"script[async]"+e}function My(e,n,s){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+de(s.href)+'"]');if(o)return n.instance=o,le(o),o;var f=D({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),le(o),rn(o,"style",f),Fu(o,s.precedence,e),n.instance=o;case"stylesheet":f=Pa(s.href);var d=e.querySelector(tl(f));if(d)return n.state.loading|=4,n.instance=d,le(d),d;o=Oy(s),(f=ei.get(f))&&Yh(o,f),d=(e.ownerDocument||e).createElement("link"),le(d);var _=d;return _._p=new Promise(function(T,C){_.onload=T,_.onerror=C}),rn(d,"link",o),n.state.loading|=4,Fu(d,s.precedence,e),n.instance=d;case"script":return d=ka(s.src),(f=e.querySelector(el(d)))?(n.instance=f,le(f),f):(o=s,(f=ei.get(d))&&(o=D({},s),Kh(o,f)),e=e.ownerDocument||e,f=e.createElement("script"),le(f),rn(f,"link",o),e.head.appendChild(f),n.instance=f);case"void":return null;default:throw Error(a(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,Fu(o,s.precedence,e));return n.instance}function Fu(e,n,s){for(var o=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=o.length?o[o.length-1]:null,d=f,_=0;_<o.length;_++){var T=o[_];if(T.dataset.precedence===n)d=T;else if(d!==f)break}d?d.parentNode.insertBefore(e,d.nextSibling):(n=s.nodeType===9?s.head:s,n.insertBefore(e,n.firstChild))}function Yh(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Kh(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Gu=null;function Ny(e,n,s){if(Gu===null){var o=new Map,f=Gu=new Map;f.set(s,o)}else f=Gu,o=f.get(s),o||(o=new Map,f.set(s,o));if(o.has(e))return o;for(o.set(e,null),s=s.getElementsByTagName(e),f=0;f<s.length;f++){var d=s[f];if(!(d[Tr]||d[he]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(n)||"";_=e+_;var T=o.get(_);T?T.push(d):o.set(_,[d])}}return o}function Uy(e,n,s){e=e.ownerDocument||e,e.head.insertBefore(s,n==="title"?e.querySelector("head > title"):null)}function Nb(e,n,s){if(s===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Ly(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var nl=null;function Ub(){}function Lb(e,n,s){if(nl===null)throw Error(a(475));var o=nl;if(n.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var f=Pa(s.href),d=e.querySelector(tl(f));if(d){e=d._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(o.count++,o=Qu.bind(o),e.then(o,o)),n.state.loading|=4,n.instance=d,le(d);return}d=e.ownerDocument||e,s=Oy(s),(f=ei.get(f))&&Yh(s,f),d=d.createElement("link"),le(d);var _=d;_._p=new Promise(function(T,C){_.onload=T,_.onerror=C}),rn(d,"link",s),n.instance=d}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(n,e),(e=n.state.preload)&&(n.state.loading&3)===0&&(o.count++,n=Qu.bind(o),e.addEventListener("load",n),e.addEventListener("error",n))}}function zb(){if(nl===null)throw Error(a(475));var e=nl;return e.stylesheets&&e.count===0&&Xh(e,e.stylesheets),0<e.count?function(n){var s=setTimeout(function(){if(e.stylesheets&&Xh(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(s)}}:null}function Qu(){if(this.count--,this.count===0){if(this.stylesheets)Xh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Yu=null;function Xh(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Yu=new Map,n.forEach(Pb,e),Yu=null,Qu.call(e))}function Pb(e,n){if(!(n.state.loading&4)){var s=Yu.get(e);if(s)var o=s.get(null);else{s=new Map,Yu.set(e,s);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var _=f[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(s.set(_.dataset.precedence,_),o=_)}o&&s.set(null,o)}f=n.instance,_=f.getAttribute("data-precedence"),d=s.get(_)||o,d===o&&s.set(null,f),s.set(_,f),this.count++,o=Qu.bind(this),f.addEventListener("load",o),f.addEventListener("error",o),d?d.parentNode.insertBefore(f,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),n.state.loading|=4}}var il={$$typeof:V,Provider:null,Consumer:null,_currentValue:At,_currentValue2:At,_threadCount:0};function kb(e,n,s,o,f,d,_,T){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=In(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=In(0),this.hiddenUpdates=In(null),this.identifierPrefix=o,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function zy(e,n,s,o,f,d,_,T,C,L,Y,tt){return e=new kb(e,n,s,_,T,C,L,tt),n=1,d===!0&&(n|=24),d=Jn(3,null,null,n),e.current=d,d.stateNode=e,n=Cf(),n.refCount++,e.pooledCache=n,n.refCount++,d.memoizedState={element:o,isDehydrated:s,cache:n},oh(d),e}function Py(e){return e?(e=ya,e):ya}function ky(e,n,s,o,f,d){f=Py(f),o.context===null?o.context=f:o.pendingContext=f,o=Lr(n),o.payload={element:s},d=d===void 0?null:d,d!==null&&(o.callback=d),s=zr(e,o,n),s!==null&&(Tn(s,e,n),Bo(s,e,n))}function By(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function $h(e,n){By(e,n),(e=e.alternate)&&By(e,n)}function jy(e){if(e.tag===13){var n=Ir(e,67108864);n!==null&&Tn(n,e,67108864),$h(e,67108864)}}var Ku=!0;function Bb(e,n,s,o){var f=S.T;S.T=null;var d=at.p;try{at.p=2,Zh(e,n,s,o)}finally{at.p=d,S.T=f}}function jb(e,n,s,o){var f=S.T;S.T=null;var d=at.p;try{at.p=8,Zh(e,n,s,o)}finally{at.p=d,S.T=f}}function Zh(e,n,s,o){if(Ku){var f=Wh(o);if(f===null)kh(e,n,o,Xu,s),Hy(e,o);else if(Hb(f,e,n,s,o))o.stopPropagation();else if(Hy(e,o),n&4&&-1<qb.indexOf(e)){for(;f!==null;){var d=qi(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=ae(d.pendingLanes);if(_!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var C=1<<31-Ze(_);T.entanglements[1]|=C,_&=~C}Oi(d),(ce&6)===0&&(Ou=$e()+500,Zo(0))}}break;case 13:T=Ir(d,2),T!==null&&Tn(T,d,2),Uu(),$h(d,2)}if(d=Wh(o),d===null&&kh(e,n,o,Xu,s),d===f)break;f=d}f!==null&&o.stopPropagation()}else kh(e,n,o,null,s)}}function Wh(e){return e=sa(e),Jh(e)}var Xu=null;function Jh(e){if(Xu=null,e=ai(e),e!==null){var n=mt(e);if(n===null)e=null;else{var s=n.tag;if(s===13){if(e=ut(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Xu=e,null}function qy(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ws()){case ve:return 2;case re:return 8;case cn:case gi:return 32;case _r:return 268435456;default:return 32}default:return 32}}var td=!1,Fr=null,Gr=null,Qr=null,rl=new Map,sl=new Map,Yr=[],qb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Hy(e,n){switch(e){case"focusin":case"focusout":Fr=null;break;case"dragenter":case"dragleave":Gr=null;break;case"mouseover":case"mouseout":Qr=null;break;case"pointerover":case"pointerout":rl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":sl.delete(n.pointerId)}}function al(e,n,s,o,f,d){return e===null||e.nativeEvent!==d?(e={blockedOn:n,domEventName:s,eventSystemFlags:o,nativeEvent:d,targetContainers:[f]},n!==null&&(n=qi(n),n!==null&&jy(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,f!==null&&n.indexOf(f)===-1&&n.push(f),e)}function Hb(e,n,s,o,f){switch(n){case"focusin":return Fr=al(Fr,e,n,s,o,f),!0;case"dragenter":return Gr=al(Gr,e,n,s,o,f),!0;case"mouseover":return Qr=al(Qr,e,n,s,o,f),!0;case"pointerover":var d=f.pointerId;return rl.set(d,al(rl.get(d)||null,e,n,s,o,f)),!0;case"gotpointercapture":return d=f.pointerId,sl.set(d,al(sl.get(d)||null,e,n,s,o,f)),!0}return!1}function Fy(e){var n=ai(e.target);if(n!==null){var s=mt(n);if(s!==null){if(n=s.tag,n===13){if(n=ut(s),n!==null){e.blockedOn=n,Je(e.priority,function(){if(s.tag===13){var o=zn(),f=Ir(s,o);f!==null&&Tn(f,s,o),$h(s,o)}});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $u(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=Wh(e.nativeEvent);if(s===null){s=e.nativeEvent;var o=new s.constructor(s.type,s);Hn=o,s.target.dispatchEvent(o),Hn=null}else return n=qi(s),n!==null&&jy(n),e.blockedOn=s,!1;n.shift()}return!0}function Gy(e,n,s){$u(e)&&s.delete(n)}function Fb(){td=!1,Fr!==null&&$u(Fr)&&(Fr=null),Gr!==null&&$u(Gr)&&(Gr=null),Qr!==null&&$u(Qr)&&(Qr=null),rl.forEach(Gy),sl.forEach(Gy)}function Zu(e,n){e.blockedOn===n&&(e.blockedOn=null,td||(td=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Fb)))}var Wu=null;function Qy(e){Wu!==e&&(Wu=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Wu===e&&(Wu=null);for(var n=0;n<e.length;n+=3){var s=e[n],o=e[n+1],f=e[n+2];if(typeof o!="function"){if(Jh(o||s)===null)continue;break}var d=qi(s);d!==null&&(e.splice(n,3),n-=3,Hf(d,{pending:!0,data:f,method:s.method,action:o},o,f))}}))}function ol(e){function n(C){return Zu(C,e)}Fr!==null&&Zu(Fr,e),Gr!==null&&Zu(Gr,e),Qr!==null&&Zu(Qr,e),rl.forEach(n),sl.forEach(n);for(var s=0;s<Yr.length;s++){var o=Yr[s];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Yr.length&&(s=Yr[0],s.blockedOn===null);)Fy(s),s.blockedOn===null&&Yr.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(o=0;o<s.length;o+=3){var f=s[o],d=s[o+1],_=f[Oe]||null;if(typeof d=="function")_||Qy(s);else if(_){var T=null;if(d&&d.hasAttribute("formAction")){if(f=d,_=d[Oe]||null)T=_.formAction;else if(Jh(f)!==null)continue}else T=_.action;typeof T=="function"?s[o+1]=T:(s.splice(o,3),o-=3),Qy(s)}}}function ed(e){this._internalRoot=e}Ju.prototype.render=ed.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(a(409));var s=n.current,o=zn();ky(s,o,e,n,null,null)},Ju.prototype.unmount=ed.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;e.tag===0&&Na(),ky(e.current,2,null,e,null,null),Uu(),n[ji]=null}};function Ju(e){this._internalRoot=e}Ju.prototype.unstable_scheduleHydration=function(e){if(e){var n=_i();e={blockedOn:null,target:e,priority:n};for(var s=0;s<Yr.length&&n!==0&&n<Yr[s].priority;s++);Yr.splice(s,0,e),s===0&&Fy(e)}};var Yy=t.version;if(Yy!=="19.0.0")throw Error(a(527,Yy,"19.0.0"));at.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=W(n),e=e!==null?ot(e):null,e=e===null?null:e.stateNode,e};var Gb={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:S,findFiberByHostInstance:ai,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tc.isDisabled&&tc.supportsFiber)try{yi=tc.inject(Gb),je=tc}catch{}}return ul.createRoot=function(e,n){if(!l(e))throw Error(a(299));var s=!1,o="",f=cp,d=fp,_=hp,T=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(f=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(_=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(T=n.unstable_transitionCallbacks)),n=zy(e,1,!1,null,null,s,o,f,d,_,T,null),e[ji]=n.current,Ph(e.nodeType===8?e.parentNode:e),new ed(n)},ul.hydrateRoot=function(e,n,s){if(!l(e))throw Error(a(299));var o=!1,f="",d=cp,_=fp,T=hp,C=null,L=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(C=s.unstable_transitionCallbacks),s.formState!==void 0&&(L=s.formState)),n=zy(e,1,!0,n,s??null,o,f,d,_,T,C,L),n.context=Py(null),s=n.current,o=zn(),f=Lr(o),f.callback=null,zr(s,f,o),n.current.lanes=o,Ot(n,o),Oi(n),e[ji]=n.current,Ph(e),new Ju(n)},ul.version="19.0.0",ul}var iv;function eS(){if(iv)return rd.exports;iv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),rd.exports=tS(),rd.exports}var nS=eS();const iS=[{date:"2025-04-01",name:"April 1, 2025",comparative:{id:"comp-countries-gdp",name:"Countries by GDP",description:"Compare countries by their GDP (in trillions USD)",attribute:"GDP (trillions USD)",items:[{id:"usa",name:"United States",value:25.46},{id:"china",name:"China",value:18.32},{id:"japan",name:"Japan",value:4.41},{id:"germany",name:"Germany",value:4.31},{id:"uk",name:"United Kingdom",value:3.33},{id:"india",name:"India",value:3.73},{id:"france",name:"France",value:3.05},{id:"italy",name:"Italy",value:2.19}]},sequence:{id:"seq-animals-speed",prompt:"Order these animals by top speed",leftLabel:"Slowest",rightLabel:"Fastest",items:[{shortText:"Cheetah",displayValue:"120 km/h"},{shortText:"Pronghorn Antelope",displayValue:"98 km/h"},{shortText:"Springbok",displayValue:"88 km/h"},{shortText:"Wildebeest",displayValue:"80 km/h"},{shortText:"Lion",displayValue:"80 km/h"}]},survey:{id:"q1",question:"How many sandwiches do you make per year?",unit:"sandwiches"}},{date:"2025-04-02",name:"April 2, 2025",comparative:{id:"comp-countries-gdp",name:"Countries by GDP",description:"Compare countries by their GDP (in trillions USD)",attribute:"GDP (trillions USD)",items:[{id:"usa",name:"United States",value:25.46},{id:"china",name:"China",value:18.32},{id:"japan",name:"Japan",value:4.41},{id:"germany",name:"Germany",value:4.31},{id:"uk",name:"United Kingdom",value:3.33},{id:"india",name:"India",value:3.73},{id:"france",name:"France",value:3.05},{id:"italy",name:"Italy",value:2.19}]},survey:{id:"q2",question:"How many hours of sleep do you get on an average night?",unit:"hours"}},{date:"2025-04-03",name:"April 3, 2025",comparative:{id:"comp-movies-boxoffice",name:"Movies by Box Office",description:"Compare movies by their worldwide box office (in billions USD)",attribute:"box office (billions USD)",items:[{id:"avatar",name:"Avatar",value:2.92},{id:"avengers-endgame",name:"Avengers: Endgame",value:2.8},{id:"titanic",name:"Titanic",value:2.26},{id:"star-wars-force-awakens",name:"Star Wars: The Force Awakens",value:2.07},{id:"avengers-infinity-war",name:"Avengers: Infinity War",value:2.05},{id:"spider-man-no-way-home",name:"Spider-Man: No Way Home",value:1.92},{id:"jurassic-world",name:"Jurassic World",value:1.67},{id:"the-lion-king",name:"The Lion King (2019)",value:1.66}]},sequence:{id:"seq-mountains-height",prompt:"Order these mountains by height",leftLabel:"Shortest",rightLabel:"Tallest",items:[{shortText:"Mount Everest",displayValue:"8,849 m"},{shortText:"K2",displayValue:"8,611 m"},{shortText:"Kangchenjunga",displayValue:"8,586 m"},{shortText:"Lhotse",displayValue:"8,516 m"},{shortText:"Makalu",displayValue:"8,485 m"}]},survey:{id:"q3",question:"How many cups of coffee/tea do you drink per day?",unit:"cups"}},{date:"2025-04-04",name:"April 4, 2025",comparative:{id:"comp-planets-diameter",name:"Planets by Diameter",description:"Compare planets by their diameter (in km)",attribute:"diameter (km)",items:[{id:"jupiter",name:"Jupiter",value:139820},{id:"saturn",name:"Saturn",value:116460},{id:"uranus",name:"Uranus",value:50724},{id:"neptune",name:"Neptune",value:49244},{id:"earth",name:"Earth",value:12742},{id:"venus",name:"Venus",value:12104},{id:"mars",name:"Mars",value:6779},{id:"mercury",name:"Mercury",value:4879}]},survey:{id:"q4",question:"How many minutes are you willing to sitthrough the movie credits",unit:"minutes"}},{date:"2025-04-05",name:"April 5, 2025",comparative:{id:"comp-planets-diameter",name:"Planets by Diameter",description:"Compare planets by their diameter (in km)",attribute:"diameter (km)",items:[{id:"jupiter",name:"Jupiter",value:139820},{id:"saturn",name:"Saturn",value:116460},{id:"uranus",name:"Uranus",value:50724},{id:"neptune",name:"Neptune",value:49244},{id:"earth",name:"Earth",value:12742},{id:"venus",name:"Venus",value:12104},{id:"mars",name:"Mars",value:6779},{id:"mercury",name:"Mercury",value:4879}]},survey:{id:"q5",question:"How many chuggas before choo choo",unit:"chuggas"}},{date:"2025-04-06",name:"April 6, 2025",comparative:{id:"comp-planets-diameter",name:"Planets by Diameter",description:"Compare planets by their diameter (in km)",attribute:"diameter (km)",items:[{id:"jupiter",name:"Jupiter",value:139820},{id:"saturn",name:"Saturn",value:116460},{id:"uranus",name:"Uranus",value:50724},{id:"neptune",name:"Neptune",value:49244},{id:"earth",name:"Earth",value:12742},{id:"venus",name:"Venus",value:12104},{id:"mars",name:"Mars",value:6779},{id:"mercury",name:"Mercury",value:4879}]},survey:{id:"q6",question:"How many months since you've had a tootsie roll",unit:"months"}},{date:"2025-04-07",name:"April 7, 2025",comparative:{id:"comp-planets-diameter",name:"Planets by Diameter",description:"Compare planets by their diameter (in km)",attribute:"diameter (km)",items:[{id:"jupiter",name:"Jupiter",value:139820},{id:"saturn",name:"Saturn",value:116460},{id:"uranus",name:"Uranus",value:50724},{id:"neptune",name:"Neptune",value:49244},{id:"earth",name:"Earth",value:12742},{id:"venus",name:"Venus",value:12104},{id:"mars",name:"Mars",value:6779},{id:"mercury",name:"Mercury",value:4879}]},survey:{id:"q7",question:"What's your bedtime?",unit:"time"}},{date:"2025-04-08",name:"April 8, 2025",comparative:{id:"comp-planets-diameter",name:"Planets by Diameter",description:"Compare planets by their diameter (in km)",attribute:"diameter (km)",items:[{id:"jupiter",name:"Jupiter",value:139820},{id:"saturn",name:"Saturn",value:116460},{id:"uranus",name:"Uranus",value:50724},{id:"neptune",name:"Neptune",value:49244},{id:"earth",name:"Earth",value:12742},{id:"venus",name:"Venus",value:12104},{id:"mars",name:"Mars",value:6779},{id:"mercury",name:"Mercury",value:4879}]},survey:{id:"q8",question:"What percentage of your phone contacts don't have a last name entered?",unit:"percentage"}},{date:"2025-04-09",name:"April 9, 2025",comparative:{id:"comp-planets-diameter",name:"Planets by Diameter",description:"Compare planets by their diameter (in km)",attribute:"diameter (km)",items:[{id:"jupiter",name:"Jupiter",value:139820},{id:"saturn",name:"Saturn",value:116460},{id:"uranus",name:"Uranus",value:50724},{id:"neptune",name:"Neptune",value:49244},{id:"earth",name:"Earth",value:12742},{id:"venus",name:"Venus",value:12104},{id:"mars",name:"Mars",value:6779},{id:"mercury",name:"Mercury",value:4879}]},survey:{id:"q9",question:"How many dollars would it take to get you to eat a monarch butterfly?",unit:"dollars"}}],rS={dailyContent:iS},sS=()=>{};var rv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_=function(r){const t=[];let i=0;for(let a=0;a<r.length;a++){let l=r.charCodeAt(a);l<128?t[i++]=l:l<2048?(t[i++]=l>>6|192,t[i++]=l&63|128):(l&64512)===55296&&a+1<r.length&&(r.charCodeAt(a+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++a)&1023),t[i++]=l>>18|240,t[i++]=l>>12&63|128,t[i++]=l>>6&63|128,t[i++]=l&63|128):(t[i++]=l>>12|224,t[i++]=l>>6&63|128,t[i++]=l&63|128)}return t},aS=function(r){const t=[];let i=0,a=0;for(;i<r.length;){const l=r[i++];if(l<128)t[a++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[i++];t[a++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[i++],h=r[i++],m=r[i++],p=((l&7)<<18|(c&63)<<12|(h&63)<<6|m&63)-65536;t[a++]=String.fromCharCode(55296+(p>>10)),t[a++]=String.fromCharCode(56320+(p&1023))}else{const c=r[i++],h=r[i++];t[a++]=String.fromCharCode((l&15)<<12|(c&63)<<6|h&63)}}return t.join("")},k_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let l=0;l<r.length;l+=3){const c=r[l],h=l+1<r.length,m=h?r[l+1]:0,p=l+2<r.length,y=p?r[l+2]:0,E=c>>2,A=(c&3)<<4|m>>4;let I=(m&15)<<2|y>>6,V=y&63;p||(V=64,h||(I=64)),a.push(i[E],i[A],i[I],i[V])}return a.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(P_(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):aS(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let l=0;l<r.length;){const c=i[r.charAt(l++)],m=l<r.length?i[r.charAt(l)]:0;++l;const y=l<r.length?i[r.charAt(l)]:64;++l;const A=l<r.length?i[r.charAt(l)]:64;if(++l,c==null||m==null||y==null||A==null)throw new oS;const I=c<<2|m>>4;if(a.push(I),y!==64){const V=m<<4&240|y>>2;if(a.push(V),A!==64){const H=y<<6&192|A;a.push(H)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class oS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lS=function(r){const t=P_(r);return k_.encodeByteArray(t,!0)},pc=function(r){return lS(r).replace(/\./g,"")},uS=function(r){try{return k_.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS=()=>cS().__FIREBASE_DEFAULTS__,hS=()=>{if(typeof process>"u"||typeof rv>"u")return;const r=rv.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},dS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&uS(r[1]);return t&&JSON.parse(t)},Wd=()=>{try{return sS()||fS()||hS()||dS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},mS=r=>{var t,i;return(i=(t=Wd())===null||t===void 0?void 0:t.emulatorHosts)===null||i===void 0?void 0:i[r]},gS=r=>{const t=mS(r);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const a=parseInt(t.substring(i+1),10);return t[0]==="["?[t.substring(1,i-1),a]:[t.substring(0,i),a]},B_=()=>{var r;return(r=Wd())===null||r===void 0?void 0:r.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,a)=>{i?this.reject(i):this.resolve(a),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,a))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},a=t||"demo-project",l=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${a}`,aud:a,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},r);return[pc(JSON.stringify(i)),pc(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _S(){var r;const t=(r=Wd())===null||r===void 0?void 0:r.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ES(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function TS(){return!_S()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function j_(){try{return typeof indexedDB=="object"}catch{return!1}}function q_(){return new Promise((r,t)=>{try{let i=!0;const a="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(a);l.onsuccess=()=>{l.result.close(),i||self.indexedDB.deleteDatabase(a),r(!0)},l.onupgradeneeded=()=>{i=!1},l.onerror=()=>{var c;t(((c=l.error)===null||c===void 0?void 0:c.message)||"")}}catch(i){t(i)}})}function bS(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS="FirebaseError";class cs extends Error{constructor(t,i,a){super(i),this.code=t,this.customData=a,this.name=SS,Object.setPrototypeOf(this,cs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zc.prototype.create)}}class zc{constructor(t,i,a){this.service=t,this.serviceName=i,this.errors=a}create(t,...i){const a=i[0]||{},l=`${this.service}/${t}`,c=this.errors[t],h=c?AS(c,a):"Error",m=`${this.serviceName}: ${h} (${l}).`;return new cs(l,m,a)}}function AS(r,t){return r.replace(wS,(i,a)=>{const l=t[a];return l!=null?String(l):`<${a}?>`})}const wS=/\{\$([^}]+)}/g;function bl(r,t){if(r===t)return!0;const i=Object.keys(r),a=Object.keys(t);for(const l of i){if(!a.includes(l))return!1;const c=r[l],h=t[l];if(sv(c)&&sv(h)){if(!bl(c,h))return!1}else if(c!==h)return!1}for(const l of a)if(!i.includes(l))return!1;return!0}function sv(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=1e3,CS=2,DS=4*60*60*1e3,IS=.5;function av(r,t=RS,i=CS){const a=t*Math.pow(i,r),l=Math.round(IS*a*(Math.random()-.5)*2);return Math.min(DS,a+l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(r){return r&&r._delegate?r._delegate:r}class hr{constructor(t,i,a){this.name=t,this.instanceFactory=i,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const a=new pS;if(this.instancesDeferred.set(i,a),this.isInitialized(i)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:i});l&&a.resolve(l)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){var i;const a=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),l=(i=t==null?void 0:t.optional)!==null&&i!==void 0?i:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(c){if(l)return null;throw c}else{if(l)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(OS(t))try{this.getOrInitializeService({instanceIdentifier:js})}catch{}for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);try{const c=this.getOrInitializeService({instanceIdentifier:l});a.resolve(c)}catch{}}}}clearInstance(t=js){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=js){return this.instances.has(t)}getOptions(t=js){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:a,options:i});for(const[c,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);a===m&&h.resolve(l)}return l}onInit(t,i){var a;const l=this.normalizeInstanceIdentifier(i),c=(a=this.onInitCallbacks.get(l))!==null&&a!==void 0?a:new Set;c.add(t),this.onInitCallbacks.set(l,c);const h=this.instances.get(l);return h&&t(h,l),()=>{c.delete(t)}}invokeOnInitCallbacks(t,i){const a=this.onInitCallbacks.get(i);if(a)for(const l of a)try{l(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let a=this.instances.get(t);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:VS(t),options:i}),this.instances.set(t,a),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(a,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,a)}catch{}return a||null}normalizeInstanceIdentifier(t=js){return this.component?this.component.multipleInstances?t:js:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function VS(r){return r===js?void 0:r}function OS(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new xS(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ht||(Ht={}));const NS={debug:Ht.DEBUG,verbose:Ht.VERBOSE,info:Ht.INFO,warn:Ht.WARN,error:Ht.ERROR,silent:Ht.SILENT},US=Ht.INFO,LS={[Ht.DEBUG]:"log",[Ht.VERBOSE]:"log",[Ht.INFO]:"info",[Ht.WARN]:"warn",[Ht.ERROR]:"error"},zS=(r,t,...i)=>{if(t<r.logLevel)return;const a=new Date().toISOString(),l=LS[t];if(l)console[l](`[${a}]  ${r.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Jd{constructor(t){this.name=t,this._logLevel=US,this._logHandler=zS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ht))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?NS[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ht.DEBUG,...t),this._logHandler(this,Ht.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ht.VERBOSE,...t),this._logHandler(this,Ht.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ht.INFO,...t),this._logHandler(this,Ht.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ht.WARN,...t),this._logHandler(this,Ht.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ht.ERROR,...t),this._logHandler(this,Ht.ERROR,...t)}}const PS=(r,t)=>t.some(i=>r instanceof i);let ov,lv;function kS(){return ov||(ov=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BS(){return lv||(lv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const H_=new WeakMap,Sd=new WeakMap,F_=new WeakMap,ld=new WeakMap,tm=new WeakMap;function jS(r){const t=new Promise((i,a)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",h)},c=()=>{i(Zr(r.result)),l()},h=()=>{a(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",h)});return t.then(i=>{i instanceof IDBCursor&&H_.set(i,r)}).catch(()=>{}),tm.set(t,r),t}function qS(r){if(Sd.has(r))return;const t=new Promise((i,a)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",h),r.removeEventListener("abort",h)},c=()=>{i(),l()},h=()=>{a(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",h),r.addEventListener("abort",h)});Sd.set(r,t)}let Ad={get(r,t,i){if(r instanceof IDBTransaction){if(t==="done")return Sd.get(r);if(t==="objectStoreNames")return r.objectStoreNames||F_.get(r);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Zr(r[t])},set(r,t,i){return r[t]=i,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function HS(r){Ad=r(Ad)}function FS(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const a=r.call(ud(this),t,...i);return F_.set(a,t.sort?t.sort():[t]),Zr(a)}:BS().includes(r)?function(...t){return r.apply(ud(this),t),Zr(H_.get(this))}:function(...t){return Zr(r.apply(ud(this),t))}}function GS(r){return typeof r=="function"?FS(r):(r instanceof IDBTransaction&&qS(r),PS(r,kS())?new Proxy(r,Ad):r)}function Zr(r){if(r instanceof IDBRequest)return jS(r);if(ld.has(r))return ld.get(r);const t=GS(r);return t!==r&&(ld.set(r,t),tm.set(t,r)),t}const ud=r=>tm.get(r);function G_(r,t,{blocked:i,upgrade:a,blocking:l,terminated:c}={}){const h=indexedDB.open(r,t),m=Zr(h);return a&&h.addEventListener("upgradeneeded",p=>{a(Zr(h.result),p.oldVersion,p.newVersion,Zr(h.transaction),p)}),i&&h.addEventListener("blocked",p=>i(p.oldVersion,p.newVersion,p)),m.then(p=>{c&&p.addEventListener("close",()=>c()),l&&p.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const QS=["get","getKey","getAll","getAllKeys","count"],YS=["put","add","delete","clear"],cd=new Map;function uv(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(cd.get(t))return cd.get(t);const i=t.replace(/FromIndex$/,""),a=t!==i,l=YS.includes(i);if(!(i in(a?IDBIndex:IDBObjectStore).prototype)||!(l||QS.includes(i)))return;const c=async function(h,...m){const p=this.transaction(h,l?"readwrite":"readonly");let y=p.store;return a&&(y=y.index(m.shift())),(await Promise.all([y[i](...m),l&&p.done]))[0]};return cd.set(t,c),c}HS(r=>({...r,get:(t,i,a)=>uv(t,i)||r.get(t,i,a),has:(t,i)=>!!uv(t,i)||r.has(t,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(XS(i)){const a=i.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(i=>i).join(" ")}}function XS(r){const t=r.getComponent();return(t==null?void 0:t.type)==="VERSION"}const wd="@firebase/app",cv="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr=new Jd("@firebase/app"),$S="@firebase/app-compat",ZS="@firebase/analytics-compat",WS="@firebase/analytics",JS="@firebase/app-check-compat",tA="@firebase/app-check",eA="@firebase/auth",nA="@firebase/auth-compat",iA="@firebase/database",rA="@firebase/data-connect",sA="@firebase/database-compat",aA="@firebase/functions",oA="@firebase/functions-compat",lA="@firebase/installations",uA="@firebase/installations-compat",cA="@firebase/messaging",fA="@firebase/messaging-compat",hA="@firebase/performance",dA="@firebase/performance-compat",mA="@firebase/remote-config",gA="@firebase/remote-config-compat",pA="@firebase/storage",yA="@firebase/storage-compat",vA="@firebase/firestore",_A="@firebase/vertexai",EA="@firebase/firestore-compat",TA="firebase",bA="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd="[DEFAULT]",SA={[wd]:"fire-core",[$S]:"fire-core-compat",[WS]:"fire-analytics",[ZS]:"fire-analytics-compat",[tA]:"fire-app-check",[JS]:"fire-app-check-compat",[eA]:"fire-auth",[nA]:"fire-auth-compat",[iA]:"fire-rtdb",[rA]:"fire-data-connect",[sA]:"fire-rtdb-compat",[aA]:"fire-fn",[oA]:"fire-fn-compat",[lA]:"fire-iid",[uA]:"fire-iid-compat",[cA]:"fire-fcm",[fA]:"fire-fcm-compat",[hA]:"fire-perf",[dA]:"fire-perf-compat",[mA]:"fire-rc",[gA]:"fire-rc-compat",[pA]:"fire-gcs",[yA]:"fire-gcs-compat",[vA]:"fire-fst",[EA]:"fire-fst-compat",[_A]:"fire-vertex","fire-js":"fire-js",[TA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc=new Map,AA=new Map,Cd=new Map;function fv(r,t){try{r.container.addComponent(t)}catch(i){dr.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,i)}}function is(r){const t=r.name;if(Cd.has(t))return dr.debug(`There were multiple attempts to register component ${t}.`),!1;Cd.set(t,r);for(const i of yc.values())fv(i,r);for(const i of AA.values())fv(i,r);return!0}function Ol(r,t){const i=r.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),r.container.getProvider(t)}function wA(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wr=new zc("app","Firebase",RA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(t,i,a){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},i),this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new hr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Wr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA=bA;function Q_(r,t={}){let i=r;typeof t!="object"&&(t={name:t});const a=Object.assign({name:Rd,automaticDataCollectionEnabled:!1},t),l=a.name;if(typeof l!="string"||!l)throw Wr.create("bad-app-name",{appName:String(l)});if(i||(i=B_()),!i)throw Wr.create("no-options");const c=yc.get(l);if(c){if(bl(i,c.options)&&bl(a,c.config))return c;throw Wr.create("duplicate-app",{appName:l})}const h=new MS(l);for(const p of Cd.values())h.addComponent(p);const m=new CA(i,a,h);return yc.set(l,m),m}function Y_(r=Rd){const t=yc.get(r);if(!t&&r===Rd&&B_())return Q_();if(!t)throw Wr.create("no-app",{appName:r});return t}function Ni(r,t,i){var a;let l=(a=SA[r])!==null&&a!==void 0?a:r;i&&(l+=`-${i}`);const c=l.match(/\s|\//),h=t.match(/\s|\//);if(c||h){const m=[`Unable to register library "${l}" with version "${t}":`];c&&m.push(`library name "${l}" contains illegal characters (whitespace or "/")`),c&&h&&m.push("and"),h&&m.push(`version name "${t}" contains illegal characters (whitespace or "/")`),dr.warn(m.join(" "));return}is(new hr(`${l}-version`,()=>({library:l,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA="firebase-heartbeat-database",xA=1,Sl="firebase-heartbeat-store";let fd=null;function K_(){return fd||(fd=G_(IA,xA,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(Sl)}catch(i){console.warn(i)}}}}).catch(r=>{throw Wr.create("idb-open",{originalErrorMessage:r.message})})),fd}async function VA(r){try{const i=(await K_()).transaction(Sl),a=await i.objectStore(Sl).get(X_(r));return await i.done,a}catch(t){if(t instanceof cs)dr.warn(t.message);else{const i=Wr.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});dr.warn(i.message)}}}async function hv(r,t){try{const a=(await K_()).transaction(Sl,"readwrite");await a.objectStore(Sl).put(t,X_(r)),await a.done}catch(i){if(i instanceof cs)dr.warn(i.message);else{const a=Wr.create("idb-set",{originalErrorMessage:i==null?void 0:i.message});dr.warn(a.message)}}}function X_(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=1024,MA=30;class NA{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new LA(i),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var t,i;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=dv();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)===null||i===void 0?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(h=>h.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:l}),this._heartbeatsCache.heartbeats.length>MA){const h=zA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){dr.warn(a)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const i=dv(),{heartbeatsToSend:a,unsentEntries:l}=UA(this._heartbeatsCache.heartbeats),c=pc(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=i,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(i){return dr.warn(i),""}}}function dv(){return new Date().toISOString().substring(0,10)}function UA(r,t=OA){const i=[];let a=r.slice();for(const l of r){const c=i.find(h=>h.agent===l.agent);if(c){if(c.dates.push(l.date),mv(i)>t){c.dates.pop();break}}else if(i.push({agent:l.agent,dates:[l.date]}),mv(i)>t){i.pop();break}a=a.slice(1)}return{heartbeatsToSend:i,unsentEntries:a}}class LA{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return j_()?q_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await VA(this.app);return i!=null&&i.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var i;if(await this._canUseIndexedDBPromise){const l=await this.read();return hv(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:l.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var i;if(await this._canUseIndexedDBPromise){const l=await this.read();return hv(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:l.lastSentHeartbeatDate,heartbeats:[...l.heartbeats,...t.heartbeats]})}else return}}function mv(r){return pc(JSON.stringify({version:2,heartbeats:r})).length}function zA(r){if(r.length===0)return-1;let t=0,i=r[0].date;for(let a=1;a<r.length;a++)r[a].date<i&&(i=r[a].date,t=a);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(r){is(new hr("platform-logger",t=>new KS(t),"PRIVATE")),is(new hr("heartbeat",t=>new NA(t),"PRIVATE")),Ni(wd,cv,r),Ni(wd,cv,"esm2017"),Ni("fire-js","")}PA("");var kA="firebase",BA="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ni(kA,BA,"app");var gv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jr,$_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(O,w){function S(){}S.prototype=w.prototype,O.D=w.prototype,O.prototype=new S,O.prototype.constructor=O,O.C=function(D,M,N){for(var R=Array(arguments.length-2),bt=2;bt<arguments.length;bt++)R[bt-2]=arguments[bt];return w.prototype[M].apply(D,R)}}function i(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(a,i),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(O,w,S){S||(S=0);var D=Array(16);if(typeof w=="string")for(var M=0;16>M;++M)D[M]=w.charCodeAt(S++)|w.charCodeAt(S++)<<8|w.charCodeAt(S++)<<16|w.charCodeAt(S++)<<24;else for(M=0;16>M;++M)D[M]=w[S++]|w[S++]<<8|w[S++]<<16|w[S++]<<24;w=O.g[0],S=O.g[1],M=O.g[2];var N=O.g[3],R=w+(N^S&(M^N))+D[0]+3614090360&4294967295;w=S+(R<<7&4294967295|R>>>25),R=N+(M^w&(S^M))+D[1]+3905402710&4294967295,N=w+(R<<12&4294967295|R>>>20),R=M+(S^N&(w^S))+D[2]+606105819&4294967295,M=N+(R<<17&4294967295|R>>>15),R=S+(w^M&(N^w))+D[3]+3250441966&4294967295,S=M+(R<<22&4294967295|R>>>10),R=w+(N^S&(M^N))+D[4]+4118548399&4294967295,w=S+(R<<7&4294967295|R>>>25),R=N+(M^w&(S^M))+D[5]+1200080426&4294967295,N=w+(R<<12&4294967295|R>>>20),R=M+(S^N&(w^S))+D[6]+2821735955&4294967295,M=N+(R<<17&4294967295|R>>>15),R=S+(w^M&(N^w))+D[7]+4249261313&4294967295,S=M+(R<<22&4294967295|R>>>10),R=w+(N^S&(M^N))+D[8]+1770035416&4294967295,w=S+(R<<7&4294967295|R>>>25),R=N+(M^w&(S^M))+D[9]+2336552879&4294967295,N=w+(R<<12&4294967295|R>>>20),R=M+(S^N&(w^S))+D[10]+4294925233&4294967295,M=N+(R<<17&4294967295|R>>>15),R=S+(w^M&(N^w))+D[11]+2304563134&4294967295,S=M+(R<<22&4294967295|R>>>10),R=w+(N^S&(M^N))+D[12]+1804603682&4294967295,w=S+(R<<7&4294967295|R>>>25),R=N+(M^w&(S^M))+D[13]+4254626195&4294967295,N=w+(R<<12&4294967295|R>>>20),R=M+(S^N&(w^S))+D[14]+2792965006&4294967295,M=N+(R<<17&4294967295|R>>>15),R=S+(w^M&(N^w))+D[15]+1236535329&4294967295,S=M+(R<<22&4294967295|R>>>10),R=w+(M^N&(S^M))+D[1]+4129170786&4294967295,w=S+(R<<5&4294967295|R>>>27),R=N+(S^M&(w^S))+D[6]+3225465664&4294967295,N=w+(R<<9&4294967295|R>>>23),R=M+(w^S&(N^w))+D[11]+643717713&4294967295,M=N+(R<<14&4294967295|R>>>18),R=S+(N^w&(M^N))+D[0]+3921069994&4294967295,S=M+(R<<20&4294967295|R>>>12),R=w+(M^N&(S^M))+D[5]+3593408605&4294967295,w=S+(R<<5&4294967295|R>>>27),R=N+(S^M&(w^S))+D[10]+38016083&4294967295,N=w+(R<<9&4294967295|R>>>23),R=M+(w^S&(N^w))+D[15]+3634488961&4294967295,M=N+(R<<14&4294967295|R>>>18),R=S+(N^w&(M^N))+D[4]+3889429448&4294967295,S=M+(R<<20&4294967295|R>>>12),R=w+(M^N&(S^M))+D[9]+568446438&4294967295,w=S+(R<<5&4294967295|R>>>27),R=N+(S^M&(w^S))+D[14]+3275163606&4294967295,N=w+(R<<9&4294967295|R>>>23),R=M+(w^S&(N^w))+D[3]+4107603335&4294967295,M=N+(R<<14&4294967295|R>>>18),R=S+(N^w&(M^N))+D[8]+1163531501&4294967295,S=M+(R<<20&4294967295|R>>>12),R=w+(M^N&(S^M))+D[13]+2850285829&4294967295,w=S+(R<<5&4294967295|R>>>27),R=N+(S^M&(w^S))+D[2]+4243563512&4294967295,N=w+(R<<9&4294967295|R>>>23),R=M+(w^S&(N^w))+D[7]+1735328473&4294967295,M=N+(R<<14&4294967295|R>>>18),R=S+(N^w&(M^N))+D[12]+2368359562&4294967295,S=M+(R<<20&4294967295|R>>>12),R=w+(S^M^N)+D[5]+4294588738&4294967295,w=S+(R<<4&4294967295|R>>>28),R=N+(w^S^M)+D[8]+2272392833&4294967295,N=w+(R<<11&4294967295|R>>>21),R=M+(N^w^S)+D[11]+1839030562&4294967295,M=N+(R<<16&4294967295|R>>>16),R=S+(M^N^w)+D[14]+4259657740&4294967295,S=M+(R<<23&4294967295|R>>>9),R=w+(S^M^N)+D[1]+2763975236&4294967295,w=S+(R<<4&4294967295|R>>>28),R=N+(w^S^M)+D[4]+1272893353&4294967295,N=w+(R<<11&4294967295|R>>>21),R=M+(N^w^S)+D[7]+4139469664&4294967295,M=N+(R<<16&4294967295|R>>>16),R=S+(M^N^w)+D[10]+3200236656&4294967295,S=M+(R<<23&4294967295|R>>>9),R=w+(S^M^N)+D[13]+681279174&4294967295,w=S+(R<<4&4294967295|R>>>28),R=N+(w^S^M)+D[0]+3936430074&4294967295,N=w+(R<<11&4294967295|R>>>21),R=M+(N^w^S)+D[3]+3572445317&4294967295,M=N+(R<<16&4294967295|R>>>16),R=S+(M^N^w)+D[6]+76029189&4294967295,S=M+(R<<23&4294967295|R>>>9),R=w+(S^M^N)+D[9]+3654602809&4294967295,w=S+(R<<4&4294967295|R>>>28),R=N+(w^S^M)+D[12]+3873151461&4294967295,N=w+(R<<11&4294967295|R>>>21),R=M+(N^w^S)+D[15]+530742520&4294967295,M=N+(R<<16&4294967295|R>>>16),R=S+(M^N^w)+D[2]+3299628645&4294967295,S=M+(R<<23&4294967295|R>>>9),R=w+(M^(S|~N))+D[0]+4096336452&4294967295,w=S+(R<<6&4294967295|R>>>26),R=N+(S^(w|~M))+D[7]+1126891415&4294967295,N=w+(R<<10&4294967295|R>>>22),R=M+(w^(N|~S))+D[14]+2878612391&4294967295,M=N+(R<<15&4294967295|R>>>17),R=S+(N^(M|~w))+D[5]+4237533241&4294967295,S=M+(R<<21&4294967295|R>>>11),R=w+(M^(S|~N))+D[12]+1700485571&4294967295,w=S+(R<<6&4294967295|R>>>26),R=N+(S^(w|~M))+D[3]+2399980690&4294967295,N=w+(R<<10&4294967295|R>>>22),R=M+(w^(N|~S))+D[10]+4293915773&4294967295,M=N+(R<<15&4294967295|R>>>17),R=S+(N^(M|~w))+D[1]+2240044497&4294967295,S=M+(R<<21&4294967295|R>>>11),R=w+(M^(S|~N))+D[8]+1873313359&4294967295,w=S+(R<<6&4294967295|R>>>26),R=N+(S^(w|~M))+D[15]+4264355552&4294967295,N=w+(R<<10&4294967295|R>>>22),R=M+(w^(N|~S))+D[6]+2734768916&4294967295,M=N+(R<<15&4294967295|R>>>17),R=S+(N^(M|~w))+D[13]+1309151649&4294967295,S=M+(R<<21&4294967295|R>>>11),R=w+(M^(S|~N))+D[4]+4149444226&4294967295,w=S+(R<<6&4294967295|R>>>26),R=N+(S^(w|~M))+D[11]+3174756917&4294967295,N=w+(R<<10&4294967295|R>>>22),R=M+(w^(N|~S))+D[2]+718787259&4294967295,M=N+(R<<15&4294967295|R>>>17),R=S+(N^(M|~w))+D[9]+3951481745&4294967295,O.g[0]=O.g[0]+w&4294967295,O.g[1]=O.g[1]+(M+(R<<21&4294967295|R>>>11))&4294967295,O.g[2]=O.g[2]+M&4294967295,O.g[3]=O.g[3]+N&4294967295}a.prototype.u=function(O,w){w===void 0&&(w=O.length);for(var S=w-this.blockSize,D=this.B,M=this.h,N=0;N<w;){if(M==0)for(;N<=S;)l(this,O,N),N+=this.blockSize;if(typeof O=="string"){for(;N<w;)if(D[M++]=O.charCodeAt(N++),M==this.blockSize){l(this,D),M=0;break}}else for(;N<w;)if(D[M++]=O[N++],M==this.blockSize){l(this,D),M=0;break}}this.h=M,this.o+=w},a.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var w=1;w<O.length-8;++w)O[w]=0;var S=8*this.o;for(w=O.length-8;w<O.length;++w)O[w]=S&255,S/=256;for(this.u(O),O=Array(16),w=S=0;4>w;++w)for(var D=0;32>D;D+=8)O[S++]=this.g[w]>>>D&255;return O};function c(O,w){var S=m;return Object.prototype.hasOwnProperty.call(S,O)?S[O]:S[O]=w(O)}function h(O,w){this.h=w;for(var S=[],D=!0,M=O.length-1;0<=M;M--){var N=O[M]|0;D&&N==w||(S[M]=N,D=!1)}this.g=S}var m={};function p(O){return-128<=O&&128>O?c(O,function(w){return new h([w|0],0>w?-1:0)}):new h([O|0],0>O?-1:0)}function y(O){if(isNaN(O)||!isFinite(O))return A;if(0>O)return q(y(-O));for(var w=[],S=1,D=0;O>=S;D++)w[D]=O/S|0,S*=4294967296;return new h(w,0)}function E(O,w){if(O.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(O.charAt(0)=="-")return q(E(O.substring(1),w));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=y(Math.pow(w,8)),D=A,M=0;M<O.length;M+=8){var N=Math.min(8,O.length-M),R=parseInt(O.substring(M,M+N),w);8>N?(N=y(Math.pow(w,N)),D=D.j(N).add(y(R))):(D=D.j(S),D=D.add(y(R)))}return D}var A=p(0),I=p(1),V=p(16777216);r=h.prototype,r.m=function(){if(F(this))return-q(this).m();for(var O=0,w=1,S=0;S<this.g.length;S++){var D=this.i(S);O+=(0<=D?D:4294967296+D)*w,w*=4294967296}return O},r.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(H(this))return"0";if(F(this))return"-"+q(this).toString(O);for(var w=y(Math.pow(O,6)),S=this,D="";;){var M=ft(S,w).g;S=et(S,M.j(w));var N=((0<S.g.length?S.g[0]:S.h)>>>0).toString(O);if(S=M,H(S))return N+D;for(;6>N.length;)N="0"+N;D=N+D}},r.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function H(O){if(O.h!=0)return!1;for(var w=0;w<O.g.length;w++)if(O.g[w]!=0)return!1;return!0}function F(O){return O.h==-1}r.l=function(O){return O=et(this,O),F(O)?-1:H(O)?0:1};function q(O){for(var w=O.g.length,S=[],D=0;D<w;D++)S[D]=~O.g[D];return new h(S,~O.h).add(I)}r.abs=function(){return F(this)?q(this):this},r.add=function(O){for(var w=Math.max(this.g.length,O.g.length),S=[],D=0,M=0;M<=w;M++){var N=D+(this.i(M)&65535)+(O.i(M)&65535),R=(N>>>16)+(this.i(M)>>>16)+(O.i(M)>>>16);D=R>>>16,N&=65535,R&=65535,S[M]=R<<16|N}return new h(S,S[S.length-1]&-2147483648?-1:0)};function et(O,w){return O.add(q(w))}r.j=function(O){if(H(this)||H(O))return A;if(F(this))return F(O)?q(this).j(q(O)):q(q(this).j(O));if(F(O))return q(this.j(q(O)));if(0>this.l(V)&&0>O.l(V))return y(this.m()*O.m());for(var w=this.g.length+O.g.length,S=[],D=0;D<2*w;D++)S[D]=0;for(D=0;D<this.g.length;D++)for(var M=0;M<O.g.length;M++){var N=this.i(D)>>>16,R=this.i(D)&65535,bt=O.i(M)>>>16,It=O.i(M)&65535;S[2*D+2*M]+=R*It,X(S,2*D+2*M),S[2*D+2*M+1]+=N*It,X(S,2*D+2*M+1),S[2*D+2*M+1]+=R*bt,X(S,2*D+2*M+1),S[2*D+2*M+2]+=N*bt,X(S,2*D+2*M+2)}for(D=0;D<w;D++)S[D]=S[2*D+1]<<16|S[2*D];for(D=w;D<2*w;D++)S[D]=0;return new h(S,0)};function X(O,w){for(;(O[w]&65535)!=O[w];)O[w+1]+=O[w]>>>16,O[w]&=65535,w++}function nt(O,w){this.g=O,this.h=w}function ft(O,w){if(H(w))throw Error("division by zero");if(H(O))return new nt(A,A);if(F(O))return w=ft(q(O),w),new nt(q(w.g),q(w.h));if(F(w))return w=ft(O,q(w)),new nt(q(w.g),w.h);if(30<O.g.length){if(F(O)||F(w))throw Error("slowDivide_ only works with positive integers.");for(var S=I,D=w;0>=D.l(O);)S=lt(S),D=lt(D);var M=ht(S,1),N=ht(D,1);for(D=ht(D,2),S=ht(S,2);!H(D);){var R=N.add(D);0>=R.l(O)&&(M=M.add(S),N=R),D=ht(D,1),S=ht(S,1)}return w=et(O,M.j(w)),new nt(M,w)}for(M=A;0<=O.l(w);){for(S=Math.max(1,Math.floor(O.m()/w.m())),D=Math.ceil(Math.log(S)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),N=y(S),R=N.j(w);F(R)||0<R.l(O);)S-=D,N=y(S),R=N.j(w);H(N)&&(N=I),M=M.add(N),O=et(O,R)}return new nt(M,O)}r.A=function(O){return ft(this,O).h},r.and=function(O){for(var w=Math.max(this.g.length,O.g.length),S=[],D=0;D<w;D++)S[D]=this.i(D)&O.i(D);return new h(S,this.h&O.h)},r.or=function(O){for(var w=Math.max(this.g.length,O.g.length),S=[],D=0;D<w;D++)S[D]=this.i(D)|O.i(D);return new h(S,this.h|O.h)},r.xor=function(O){for(var w=Math.max(this.g.length,O.g.length),S=[],D=0;D<w;D++)S[D]=this.i(D)^O.i(D);return new h(S,this.h^O.h)};function lt(O){for(var w=O.g.length+1,S=[],D=0;D<w;D++)S[D]=O.i(D)<<1|O.i(D-1)>>>31;return new h(S,O.h)}function ht(O,w){var S=w>>5;w%=32;for(var D=O.g.length-S,M=[],N=0;N<D;N++)M[N]=0<w?O.i(N+S)>>>w|O.i(N+S+1)<<32-w:O.i(N+S);return new h(M,O.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,$_=a,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=E,Jr=h}).apply(typeof gv<"u"?gv:typeof self<"u"?self:typeof window<"u"?window:{});var ec=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Z_,cl,W_,uc,Dd,J_,t0,e0;(function(){var r,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,v){return u==Array.prototype||u==Object.prototype||(u[g]=v.value),u};function i(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ec=="object"&&ec];for(var g=0;g<u.length;++g){var v=u[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var a=i(this);function l(u,g){if(g)t:{var v=a;u=u.split(".");for(var b=0;b<u.length-1;b++){var P=u[b];if(!(P in v))break t;v=v[P]}u=u[u.length-1],b=v[u],g=g(b),g!=b&&g!=null&&t(v,u,{configurable:!0,writable:!0,value:g})}}function c(u,g){u instanceof String&&(u+="");var v=0,b=!1,P={next:function(){if(!b&&v<u.length){var G=v++;return{value:g(G,u[G]),done:!1}}return b=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}l("Array.prototype.values",function(u){return u||function(){return c(this,function(g,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},m=this||self;function p(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function y(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function E(u,g,v){return u.call.apply(u.bind,arguments)}function A(u,g,v){if(!u)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,b),u.apply(g,P)}}return function(){return u.apply(g,arguments)}}function I(u,g,v){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:A,I.apply(null,arguments)}function V(u,g){var v=Array.prototype.slice.call(arguments,1);return function(){var b=v.slice();return b.push.apply(b,arguments),u.apply(this,b)}}function H(u,g){function v(){}v.prototype=g.prototype,u.aa=g.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(b,P,G){for(var rt=Array(arguments.length-2),kt=2;kt<arguments.length;kt++)rt[kt-2]=arguments[kt];return g.prototype[P].apply(b,rt)}}function F(u){const g=u.length;if(0<g){const v=Array(g);for(let b=0;b<g;b++)v[b]=u[b];return v}return[]}function q(u,g){for(let v=1;v<arguments.length;v++){const b=arguments[v];if(p(b)){const P=u.length||0,G=b.length||0;u.length=P+G;for(let rt=0;rt<G;rt++)u[P+rt]=b[rt]}else u.push(b)}}class et{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function X(u){return/^[\s\xa0]*$/.test(u)}function nt(){var u=m.navigator;return u&&(u=u.userAgent)?u:""}function ft(u){return ft[" "](u),u}ft[" "]=function(){};var lt=nt().indexOf("Gecko")!=-1&&!(nt().toLowerCase().indexOf("webkit")!=-1&&nt().indexOf("Edge")==-1)&&!(nt().indexOf("Trident")!=-1||nt().indexOf("MSIE")!=-1)&&nt().indexOf("Edge")==-1;function ht(u,g,v){for(const b in u)g.call(v,u[b],b,u)}function O(u,g){for(const v in u)g.call(void 0,u[v],v,u)}function w(u){const g={};for(const v in u)g[v]=u[v];return g}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(u,g){let v,b;for(let P=1;P<arguments.length;P++){b=arguments[P];for(v in b)u[v]=b[v];for(let G=0;G<S.length;G++)v=S[G],Object.prototype.hasOwnProperty.call(b,v)&&(u[v]=b[v])}}function M(u){var g=1;u=u.split(":");const v=[];for(;0<g&&u.length;)v.push(u.shift()),g--;return u.length&&v.push(u.join(":")),v}function N(u){m.setTimeout(()=>{throw u},0)}function R(){var u=ut;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class bt{constructor(){this.h=this.g=null}add(g,v){const b=It.get();b.set(g,v),this.h?this.h.next=b:this.g=b,this.h=b}}var It=new et(()=>new it,u=>u.reset());class it{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ct,mt=!1,ut=new bt,x=()=>{const u=m.Promise.resolve(void 0);ct=()=>{u.then(W)}};var W=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(v){N(v)}var g=It;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}mt=!1};function ot(){this.s=this.s,this.C=this.C}ot.prototype.s=!1,ot.prototype.ma=function(){this.s||(this.s=!0,this.N())},ot.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function st(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};var at=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};m.addEventListener("test",v,g),m.removeEventListener("test",v,g)}catch{}return u}();function At(u,g){if(st.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,b=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(lt){t:{try{ft(g.nodeName);var P=!0;break t}catch{}P=!1}P||(g=null)}}else v=="mouseover"?g=u.fromElement:v=="mouseout"&&(g=u.toElement);this.relatedTarget=g,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:_t[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&At.aa.h.call(this)}}H(At,st);var _t={2:"touch",3:"pen",4:"mouse"};At.prototype.h=function(){At.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ie="closure_listenable_"+(1e6*Math.random()|0),xt=0;function Ft(u,g,v,b,P){this.listener=u,this.proxy=null,this.src=g,this.type=v,this.capture=!!b,this.ha=P,this.key=++xt,this.da=this.fa=!1}function vt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ye(u){this.src=u,this.g={},this.h=0}ye.prototype.add=function(u,g,v,b,P){var G=u.toString();u=this.g[G],u||(u=this.g[G]=[],this.h++);var rt=Ce(u,g,b,P);return-1<rt?(g=u[rt],v||(g.fa=!1)):(g=new Ft(g,this.src,G,!!b,P),g.fa=v,u.push(g)),g};function Te(u,g){var v=g.type;if(v in u.g){var b=u.g[v],P=Array.prototype.indexOf.call(b,g,void 0),G;(G=0<=P)&&Array.prototype.splice.call(b,P,1),G&&(vt(g),u.g[v].length==0&&(delete u.g[v],u.h--))}}function Ce(u,g,v,b){for(var P=0;P<u.length;++P){var G=u[P];if(!G.da&&G.listener==g&&G.capture==!!v&&G.ha==b)return P}return-1}var Be="closure_lm_"+(1e6*Math.random()|0),yn={};function ln(u,g,v,b,P){if(Array.isArray(g)){for(var G=0;G<g.length;G++)ln(u,g[G],v,b,P);return null}return v=Ws(v),u&&u[ie]?u.K(g,v,y(b)?!!b.capture:!1,P):pr(u,g,v,!1,b,P)}function pr(u,g,v,b,P,G){if(!g)throw Error("Invalid event type");var rt=y(P)?!!P.capture:!!P,kt=vr(u);if(kt||(u[Be]=kt=new ye(u)),v=kt.add(g,v,b,rt,G),v.proxy)return v;if(b=ki(),v.proxy=b,b.src=u,b.listener=v,u.addEventListener)at||(P=rt),P===void 0&&(P=!1),u.addEventListener(g.toString(),b,P);else if(u.attachEvent)u.attachEvent(si(g.toString()),b);else if(u.addListener&&u.removeListener)u.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return v}function ki(){function u(v){return g.call(u.src,u.listener,v)}const g=yr;return u}function mi(u,g,v,b,P){if(Array.isArray(g))for(var G=0;G<g.length;G++)mi(u,g[G],v,b,P);else b=y(b)?!!b.capture:!!b,v=Ws(v),u&&u[ie]?(u=u.i,g=String(g).toString(),g in u.g&&(G=u.g[g],v=Ce(G,v,b,P),-1<v&&(vt(G[v]),Array.prototype.splice.call(G,v,1),G.length==0&&(delete u.g[g],u.h--)))):u&&(u=vr(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Ce(g,v,b,P)),(v=-1<u?g[u]:null)&&un(v))}function un(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[ie])Te(g.i,u);else{var v=u.type,b=u.proxy;g.removeEventListener?g.removeEventListener(v,b,u.capture):g.detachEvent?g.detachEvent(si(v),b):g.addListener&&g.removeListener&&g.removeListener(b),(v=vr(g))?(Te(v,u),v.h==0&&(v.src=null,g[Be]=null)):vt(u)}}}function si(u){return u in yn?yn[u]:yn[u]="on"+u}function yr(u,g){if(u.da)u=!0;else{g=new At(g,this);var v=u.listener,b=u.ha||u.src;u.fa&&un(u),u=v.call(b,g)}return u}function vr(u){return u=u[Be],u instanceof ye?u:null}var $e="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ws(u){return typeof u=="function"?u:(u[$e]||(u[$e]=function(g){return u.handleEvent(g)}),u[$e])}function ve(){ot.call(this),this.i=new ye(this),this.M=this,this.F=null}H(ve,ot),ve.prototype[ie]=!0,ve.prototype.removeEventListener=function(u,g,v,b){mi(this,u,g,v,b)};function re(u,g){var v,b=u.F;if(b)for(v=[];b;b=b.F)v.push(b);if(u=u.M,b=g.type||g,typeof g=="string")g=new st(g,u);else if(g instanceof st)g.target=g.target||u;else{var P=g;g=new st(b,u),D(g,P)}if(P=!0,v)for(var G=v.length-1;0<=G;G--){var rt=g.g=v[G];P=cn(rt,b,!0,g)&&P}if(rt=g.g=u,P=cn(rt,b,!0,g)&&P,P=cn(rt,b,!1,g)&&P,v)for(G=0;G<v.length;G++)rt=g.g=v[G],P=cn(rt,b,!1,g)&&P}ve.prototype.N=function(){if(ve.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var v=u.g[g],b=0;b<v.length;b++)vt(v[b]);delete u.g[g],u.h--}}this.F=null},ve.prototype.K=function(u,g,v,b){return this.i.add(String(u),g,!1,v,b)},ve.prototype.L=function(u,g,v,b){return this.i.add(String(u),g,!0,v,b)};function cn(u,g,v,b){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var P=!0,G=0;G<g.length;++G){var rt=g[G];if(rt&&!rt.da&&rt.capture==v){var kt=rt.listener,Me=rt.ha||rt.src;rt.fa&&Te(u.i,rt),P=kt.call(Me,b)!==!1&&P}}return P&&!b.defaultPrevented}function gi(u,g,v){if(typeof u=="function")v&&(u=I(u,v));else if(u&&typeof u.handleEvent=="function")u=I(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:m.setTimeout(u,g||0)}function _r(u){u.g=gi(()=>{u.g=null,u.i&&(u.i=!1,_r(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class kn extends ot{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:_r(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pi(u){ot.call(this),this.h=u,this.g={}}H(pi,ot);var yi=[];function je(u){ht(u.g,function(g,v){this.g.hasOwnProperty(v)&&un(g)},u),u.g={}}pi.prototype.N=function(){pi.aa.N.call(this),je(this)},pi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bi=m.JSON.stringify,Dn=m.JSON.parse,Ze=class{stringify(u){return m.JSON.stringify(u,void 0)}parse(u){return m.JSON.parse(u,void 0)}};function Er(){}Er.prototype.h=null;function Js(u){return u.h||(u.h=u.i())}function ta(){}var Bn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function se(){st.call(this,"d")}H(se,st);function ae(){st.call(this,"c")}H(ae,st);var te={},We=null;function De(){return We=We||new ve}te.La="serverreachability";function Ie(u){st.call(this,te.La,u)}H(Ie,st);function xe(u){const g=De();re(g,new Ie(g))}te.STAT_EVENT="statevent";function In(u,g){st.call(this,te.STAT_EVENT,u),this.stat=g}H(In,st);function Ot(u){const g=De();re(g,new In(g,u))}te.Ma="timingevent";function xn(u,g){st.call(this,te.Ma,u),this.size=g}H(xn,st);function Ve(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){u()},g)}function qe(){this.g=!0}qe.prototype.xa=function(){this.g=!1};function vi(u,g,v,b,P,G){u.info(function(){if(u.g)if(G)for(var rt="",kt=G.split("&"),Me=0;Me<kt.length;Me++){var Bt=kt[Me].split("=");if(1<Bt.length){var Fe=Bt[0];Bt=Bt[1];var Ne=Fe.split("_");rt=2<=Ne.length&&Ne[1]=="type"?rt+(Fe+"="+Bt+"&"):rt+(Fe+"=redacted&")}}else rt=null;else rt=G;return"XMLHTTP REQ ("+b+") [attempt "+P+"]: "+g+`
`+v+`
`+rt})}function _i(u,g,v,b,P,G,rt){u.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+P+"]: "+g+`
`+v+`
`+G+" "+rt})}function Je(u,g,v,b){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+he(u,v)+(b?" "+b:"")})}function fn(u,g){u.info(function(){return"TIMEOUT: "+g})}qe.prototype.info=function(){};function he(u,g){if(!u.g)return g;if(!g)return null;try{var v=JSON.parse(g);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var b=v[u];if(!(2>b.length)){var P=b[1];if(Array.isArray(P)&&!(1>P.length)){var G=P[0];if(G!="noop"&&G!="stop"&&G!="close")for(var rt=1;rt<P.length;rt++)P[rt]=""}}}}return Bi(v)}catch{return g}}var Oe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ji={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fs;function ea(){}H(ea,Er),ea.prototype.g=function(){return new XMLHttpRequest},ea.prototype.i=function(){return{}},fs=new ea;function Ei(u,g,v,b){this.j=u,this.i=g,this.l=v,this.R=b||1,this.U=new pi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new lo}function lo(){this.i=null,this.g="",this.h=!1}var Tr={},hs={};function ai(u,g,v){u.L=1,u.v=gs(de(g)),u.m=v,u.P=!0,qi(u,null)}function qi(u,g){u.F=Date.now(),le(u),u.A=de(u.v);var v=u.A,b=u.R;Array.isArray(b)||(b=[String(b)]),Gi(v.i,"t",b),u.C=0,v=u.j.J,u.h=new lo,u.g=tu(u.j,v?g:null,!u.m),0<u.O&&(u.M=new kn(I(u.Y,u,u.g),u.O)),g=u.U,v=u.g,b=u.ca;var P="readystatechange";Array.isArray(P)||(P&&(yi[0]=P.toString()),P=yi);for(var G=0;G<P.length;G++){var rt=ln(v,P[G],b||g.handleEvent,!1,g.h||g);if(!rt)break;g.g[rt.key]=rt}g=u.H?w(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),xe(),vi(u.i,u.u,u.A,u.l,u.R,u.m)}Ei.prototype.ca=function(u){u=u.target;const g=this.M;g&&Gn(u)==3?g.j():this.Y(u)},Ei.prototype.Y=function(u){try{if(u==this.g)t:{const Ne=Gn(this.g);var g=this.g.Ba();const Xi=this.g.Z();if(!(3>Ne)&&(Ne!=3||this.g&&(this.h.h||this.g.oa()||Ql(this.g)))){this.J||Ne!=4||g==7||(g==8||0>=Xi?xe(3):xe(2)),na(this);var v=this.g.Z();this.X=v;e:if(br(this)){var b=Ql(this.g);u="";var P=b.length,G=Gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){bn(this),Vn(this);var rt="";break e}this.h.i=new m.TextDecoder}for(g=0;g<P;g++)this.h.h=!0,u+=this.h.i.decode(b[g],{stream:!(G&&g==P-1)});b.length=0,this.h.g+=u,this.C=0,rt=this.h.g}else rt=this.g.oa();if(this.o=v==200,_i(this.i,this.u,this.A,this.l,this.R,Ne,v),this.o){if(this.T&&!this.K){e:{if(this.g){var kt,Me=this.g;if((kt=Me.g?Me.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(kt)){var Bt=kt;break e}}Bt=null}if(v=Bt)Je(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,On(this,v);else{this.o=!1,this.s=3,Ot(12),bn(this),Vn(this);break t}}if(this.P){v=!0;let tn;for(;!this.J&&this.C<rt.length;)if(tn=Sr(this,rt),tn==hs){Ne==4&&(this.s=4,Ot(14),v=!1),Je(this.i,this.l,null,"[Incomplete Response]");break}else if(tn==Tr){this.s=4,Ot(15),Je(this.i,this.l,rt,"[Invalid Chunk]"),v=!1;break}else Je(this.i,this.l,tn,null),On(this,tn);if(br(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||rt.length!=0||this.h.h||(this.s=1,Ot(16),v=!1),this.o=this.o&&v,!v)Je(this.i,this.l,rt,"[Invalid Chunked Response]"),bn(this),Vn(this);else if(0<rt.length&&!this.W){this.W=!0;var Fe=this.j;Fe.g==this&&Fe.ba&&!Fe.M&&(Fe.j.info("Great, no buffering proxy detected. Bytes received: "+rt.length),bs(Fe),Fe.M=!0,Ot(11))}}else Je(this.i,this.l,rt,null),On(this,rt);Ne==4&&bn(this),this.o&&!this.J&&(Ne==4?Zl(this.j,this):(this.o=!1,le(this)))}else ff(this.g),v==400&&0<rt.indexOf("Unknown SID")?(this.s=3,Ot(12)):(this.s=0,Ot(13)),bn(this),Vn(this)}}}catch{}finally{}};function br(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Sr(u,g){var v=u.C,b=g.indexOf(`
`,v);return b==-1?hs:(v=Number(g.substring(v,b)),isNaN(v)?Tr:(b+=1,b+v>g.length?hs:(g=g.slice(b,b+v),u.C=b+v,g)))}Ei.prototype.cancel=function(){this.J=!0,bn(this)};function le(u){u.S=Date.now()+u.I,uo(u,u.I)}function uo(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Ve(I(u.ba,u),g)}function na(u){u.B&&(m.clearTimeout(u.B),u.B=null)}Ei.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(fn(this.i,this.A),this.L!=2&&(xe(),Ot(17)),bn(this),this.s=2,Vn(this)):uo(this,this.S-u)};function Vn(u){u.j.G==0||u.J||Zl(u.j,u)}function bn(u){na(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,je(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function On(u,g){try{var v=u.j;if(v.G!=0&&(v.g==u||Ar(v.h,u))){if(!u.K&&Ar(v.h,u)&&v.G==3){try{var b=v.Da.g.parse(g)}catch{b=null}if(Array.isArray(b)&&b.length==3){var P=b;if(P[0]==0){t:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)ha(v),ca(v);else break t;To(v),Ot(18)}}else v.za=P[1],0<v.za-v.T&&37500>P[2]&&v.F&&v.v==0&&!v.C&&(v.C=Ve(I(v.Za,v),6e3));if(1>=jl(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Ki(v,11)}else if((u.K||v.g==u)&&ha(v),!X(g))for(P=v.Da.g.parse(g),g=0;g<P.length;g++){let Bt=P[g];if(v.T=Bt[0],Bt=Bt[1],v.G==2)if(Bt[0]=="c"){v.K=Bt[1],v.ia=Bt[2];const Fe=Bt[3];Fe!=null&&(v.la=Fe,v.j.info("VER="+v.la));const Ne=Bt[4];Ne!=null&&(v.Aa=Ne,v.j.info("SVER="+v.Aa));const Xi=Bt[5];Xi!=null&&typeof Xi=="number"&&0<Xi&&(b=1.5*Xi,v.L=b,v.j.info("backChannelRequestTimeoutMs_="+b)),b=v;const tn=u.g;if(tn){const Ci=tn.g?tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ci){var G=b.h;G.g||Ci.indexOf("spdy")==-1&&Ci.indexOf("quic")==-1&&Ci.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(wr(G,G.h),G.h=null))}if(b.D){const So=tn.g?tn.g.getResponseHeader("X-HTTP-Session-Id"):null;So&&(b.ya=So,Gt(b.I,b.D,So))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),b=v;var rt=u;if(b.qa=Jl(b,b.J?b.ia:null,b.W),rt.K){jn(b.h,rt);var kt=rt,Me=b.L;Me&&(kt.I=Me),kt.B&&(na(kt),le(kt)),b.g=rt}else Xl(b);0<v.i.length&&fa(v)}else Bt[0]!="stop"&&Bt[0]!="close"||Ki(v,7);else v.G==3&&(Bt[0]=="stop"||Bt[0]=="close"?Bt[0]=="stop"?Ki(v,7):_o(v):Bt[0]!="noop"&&v.l&&v.l.ta(Bt),v.v=0)}}xe(4)}catch{}}var af=class{constructor(u,g){this.g=u,this.map=g}};function co(u){this.l=u||10,m.PerformanceNavigationTiming?(u=m.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fo(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function jl(u){return u.h?1:u.g?u.g.size:0}function Ar(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function wr(u,g){u.g?u.g.add(g):u.h=g}function jn(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}co.prototype.cancel=function(){if(this.i=vn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function vn(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const v of u.g.values())g=g.concat(v.D);return g}return F(u.i)}function ql(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var g=[],v=u.length,b=0;b<v;b++)g.push(u[b]);return g}g=[],v=0;for(b in u)g[v++]=u[b];return g}function of(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var g=[];u=u.length;for(var v=0;v<u;v++)g.push(v);return g}g=[],v=0;for(const b in u)g[v++]=b;return g}}}function ds(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var v=of(u),b=ql(u),P=b.length,G=0;G<P;G++)g.call(void 0,b[G],v&&v[G],u)}var ho=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ia(u,g){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var b=u[v].indexOf("="),P=null;if(0<=b){var G=u[v].substring(0,b);P=u[v].substring(b+1)}else G=u[v];g(G,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function Hi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Hi){this.h=u.h,Rr(this,u.j),this.o=u.o,this.g=u.g,ms(this,u.s),this.l=u.l;var g=u.i,v=new Ti;v.i=g.i,g.g&&(v.g=new Map(g.g),v.h=g.h),ra(this,v),this.m=u.m}else u&&(g=String(u).match(ho))?(this.h=!1,Rr(this,g[1]||"",!0),this.o=Cr(g[2]||""),this.g=Cr(g[3]||"",!0),ms(this,g[4]),this.l=Cr(g[5]||"",!0),ra(this,g[6]||"",!0),this.m=Cr(g[7]||"")):(this.h=!1,this.i=new Ti(null,this.h))}Hi.prototype.toString=function(){var u=[],g=this.j;g&&u.push(qn(g,mo,!0),":");var v=this.g;return(v||g=="file")&&(u.push("//"),(g=this.o)&&u.push(qn(g,mo,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(qn(v,v.charAt(0)=="/"?go:Hl,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",qn(v,cf)),u.join("")};function de(u){return new Hi(u)}function Rr(u,g,v){u.j=v?Cr(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function ms(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function ra(u,g,v){g instanceof Ti?(u.i=g,po(u.i,u.h)):(v||(g=qn(g,uf)),u.i=new Ti(g,u.h))}function Gt(u,g,v){u.i.set(g,v)}function gs(u){return Gt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Cr(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function qn(u,g,v){return typeof u=="string"?(u=encodeURI(u).replace(g,lf),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function lf(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var mo=/[#\/\?@]/g,Hl=/[#\?:]/g,go=/[#\?]/g,uf=/[#\?@]/g,cf=/#/g;function Ti(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function Hn(u){u.g||(u.g=new Map,u.h=0,u.i&&ia(u.i,function(g,v){u.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}r=Ti.prototype,r.add=function(u,g){Hn(this),this.i=null,u=Qi(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(g),this.h+=1,this};function sa(u,g){Hn(u),g=Qi(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function Fi(u,g){return Hn(u),g=Qi(u,g),u.g.has(g)}r.forEach=function(u,g){Hn(this),this.g.forEach(function(v,b){v.forEach(function(P){u.call(g,P,b,this)},this)},this)},r.na=function(){Hn(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),v=[];for(let b=0;b<g.length;b++){const P=u[b];for(let G=0;G<P.length;G++)v.push(g[b])}return v},r.V=function(u){Hn(this);let g=[];if(typeof u=="string")Fi(this,u)&&(g=g.concat(this.g.get(Qi(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)g=g.concat(u[v])}return g},r.set=function(u,g){return Hn(this),this.i=null,u=Qi(this,u),Fi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},r.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function Gi(u,g,v){sa(u,g),0<v.length&&(u.i=null,u.g.set(Qi(u,g),F(v)),u.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var v=0;v<g.length;v++){var b=g[v];const G=encodeURIComponent(String(b)),rt=this.V(b);for(b=0;b<rt.length;b++){var P=G;rt[b]!==""&&(P+="="+encodeURIComponent(String(rt[b]))),u.push(P)}}return this.i=u.join("&")};function Qi(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function po(u,g){g&&!u.j&&(Hn(u),u.i=null,u.g.forEach(function(v,b){var P=b.toLowerCase();b!=P&&(sa(this,b),Gi(this,P,v))},u)),u.j=g}function Fl(u,g){const v=new qe;if(m.Image){const b=new Image;b.onload=V(Fn,v,"TestLoadImage: loaded",!0,g,b),b.onerror=V(Fn,v,"TestLoadImage: error",!1,g,b),b.onabort=V(Fn,v,"TestLoadImage: abort",!1,g,b),b.ontimeout=V(Fn,v,"TestLoadImage: timeout",!1,g,b),m.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=u}else g(!1)}function ps(u,g){const v=new qe,b=new AbortController,P=setTimeout(()=>{b.abort(),Fn(v,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:b.signal}).then(G=>{clearTimeout(P),G.ok?Fn(v,"TestPingServer: ok",!0,g):Fn(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(P),Fn(v,"TestPingServer: error",!1,g)})}function Fn(u,g,v,b,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),b(v)}catch{}}function ys(){this.g=new Ze}function bi(u,g,v){const b=v||"";try{ds(u,function(P,G){let rt=P;y(P)&&(rt=Bi(P)),g.push(b+G+"="+encodeURIComponent(rt))})}catch(P){throw g.push(b+"type="+encodeURIComponent("_badmap")),P}}function Dr(u){this.l=u.Ub||null,this.j=u.eb||!1}H(Dr,Er),Dr.prototype.g=function(){return new Yi(this.l,this.j)},Dr.prototype.i=function(u){return function(){return u}}({});function Yi(u,g){ve.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}H(Yi,ve),r=Yi.prototype,r.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,Ai(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||m).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Si(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ai(this)),this.g&&(this.readyState=3,Ai(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yo(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function yo(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Si(this):Ai(this),this.readyState==3&&yo(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Si(this))},r.Qa=function(u){this.g&&(this.response=u,Si(this))},r.ga=function(){this.g&&Si(this)};function Si(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ai(u)}r.setRequestHeader=function(u,g){this.u.append(u,g)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=g.next();return u.join(`\r
`)};function Ai(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Yi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function vo(u){let g="";return ht(u,function(v,b){g+=b,g+=":",g+=v,g+=`\r
`}),g}function He(u,g,v){t:{for(b in v){var b=!1;break t}b=!0}b||(v=vo(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):Gt(u,g,v))}function Xt(u){ve.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}H(Xt,ve);var aa=/^https?$/i,vs=["POST","PUT"];r=Xt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,g,v,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fs.g(),this.v=this.o?Js(this.o):Js(fs),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(G){Gl(this,G);return}if(u=v||"",v=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var P in b)v.set(P,b[P]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const G of b.keys())v.set(G,b.get(G));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(v.keys()).find(G=>G.toLowerCase()=="content-type"),P=m.FormData&&u instanceof m.FormData,!(0<=Array.prototype.indexOf.call(vs,g,void 0))||b||P||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,rt]of v)this.g.setRequestHeader(G,rt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_s(this),this.u=!0,this.g.send(u),this.u=!1}catch(G){Gl(this,G)}};function Gl(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,oa(u),wi(u)}function oa(u){u.A||(u.A=!0,re(u,"complete"),re(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,re(this,"complete"),re(this,"abort"),wi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wi(this,!0)),Xt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?la(this):this.bb())},r.bb=function(){la(this)};function la(u){if(u.h&&typeof h<"u"&&(!u.v[1]||Gn(u)!=4||u.Z()!=2)){if(u.u&&Gn(u)==4)gi(u.Ea,0,u);else if(re(u,"readystatechange"),Gn(u)==4){u.h=!1;try{const rt=u.Z();t:switch(rt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break t;default:g=!1}var v;if(!(v=g)){var b;if(b=rt===0){var P=String(u.D).match(ho)[1]||null;!P&&m.self&&m.self.location&&(P=m.self.location.protocol.slice(0,-1)),b=!aa.test(P?P.toLowerCase():"")}v=b}if(v)re(u,"complete"),re(u,"success");else{u.m=6;try{var G=2<Gn(u)?u.g.statusText:""}catch{G=""}u.l=G+" ["+u.Z()+"]",oa(u)}}finally{wi(u)}}}}function wi(u,g){if(u.g){_s(u);const v=u.g,b=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||re(u,"ready");try{v.onreadystatechange=b}catch{}}}function _s(u){u.I&&(m.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Gn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Gn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Dn(g)}};function Ql(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ff(u){const g={};u=(u.g&&2<=Gn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<u.length;b++){if(X(u[b]))continue;var v=M(u[b]);const P=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const G=g[P]||[];g[P]=G,G.push(v)}O(g,function(b){return b.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Es(u,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||g}function ua(u){this.Aa=0,this.i=[],this.j=new qe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Es("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Es("baseRetryDelayMs",5e3,u),this.cb=Es("retryDelaySeedMs",1e4,u),this.Wa=Es("forwardChannelMaxRetries",2,u),this.wa=Es("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new co(u&&u.concurrentRequestLimit),this.Da=new ys,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ua.prototype,r.la=8,r.G=1,r.connect=function(u,g,v,b){Ot(0),this.W=u,this.H=g||{},v&&b!==void 0&&(this.H.OSID=v,this.H.OAID=b),this.F=this.X,this.I=Jl(this,null,this.W),fa(this)};function _o(u){if(Yl(u),u.G==3){var g=u.U++,v=de(u.I);if(Gt(v,"SID",u.K),Gt(v,"RID",g),Gt(v,"TYPE","terminate"),Ts(u,v),g=new Ei(u,u.j,g),g.L=2,g.v=gs(de(v)),v=!1,m.navigator&&m.navigator.sendBeacon)try{v=m.navigator.sendBeacon(g.v.toString(),"")}catch{}!v&&m.Image&&(new Image().src=g.v,v=!0),v||(g.g=tu(g.j,null),g.g.ea(g.v)),g.F=Date.now(),le(g)}Wl(u)}function ca(u){u.g&&(bs(u),u.g.cancel(),u.g=null)}function Yl(u){ca(u),u.u&&(m.clearTimeout(u.u),u.u=null),ha(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&m.clearTimeout(u.s),u.s=null)}function fa(u){if(!fo(u.h)&&!u.s){u.s=!0;var g=u.Ga;ct||x(),mt||(ct(),mt=!0),ut.add(g,u),u.B=0}}function hf(u,g){return jl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Ve(I(u.Ga,u,g),bo(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const P=new Ei(this,this.j,u);let G=this.o;if(this.S&&(G?(G=w(G),D(G,this.S)):G=this.S),this.m!==null||this.O||(P.H=G,G=null),this.P)t:{for(var g=0,v=0;v<this.i.length;v++){e:{var b=this.i[v];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break e}b=void 0}if(b===void 0)break;if(g+=b,4096<g){g=v;break t}if(g===4096||v===this.i.length-1){g=v+1;break t}}g=1e3}else g=1e3;g=Kl(this,P,g),v=de(this.I),Gt(v,"RID",u),Gt(v,"CVER",22),this.D&&Gt(v,"X-HTTP-Session-Id",this.D),Ts(this,v),G&&(this.O?g="headers="+encodeURIComponent(String(vo(G)))+"&"+g:this.m&&He(v,this.m,G)),wr(this.h,P),this.Ua&&Gt(v,"TYPE","init"),this.P?(Gt(v,"$req",g),Gt(v,"SID","null"),P.T=!0,ai(P,v,null)):ai(P,v,g),this.G=2}}else this.G==3&&(u?Eo(this,u):this.i.length==0||fo(this.h)||Eo(this))};function Eo(u,g){var v;g?v=g.l:v=u.U++;const b=de(u.I);Gt(b,"SID",u.K),Gt(b,"RID",v),Gt(b,"AID",u.T),Ts(u,b),u.m&&u.o&&He(b,u.m,u.o),v=new Ei(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),g&&(u.i=g.D.concat(u.i)),g=Kl(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),wr(u.h,v),ai(v,b,g)}function Ts(u,g){u.H&&ht(u.H,function(v,b){Gt(g,b,v)}),u.l&&ds({},function(v,b){Gt(g,b,v)})}function Kl(u,g,v){v=Math.min(u.i.length,v);var b=u.l?I(u.l.Na,u.l,u):null;t:{var P=u.i;let G=-1;for(;;){const rt=["count="+v];G==-1?0<v?(G=P[0].g,rt.push("ofs="+G)):G=0:rt.push("ofs="+G);let kt=!0;for(let Me=0;Me<v;Me++){let Bt=P[Me].g;const Fe=P[Me].map;if(Bt-=G,0>Bt)G=Math.max(0,P[Me].g-100),kt=!1;else try{bi(Fe,rt,"req"+Bt+"_")}catch{b&&b(Fe)}}if(kt){b=rt.join("&");break t}}}return u=u.i.splice(0,v),g.D=u,b}function Xl(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;ct||x(),mt||(ct(),mt=!0),ut.add(g,u),u.v=0}}function To(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Ve(I(u.Fa,u),bo(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,$l(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Ve(I(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ot(10),ca(this),$l(this))};function bs(u){u.A!=null&&(m.clearTimeout(u.A),u.A=null)}function $l(u){u.g=new Ei(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=de(u.qa);Gt(g,"RID","rpc"),Gt(g,"SID",u.K),Gt(g,"AID",u.T),Gt(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&Gt(g,"TO",u.ja),Gt(g,"TYPE","xmlhttp"),Ts(u,g),u.m&&u.o&&He(g,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=gs(de(g)),v.m=null,v.P=!0,qi(v,u)}r.Za=function(){this.C!=null&&(this.C=null,ca(this),To(this),Ot(19))};function ha(u){u.C!=null&&(m.clearTimeout(u.C),u.C=null)}function Zl(u,g){var v=null;if(u.g==g){ha(u),bs(u),u.g=null;var b=2}else if(Ar(u.h,g))v=g.D,jn(u.h,g),b=1;else return;if(u.G!=0){if(g.o)if(b==1){v=g.m?g.m.length:0,g=Date.now()-g.F;var P=u.B;b=De(),re(b,new xn(b,v)),fa(u)}else Xl(u);else if(P=g.s,P==3||P==0&&0<g.X||!(b==1&&hf(u,g)||b==2&&To(u)))switch(v&&0<v.length&&(g=u.h,g.i=g.i.concat(v)),P){case 1:Ki(u,5);break;case 4:Ki(u,10);break;case 3:Ki(u,6);break;default:Ki(u,2)}}}function bo(u,g){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*g}function Ki(u,g){if(u.j.info("Error code "+g),g==2){var v=I(u.fb,u),b=u.Xa;const P=!b;b=new Hi(b||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Rr(b,"https"),gs(b),P?Fl(b.toString(),v):ps(b.toString(),v)}else Ot(2);u.G=0,u.l&&u.l.sa(g),Wl(u),Yl(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ot(2)):(this.j.info("Failed to ping google.com"),Ot(1))};function Wl(u){if(u.G=0,u.ka=[],u.l){const g=vn(u.h);(g.length!=0||u.i.length!=0)&&(q(u.ka,g),q(u.ka,u.i),u.h.i.length=0,F(u.i),u.i.length=0),u.l.ra()}}function Jl(u,g,v){var b=v instanceof Hi?de(v):new Hi(v);if(b.g!="")g&&(b.g=g+"."+b.g),ms(b,b.s);else{var P=m.location;b=P.protocol,g=g?g+"."+P.hostname:P.hostname,P=+P.port;var G=new Hi(null);b&&Rr(G,b),g&&(G.g=g),P&&ms(G,P),v&&(G.l=v),b=G}return v=u.D,g=u.ya,v&&g&&Gt(b,v,g),Gt(b,"VER",u.la),Ts(u,b),b}function tu(u,g,v){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new Xt(new Dr({eb:v})):new Xt(u.pa),g.Ha(u.J),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function eu(){}r=eu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function da(){}da.prototype.g=function(u,g){return new _n(u,g)};function _n(u,g){ve.call(this),this.g=new ua(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!X(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!X(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Ri(this)}H(_n,ve),_n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){_o(this.g)},_n.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=Bi(u),u=v);g.i.push(new af(g.Ya++,u)),g.G==3&&fa(g)},_n.prototype.N=function(){this.g.l=null,delete this.j,_o(this.g),delete this.g,_n.aa.N.call(this)};function nu(u){se.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){t:{for(const v in g){u=v;break t}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}H(nu,se);function iu(){ae.call(this),this.status=1}H(iu,ae);function Ri(u){this.g=u}H(Ri,eu),Ri.prototype.ua=function(){re(this.g,"a")},Ri.prototype.ta=function(u){re(this.g,new nu(u))},Ri.prototype.sa=function(u){re(this.g,new iu)},Ri.prototype.ra=function(){re(this.g,"b")},da.prototype.createWebChannel=da.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,e0=function(){return new da},t0=function(){return De()},J_=te,Dd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Oe.NO_ERROR=0,Oe.TIMEOUT=8,Oe.HTTP_ERROR=6,uc=Oe,ji.COMPLETE="complete",W_=ji,ta.EventType=Bn,Bn.OPEN="a",Bn.CLOSE="b",Bn.ERROR="c",Bn.MESSAGE="d",ve.prototype.listen=ve.prototype.K,cl=ta,Xt.prototype.listenOnce=Xt.prototype.L,Xt.prototype.getLastError=Xt.prototype.Ka,Xt.prototype.getLastErrorCode=Xt.prototype.Ba,Xt.prototype.getStatus=Xt.prototype.Z,Xt.prototype.getResponseJson=Xt.prototype.Oa,Xt.prototype.getResponseText=Xt.prototype.oa,Xt.prototype.send=Xt.prototype.ea,Xt.prototype.setWithCredentials=Xt.prototype.Ha,Z_=Xt}).apply(typeof ec<"u"?ec:typeof self<"u"?self:typeof window<"u"?window:{});const pv="@firebase/firestore",yv="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}gn.UNAUTHENTICATED=new gn(null),gn.GOOGLE_CREDENTIALS=new gn("google-credentials-uid"),gn.FIRST_PARTY=new gn("first-party-uid"),gn.MOCK_USER=new gn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let to="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs=new Jd("@firebase/firestore");function Ba(){return Fs.logLevel}function dt(r,...t){if(Fs.logLevel<=Ht.DEBUG){const i=t.map(em);Fs.debug(`Firestore (${to}): ${r}`,...i)}}function mr(r,...t){if(Fs.logLevel<=Ht.ERROR){const i=t.map(em);Fs.error(`Firestore (${to}): ${r}`,...i)}}function Qa(r,...t){if(Fs.logLevel<=Ht.WARN){const i=t.map(em);Fs.warn(`Firestore (${to}): ${r}`,...i)}}function em(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(i){return JSON.stringify(i)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(r="Unexpected state"){const t=`FIRESTORE (${to}) INTERNAL ASSERTION FAILED: `+r;throw mr(t),new Error(t)}function $t(r,t){r||wt()}function Dt(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pt extends cs{constructor(t,i){super(t,i),this.code=t,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(){this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(t,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class jA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,i){t.enqueueRetryable(()=>i(gn.UNAUTHENTICATED))}shutdown(){}}class qA{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,i){this.changeListener=i,t.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class HA{constructor(t){this.t=t,this.currentUser=gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,i){$t(this.o===void 0);let a=this.i;const l=p=>this.i!==a?(a=this.i,i(p)):Promise.resolve();let c=new ts;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ts,t.enqueueRetryable(()=>l(this.currentUser))};const h=()=>{const p=c;t.enqueueRetryable(async()=>{await p.promise,await l(this.currentUser)})},m=p=>{dt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(p=>m(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(dt("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ts)}},0),h()}getToken(){const t=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(a=>this.i!==t?(dt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?($t(typeof a.accessToken=="string"),new n0(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return $t(t===null||typeof t=="string"),new gn(t)}}class FA{constructor(t,i,a){this.l=t,this.h=i,this.P=a,this.type="FirstParty",this.user=gn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class GA{constructor(t,i,a){this.l=t,this.h=i,this.P=a}getToken(){return Promise.resolve(new FA(this.l,this.h,this.P))}start(t,i){t.enqueueRetryable(()=>i(gn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vv{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QA{constructor(t,i){this.A=i,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,wA(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,i){$t(this.o===void 0);const a=c=>{c.error!=null&&dt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.R;return this.R=c.token,dt("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?i(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable(()=>a(c))};const l=c=>{dt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>l(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?l(c):dt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new vv(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(i=>i?($t(typeof i.token=="string"),this.R=i.token,new vv(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(i);else for(let a=0;a<r;a++)i[a]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const l=YA(40);for(let c=0;c<l.length;++c)a.length<20&&l[c]<i&&(a+=t.charAt(l[c]%62))}return a}}function Nt(r,t){return r<t?-1:r>t?1:0}function Id(r,t){let i=0;for(;i<r.length&&i<t.length;){const a=r.codePointAt(i),l=t.codePointAt(i);if(a!==l){if(a<128&&l<128)return Nt(a,l);{const c=i0(),h=KA(c.encode(_v(r,i)),c.encode(_v(t,i)));return h!==0?h:Nt(a,l)}}i+=a>65535?2:1}return Nt(r.length,t.length)}function _v(r,t){return r.codePointAt(t)>65535?r.substring(t,t+2):r.substring(t,t+1)}function KA(r,t){for(let i=0;i<r.length&&i<t.length;++i)if(r[i]!==t[i])return Nt(r[i],t[i]);return Nt(r.length,t.length)}function Ya(r,t,i){return r.length===t.length&&r.every((a,l)=>i(a,t[l]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev=-62135596800,Tv=1e6;class Pe{static now(){return Pe.fromMillis(Date.now())}static fromDate(t){return Pe.fromMillis(t.getTime())}static fromMillis(t){const i=Math.floor(t/1e3),a=Math.floor((t-1e3*i)*Tv);return new Pe(i,a)}constructor(t,i){if(this.seconds=t,this.nanoseconds=i,i<0)throw new pt(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new pt(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(t<Ev)throw new pt(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new pt(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Tv}_compareTo(t){return this.seconds===t.seconds?Nt(this.nanoseconds,t.nanoseconds):Nt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-Ev;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{static fromTimestamp(t){return new Rt(t)}static min(){return new Rt(new Pe(0,0))}static max(){return new Rt(new Pe(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv="__name__";class Mi{constructor(t,i,a){i===void 0?i=0:i>t.length&&wt(),a===void 0?a=t.length-i:a>t.length-i&&wt(),this.segments=t,this.offset=i,this.len=a}get length(){return this.len}isEqual(t){return Mi.comparator(this,t)===0}child(t){const i=this.segments.slice(this.offset,this.limit());return t instanceof Mi?t.forEach(a=>{i.push(a)}):i.push(t),this.construct(i)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}forEach(t){for(let i=this.offset,a=this.limit();i<a;i++)t(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,i){const a=Math.min(t.length,i.length);for(let l=0;l<a;l++){const c=Mi.compareSegments(t.get(l),i.get(l));if(c!==0)return c}return Nt(t.length,i.length)}static compareSegments(t,i){const a=Mi.isNumericId(t),l=Mi.isNumericId(i);return a&&!l?-1:!a&&l?1:a&&l?Mi.extractNumericId(t).compare(Mi.extractNumericId(i)):Id(t,i)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Jr.fromString(t.substring(4,t.length-2))}}class oe extends Mi{construct(t,i,a){return new oe(t,i,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const i=[];for(const a of t){if(a.indexOf("//")>=0)throw new pt(J.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);i.push(...a.split("/").filter(l=>l.length>0))}return new oe(i)}static emptyPath(){return new oe([])}}const XA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class an extends Mi{construct(t,i,a){return new an(t,i,a)}static isValidIdentifier(t){return XA.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),an.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bv}static keyField(){return new an([bv])}static fromServerFormat(t){const i=[];let a="",l=0;const c=()=>{if(a.length===0)throw new pt(J.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(a),a=""};let h=!1;for(;l<t.length;){const m=t[l];if(m==="\\"){if(l+1===t.length)throw new pt(J.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[l+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new pt(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);a+=p,l+=2}else m==="`"?(h=!h,l++):m!=="."||h?(a+=m,l++):(c(),l++)}if(c(),h)throw new pt(J.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new an(i)}static emptyPath(){return new an([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(t){this.path=t}static fromPath(t){return new Tt(oe.fromString(t))}static fromName(t){return new Tt(oe.fromString(t).popFirst(5))}static empty(){return new Tt(oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&oe.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,i){return oe.comparator(t.path,i.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Tt(new oe(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al=-1;function $A(r,t){const i=r.toTimestamp().seconds,a=r.toTimestamp().nanoseconds+1,l=Rt.fromTimestamp(a===1e9?new Pe(i+1,0):new Pe(i,a));return new rs(l,Tt.empty(),t)}function ZA(r){return new rs(r.readTime,r.key,Al)}class rs{constructor(t,i,a){this.readTime=t,this.documentKey=i,this.largestBatchId=a}static min(){return new rs(Rt.min(),Tt.empty(),Al)}static max(){return new rs(Rt.max(),Tt.empty(),Al)}}function WA(r,t){let i=r.readTime.compareTo(t.readTime);return i!==0?i:(i=Tt.comparator(r.documentKey,t.documentKey),i!==0?i:Nt(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eo(r){if(r.code!==J.FAILED_PRECONDITION||r.message!==JA)throw r;dt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(t){return this.next(void 0,t)}next(t,i){return this.callbackAttached&&wt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(t,this.result):new Z((a,l)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(a,l)},this.catchCallback=c=>{this.wrapFailure(i,c).next(a,l)}})}toPromise(){return new Promise((t,i)=>{this.next(t,i)})}wrapUserFunction(t){try{const i=t();return i instanceof Z?i:Z.resolve(i)}catch(i){return Z.reject(i)}}wrapSuccess(t,i){return t?this.wrapUserFunction(()=>t(i)):Z.resolve(i)}wrapFailure(t,i){return t?this.wrapUserFunction(()=>t(i)):Z.reject(i)}static resolve(t){return new Z((i,a)=>{i(t)})}static reject(t){return new Z((i,a)=>{a(t)})}static waitFor(t){return new Z((i,a)=>{let l=0,c=0,h=!1;t.forEach(m=>{++l,m.next(()=>{++c,h&&c===l&&i()},p=>a(p))}),h=!0,c===l&&i()})}static or(t){let i=Z.resolve(!1);for(const a of t)i=i.next(l=>l?Z.resolve(l):a());return i}static forEach(t,i){const a=[];return t.forEach((l,c)=>{a.push(i.call(this,l,c))}),this.waitFor(a)}static mapArray(t,i){return new Z((a,l)=>{const c=t.length,h=new Array(c);let m=0;for(let p=0;p<c;p++){const y=p;i(t[y]).next(E=>{h[y]=E,++m,m===c&&a(h)},E=>l(E))}})}static doWhile(t,i){return new Z((a,l)=>{const c=()=>{t()===!0?i().next(()=>{c()},l):a()};c()})}}function ew(r){const t=r.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function no(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=a=>this.oe(a),this._e=a=>i.writeSequenceNumber(a))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}Pc.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm=-1;function kc(r){return r==null}function vc(r){return r===0&&1/r==-1/0}function nw(r){return typeof r=="number"&&Number.isInteger(r)&&!vc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0="";function iw(r){let t="";for(let i=0;i<r.length;i++)t.length>0&&(t=Sv(t)),t=rw(r.get(i),t);return Sv(t)}function rw(r,t){let i=t;const a=r.length;for(let l=0;l<a;l++){const c=r.charAt(l);switch(c){case"\0":i+="";break;case s0:i+="";break;default:i+=c}}return i}function Sv(r){return r+s0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(r){let t=0;for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&t++;return t}function Ks(r,t){for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&t(i,r[i])}function a0(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(t,i){this.comparator=t,this.root=i||sn.EMPTY}insert(t,i){return new fe(this.comparator,this.root.insert(t,i,this.comparator).copy(null,null,sn.BLACK,null,null))}remove(t){return new fe(this.comparator,this.root.remove(t,this.comparator).copy(null,null,sn.BLACK,null,null))}get(t){let i=this.root;for(;!i.isEmpty();){const a=this.comparator(t,i.key);if(a===0)return i.value;a<0?i=i.left:a>0&&(i=i.right)}return null}indexOf(t){let i=0,a=this.root;for(;!a.isEmpty();){const l=this.comparator(t,a.key);if(l===0)return i+a.left.size;l<0?a=a.left:(i+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((i,a)=>(t(i,a),!1))}toString(){const t=[];return this.inorderTraversal((i,a)=>(t.push(`${i}:${a}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new nc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new nc(this.root,t,this.comparator,!1)}getReverseIterator(){return new nc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new nc(this.root,t,this.comparator,!0)}}class nc{constructor(t,i,a,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=i?a(t.key,i):1,i&&l&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const i={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class sn{constructor(t,i,a,l,c){this.key=t,this.value=i,this.color=a??sn.RED,this.left=l??sn.EMPTY,this.right=c??sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,i,a,l,c){return new sn(t??this.key,i??this.value,a??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,a){let l=this;const c=a(t,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(t,i,a),null):c===0?l.copy(null,i,null,null,null):l.copy(null,null,null,null,l.right.insert(t,i,a)),l.fixUp()}removeMin(){if(this.left.isEmpty())return sn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,i){let a,l=this;if(i(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,i),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),i(t,l.key)===0){if(l.right.isEmpty())return sn.EMPTY;a=l.right.min(),l=l.copy(a.key,a.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,i))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw wt();const t=this.left.check();if(t!==this.right.check())throw wt();return t+(this.isRed()?0:1)}}sn.EMPTY=null,sn.RED=!0,sn.BLACK=!1;sn.EMPTY=new class{constructor(){this.size=0}get key(){throw wt()}get value(){throw wt()}get color(){throw wt()}get left(){throw wt()}get right(){throw wt()}copy(t,i,a,l,c){return this}insert(t,i,a){return new sn(t,i)}remove(t,i){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(t){this.comparator=t,this.data=new fe(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((i,a)=>(t(i),!1))}forEachInRange(t,i){const a=this.data.getIteratorFrom(t[0]);for(;a.hasNext();){const l=a.getNext();if(this.comparator(l.key,t[1])>=0)return;i(l.key)}}forEachWhile(t,i){let a;for(a=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();a.hasNext();)if(!t(a.getNext().key))return}firstAfterOrEqual(t){const i=this.data.getIteratorFrom(t);return i.hasNext()?i.getNext().key:null}getIterator(){return new wv(this.data.getIterator())}getIteratorFrom(t){return new wv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let i=this;return i.size<t.size&&(i=t,t=this),t.forEach(a=>{i=i.add(a)}),i}isEqual(t){if(!(t instanceof ke)||this.size!==t.size)return!1;const i=this.data.getIterator(),a=t.data.getIterator();for(;i.hasNext();){const l=i.getNext().key,c=a.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(i=>{t.push(i)}),t}toString(){const t=[];return this.forEach(i=>t.push(i)),"SortedSet("+t.toString()+")"}copy(t){const i=new ke(this.comparator);return i.data=t,i}}class wv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(t){this.fields=t,t.sort(an.comparator)}static empty(){return new fi([])}unionWith(t){let i=new ke(an.comparator);for(const a of this.fields)i=i.add(a);for(const a of t)i=i.add(a);return new fi(i.toArray())}covers(t){for(const i of this.fields)if(i.isPrefixOf(t))return!0;return!1}isEqual(t){return Ya(this.fields,t.fields,(i,a)=>i.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(t){this.binaryString=t}static fromBase64String(t){const i=function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new o0("Invalid base64 string: "+c):c}}(t);return new on(i)}static fromUint8Array(t){const i=function(l){let c="";for(let h=0;h<l.length;++h)c+=String.fromCharCode(l[h]);return c}(t);return new on(i)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(i){return btoa(i)}(this.binaryString)}toUint8Array(){return function(i){const a=new Uint8Array(i.length);for(let l=0;l<i.length;l++)a[l]=i.charCodeAt(l);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Nt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}on.EMPTY_BYTE_STRING=new on("");const sw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ss(r){if($t(!!r),typeof r=="string"){let t=0;const i=sw.exec(r);if($t(!!i),i[1]){let l=i[1];l=(l+"000000000").substr(0,9),t=Number(l)}const a=new Date(r);return{seconds:Math.floor(a.getTime()/1e3),nanos:t}}return{seconds:Ee(r.seconds),nanos:Ee(r.nanos)}}function Ee(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function as(r){return typeof r=="string"?on.fromBase64String(r):on.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0="server_timestamp",u0="__type__",c0="__previous_value__",f0="__local_write_time__";function im(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)===null||t===void 0?void 0:t.fields)||{})[u0])===null||i===void 0?void 0:i.stringValue)===l0}function Bc(r){const t=r.mapValue.fields[c0];return im(t)?Bc(t):t}function wl(r){const t=ss(r.mapValue.fields[f0].timestampValue);return new Pe(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(t,i,a,l,c,h,m,p,y){this.databaseId=t,this.appId=i,this.persistenceKey=a,this.host=l,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=y}}const _c="(default)";class Rl{constructor(t,i){this.projectId=t,this.database=i||_c}static empty(){return new Rl("","")}get isDefaultDatabase(){return this.database===_c}isEqual(t){return t instanceof Rl&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0="__type__",ow="__max__",ic={mapValue:{}},d0="__vector__",Ec="value";function os(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?im(r)?4:uw(r)?9007199254740991:lw(r)?10:11:wt()}function zi(r,t){if(r===t)return!0;const i=os(r);if(i!==os(t))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return wl(r).isEqual(wl(t));case 3:return function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const h=ss(l.timestampValue),m=ss(c.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos}(r,t);case 5:return r.stringValue===t.stringValue;case 6:return function(l,c){return as(l.bytesValue).isEqual(as(c.bytesValue))}(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return function(l,c){return Ee(l.geoPointValue.latitude)===Ee(c.geoPointValue.latitude)&&Ee(l.geoPointValue.longitude)===Ee(c.geoPointValue.longitude)}(r,t);case 2:return function(l,c){if("integerValue"in l&&"integerValue"in c)return Ee(l.integerValue)===Ee(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const h=Ee(l.doubleValue),m=Ee(c.doubleValue);return h===m?vc(h)===vc(m):isNaN(h)&&isNaN(m)}return!1}(r,t);case 9:return Ya(r.arrayValue.values||[],t.arrayValue.values||[],zi);case 10:case 11:return function(l,c){const h=l.mapValue.fields||{},m=c.mapValue.fields||{};if(Av(h)!==Av(m))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(m[p]===void 0||!zi(h[p],m[p])))return!1;return!0}(r,t);default:return wt()}}function Cl(r,t){return(r.values||[]).find(i=>zi(i,t))!==void 0}function Ka(r,t){if(r===t)return 0;const i=os(r),a=os(t);if(i!==a)return Nt(i,a);switch(i){case 0:case 9007199254740991:return 0;case 1:return Nt(r.booleanValue,t.booleanValue);case 2:return function(c,h){const m=Ee(c.integerValue||c.doubleValue),p=Ee(h.integerValue||h.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1}(r,t);case 3:return Rv(r.timestampValue,t.timestampValue);case 4:return Rv(wl(r),wl(t));case 5:return Id(r.stringValue,t.stringValue);case 6:return function(c,h){const m=as(c),p=as(h);return m.compareTo(p)}(r.bytesValue,t.bytesValue);case 7:return function(c,h){const m=c.split("/"),p=h.split("/");for(let y=0;y<m.length&&y<p.length;y++){const E=Nt(m[y],p[y]);if(E!==0)return E}return Nt(m.length,p.length)}(r.referenceValue,t.referenceValue);case 8:return function(c,h){const m=Nt(Ee(c.latitude),Ee(h.latitude));return m!==0?m:Nt(Ee(c.longitude),Ee(h.longitude))}(r.geoPointValue,t.geoPointValue);case 9:return Cv(r.arrayValue,t.arrayValue);case 10:return function(c,h){var m,p,y,E;const A=c.fields||{},I=h.fields||{},V=(m=A[Ec])===null||m===void 0?void 0:m.arrayValue,H=(p=I[Ec])===null||p===void 0?void 0:p.arrayValue,F=Nt(((y=V==null?void 0:V.values)===null||y===void 0?void 0:y.length)||0,((E=H==null?void 0:H.values)===null||E===void 0?void 0:E.length)||0);return F!==0?F:Cv(V,H)}(r.mapValue,t.mapValue);case 11:return function(c,h){if(c===ic.mapValue&&h===ic.mapValue)return 0;if(c===ic.mapValue)return 1;if(h===ic.mapValue)return-1;const m=c.fields||{},p=Object.keys(m),y=h.fields||{},E=Object.keys(y);p.sort(),E.sort();for(let A=0;A<p.length&&A<E.length;++A){const I=Id(p[A],E[A]);if(I!==0)return I;const V=Ka(m[p[A]],y[E[A]]);if(V!==0)return V}return Nt(p.length,E.length)}(r.mapValue,t.mapValue);default:throw wt()}}function Rv(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Nt(r,t);const i=ss(r),a=ss(t),l=Nt(i.seconds,a.seconds);return l!==0?l:Nt(i.nanos,a.nanos)}function Cv(r,t){const i=r.values||[],a=t.values||[];for(let l=0;l<i.length&&l<a.length;++l){const c=Ka(i[l],a[l]);if(c)return c}return Nt(i.length,a.length)}function Xa(r){return xd(r)}function xd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(i){const a=ss(i);return`time(${a.seconds},${a.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(i){return as(i).toBase64()}(r.bytesValue):"referenceValue"in r?function(i){return Tt.fromName(i).toString()}(r.referenceValue):"geoPointValue"in r?function(i){return`geo(${i.latitude},${i.longitude})`}(r.geoPointValue):"arrayValue"in r?function(i){let a="[",l=!0;for(const c of i.values||[])l?l=!1:a+=",",a+=xd(c);return a+"]"}(r.arrayValue):"mapValue"in r?function(i){const a=Object.keys(i.fields||{}).sort();let l="{",c=!0;for(const h of a)c?c=!1:l+=",",l+=`${h}:${xd(i.fields[h])}`;return l+"}"}(r.mapValue):wt()}function cc(r){switch(os(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Bc(r);return t?16+cc(t):16;case 5:return 2*r.stringValue.length;case 6:return as(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(a){return(a.values||[]).reduce((l,c)=>l+cc(c),0)}(r.arrayValue);case 10:case 11:return function(a){let l=0;return Ks(a.fields,(c,h)=>{l+=c.length+cc(h)}),l}(r.mapValue);default:throw wt()}}function Dv(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function Vd(r){return!!r&&"integerValue"in r}function rm(r){return!!r&&"arrayValue"in r}function Iv(r){return!!r&&"nullValue"in r}function xv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function fc(r){return!!r&&"mapValue"in r}function lw(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)===null||t===void 0?void 0:t.fields)||{})[h0])===null||i===void 0?void 0:i.stringValue)===d0}function ml(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const t={mapValue:{fields:{}}};return Ks(r.mapValue.fields,(i,a)=>t.mapValue.fields[i]=ml(a)),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let i=0;i<(r.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=ml(r.arrayValue.values[i]);return t}return Object.assign({},r)}function uw(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===ow}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(t){this.value=t}static empty(){return new ii({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let i=this.value;for(let a=0;a<t.length-1;++a)if(i=(i.mapValue.fields||{})[t.get(a)],!fc(i))return null;return i=(i.mapValue.fields||{})[t.lastSegment()],i||null}}set(t,i){this.getFieldsMap(t.popLast())[t.lastSegment()]=ml(i)}setAll(t){let i=an.emptyPath(),a={},l=[];t.forEach((h,m)=>{if(!i.isImmediateParentOf(m)){const p=this.getFieldsMap(i);this.applyChanges(p,a,l),a={},l=[],i=m.popLast()}h?a[m.lastSegment()]=ml(h):l.push(m.lastSegment())});const c=this.getFieldsMap(i);this.applyChanges(c,a,l)}delete(t){const i=this.field(t.popLast());fc(i)&&i.mapValue.fields&&delete i.mapValue.fields[t.lastSegment()]}isEqual(t){return zi(this.value,t.value)}getFieldsMap(t){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let a=0;a<t.length;++a){let l=i.mapValue.fields[t.get(a)];fc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},i.mapValue.fields[t.get(a)]=l),i=l}return i.mapValue.fields}applyChanges(t,i,a){Ks(i,(l,c)=>t[l]=c);for(const l of a)delete t[l]}clone(){return new ii(ml(this.value))}}function m0(r){const t=[];return Ks(r.fields,(i,a)=>{const l=new an([i]);if(fc(a)){const c=m0(a.mapValue).fields;if(c.length===0)t.push(l);else for(const h of c)t.push(l.child(h))}else t.push(l)}),new fi(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(t,i,a,l,c,h,m){this.key=t,this.documentType=i,this.version=a,this.readTime=l,this.createTime=c,this.data=h,this.documentState=m}static newInvalidDocument(t){return new pn(t,0,Rt.min(),Rt.min(),Rt.min(),ii.empty(),0)}static newFoundDocument(t,i,a,l){return new pn(t,1,i,Rt.min(),a,l,0)}static newNoDocument(t,i){return new pn(t,2,i,Rt.min(),Rt.min(),ii.empty(),0)}static newUnknownDocument(t,i){return new pn(t,3,i,Rt.min(),Rt.min(),ii.empty(),2)}convertToFoundDocument(t,i){return!this.createTime.isEqual(Rt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ii.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ii.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Rt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof pn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(t,i){this.position=t,this.inclusive=i}}function Vv(r,t,i){let a=0;for(let l=0;l<r.position.length;l++){const c=t[l],h=r.position[l];if(c.field.isKeyField()?a=Tt.comparator(Tt.fromName(h.referenceValue),i.key):a=Ka(h,i.data.field(c.field)),c.dir==="desc"&&(a*=-1),a!==0)break}return a}function Ov(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let i=0;i<r.position.length;i++)if(!zi(r.position[i],t.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(t,i="asc"){this.field=t,this.dir=i}}function cw(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{}class Re extends g0{constructor(t,i,a){super(),this.field=t,this.op=i,this.value=a}static create(t,i,a){return t.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(t,i,a):new hw(t,i,a):i==="array-contains"?new gw(t,a):i==="in"?new pw(t,a):i==="not-in"?new yw(t,a):i==="array-contains-any"?new vw(t,a):new Re(t,i,a)}static createKeyFieldInFilter(t,i,a){return i==="in"?new dw(t,a):new mw(t,a)}matches(t){const i=t.data.field(this.field);return this.op==="!="?i!==null&&this.matchesComparison(Ka(i,this.value)):i!==null&&os(this.value)===os(i)&&this.matchesComparison(Ka(i,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return wt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hi extends g0{constructor(t,i){super(),this.filters=t,this.op=i,this.ce=null}static create(t,i){return new hi(t,i)}matches(t){return p0(this)?this.filters.find(i=>!i.matches(t))===void 0:this.filters.find(i=>i.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,i)=>t.concat(i.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function p0(r){return r.op==="and"}function y0(r){return fw(r)&&p0(r)}function fw(r){for(const t of r.filters)if(t instanceof hi)return!1;return!0}function Od(r){if(r instanceof Re)return r.field.canonicalString()+r.op.toString()+Xa(r.value);if(y0(r))return r.filters.map(t=>Od(t)).join(",");{const t=r.filters.map(i=>Od(i)).join(",");return`${r.op}(${t})`}}function v0(r,t){return r instanceof Re?function(a,l){return l instanceof Re&&a.op===l.op&&a.field.isEqual(l.field)&&zi(a.value,l.value)}(r,t):r instanceof hi?function(a,l){return l instanceof hi&&a.op===l.op&&a.filters.length===l.filters.length?a.filters.reduce((c,h,m)=>c&&v0(h,l.filters[m]),!0):!1}(r,t):void wt()}function _0(r){return r instanceof Re?function(i){return`${i.field.canonicalString()} ${i.op} ${Xa(i.value)}`}(r):r instanceof hi?function(i){return i.op.toString()+" {"+i.getFilters().map(_0).join(" ,")+"}"}(r):"Filter"}class hw extends Re{constructor(t,i,a){super(t,i,a),this.key=Tt.fromName(a.referenceValue)}matches(t){const i=Tt.comparator(t.key,this.key);return this.matchesComparison(i)}}class dw extends Re{constructor(t,i){super(t,"in",i),this.keys=E0("in",i)}matches(t){return this.keys.some(i=>i.isEqual(t.key))}}class mw extends Re{constructor(t,i){super(t,"not-in",i),this.keys=E0("not-in",i)}matches(t){return!this.keys.some(i=>i.isEqual(t.key))}}function E0(r,t){var i;return(((i=t.arrayValue)===null||i===void 0?void 0:i.values)||[]).map(a=>Tt.fromName(a.referenceValue))}class gw extends Re{constructor(t,i){super(t,"array-contains",i)}matches(t){const i=t.data.field(this.field);return rm(i)&&Cl(i.arrayValue,this.value)}}class pw extends Re{constructor(t,i){super(t,"in",i)}matches(t){const i=t.data.field(this.field);return i!==null&&Cl(this.value.arrayValue,i)}}class yw extends Re{constructor(t,i){super(t,"not-in",i)}matches(t){if(Cl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=t.data.field(this.field);return i!==null&&!Cl(this.value.arrayValue,i)}}class vw extends Re{constructor(t,i){super(t,"array-contains-any",i)}matches(t){const i=t.data.field(this.field);return!(!rm(i)||!i.arrayValue.values)&&i.arrayValue.values.some(a=>Cl(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(t,i=null,a=[],l=[],c=null,h=null,m=null){this.path=t,this.collectionGroup=i,this.orderBy=a,this.filters=l,this.limit=c,this.startAt=h,this.endAt=m,this.le=null}}function Mv(r,t=null,i=[],a=[],l=null,c=null,h=null){return new _w(r,t,i,a,l,c,h)}function sm(r){const t=Dt(r);if(t.le===null){let i=t.path.canonicalString();t.collectionGroup!==null&&(i+="|cg:"+t.collectionGroup),i+="|f:",i+=t.filters.map(a=>Od(a)).join(","),i+="|ob:",i+=t.orderBy.map(a=>function(c){return c.field.canonicalString()+c.dir}(a)).join(","),kc(t.limit)||(i+="|l:",i+=t.limit),t.startAt&&(i+="|lb:",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(a=>Xa(a)).join(",")),t.endAt&&(i+="|ub:",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(a=>Xa(a)).join(",")),t.le=i}return t.le}function am(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<r.orderBy.length;i++)if(!cw(r.orderBy[i],t.orderBy[i]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let i=0;i<r.filters.length;i++)if(!v0(r.filters[i],t.filters[i]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!Ov(r.startAt,t.startAt)&&Ov(r.endAt,t.endAt)}function Md(r){return Tt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(t,i=null,a=[],l=[],c=null,h="F",m=null,p=null){this.path=t,this.collectionGroup=i,this.explicitOrderBy=a,this.filters=l,this.limit=c,this.limitType=h,this.startAt=m,this.endAt=p,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function Ew(r,t,i,a,l,c,h,m){return new Ml(r,t,i,a,l,c,h,m)}function T0(r){return new Ml(r)}function Nv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function b0(r){return r.collectionGroup!==null}function gl(r){const t=Dt(r);if(t.he===null){t.he=[];const i=new Set;for(const c of t.explicitOrderBy)t.he.push(c),i.add(c.field.canonicalString());const a=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new ke(an.comparator);return h.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(m=m.add(y.field))})}),m})(t).forEach(c=>{i.has(c.canonicalString())||c.isKeyField()||t.he.push(new bc(c,a))}),i.has(an.keyField().canonicalString())||t.he.push(new bc(an.keyField(),a))}return t.he}function Ui(r){const t=Dt(r);return t.Pe||(t.Pe=Tw(t,gl(r))),t.Pe}function Tw(r,t){if(r.limitType==="F")return Mv(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map(l=>{const c=l.dir==="desc"?"asc":"desc";return new bc(l.field,c)});const i=r.endAt?new Tc(r.endAt.position,r.endAt.inclusive):null,a=r.startAt?new Tc(r.startAt.position,r.startAt.inclusive):null;return Mv(r.path,r.collectionGroup,t,r.filters,r.limit,i,a)}}function Nd(r,t){const i=r.filters.concat([t]);return new Ml(r.path,r.collectionGroup,r.explicitOrderBy.slice(),i,r.limit,r.limitType,r.startAt,r.endAt)}function Ud(r,t,i){return new Ml(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,i,r.startAt,r.endAt)}function jc(r,t){return am(Ui(r),Ui(t))&&r.limitType===t.limitType}function S0(r){return`${sm(Ui(r))}|lt:${r.limitType}`}function ja(r){return`Query(target=${function(i){let a=i.path.canonicalString();return i.collectionGroup!==null&&(a+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(a+=`, filters: [${i.filters.map(l=>_0(l)).join(", ")}]`),kc(i.limit)||(a+=", limit: "+i.limit),i.orderBy.length>0&&(a+=`, orderBy: [${i.orderBy.map(l=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(l)).join(", ")}]`),i.startAt&&(a+=", startAt: ",a+=i.startAt.inclusive?"b:":"a:",a+=i.startAt.position.map(l=>Xa(l)).join(",")),i.endAt&&(a+=", endAt: ",a+=i.endAt.inclusive?"a:":"b:",a+=i.endAt.position.map(l=>Xa(l)).join(",")),`Target(${a})`}(Ui(r))}; limitType=${r.limitType})`}function qc(r,t){return t.isFoundDocument()&&function(a,l){const c=l.key.path;return a.collectionGroup!==null?l.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(c):Tt.isDocumentKey(a.path)?a.path.isEqual(c):a.path.isImmediateParentOf(c)}(r,t)&&function(a,l){for(const c of gl(a))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0}(r,t)&&function(a,l){for(const c of a.filters)if(!c.matches(l))return!1;return!0}(r,t)&&function(a,l){return!(a.startAt&&!function(h,m,p){const y=Vv(h,m,p);return h.inclusive?y<=0:y<0}(a.startAt,gl(a),l)||a.endAt&&!function(h,m,p){const y=Vv(h,m,p);return h.inclusive?y>=0:y>0}(a.endAt,gl(a),l))}(r,t)}function bw(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function A0(r){return(t,i)=>{let a=!1;for(const l of gl(r)){const c=Sw(l,t,i);if(c!==0)return c;a=a||l.field.isKeyField()}return 0}}function Sw(r,t,i){const a=r.field.isKeyField()?Tt.comparator(t.key,i.key):function(c,h,m){const p=h.data.field(c),y=m.data.field(c);return p!==null&&y!==null?Ka(p,y):wt()}(r.field,t,i);switch(r.dir){case"asc":return a;case"desc":return-1*a;default:return wt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(t,i){this.mapKeyFn=t,this.equalsFn=i,this.inner={},this.innerSize=0}get(t){const i=this.mapKeyFn(t),a=this.inner[i];if(a!==void 0){for(const[l,c]of a)if(this.equalsFn(l,t))return c}}has(t){return this.get(t)!==void 0}set(t,i){const a=this.mapKeyFn(t),l=this.inner[a];if(l===void 0)return this.inner[a]=[[t,i]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],t))return void(l[c]=[t,i]);l.push([t,i]),this.innerSize++}delete(t){const i=this.mapKeyFn(t),a=this.inner[i];if(a===void 0)return!1;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],t))return a.length===1?delete this.inner[i]:a.splice(l,1),this.innerSize--,!0;return!1}forEach(t){Ks(this.inner,(i,a)=>{for(const[l,c]of a)t(l,c)})}isEmpty(){return a0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw=new fe(Tt.comparator);function gr(){return Aw}const w0=new fe(Tt.comparator);function fl(...r){let t=w0;for(const i of r)t=t.insert(i.key,i);return t}function R0(r){let t=w0;return r.forEach((i,a)=>t=t.insert(i,a.overlayedDocument)),t}function qs(){return pl()}function C0(){return pl()}function pl(){return new Xs(r=>r.toString(),(r,t)=>r.isEqual(t))}const ww=new fe(Tt.comparator),Rw=new ke(Tt.comparator);function zt(...r){let t=Rw;for(const i of r)t=t.add(i);return t}const Cw=new ke(Nt);function Dw(){return Cw}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vc(t)?"-0":t}}function D0(r){return{integerValue:""+r}}function Iw(r,t){return nw(t)?D0(t):om(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(){this._=void 0}}function xw(r,t,i){return r instanceof Sc?function(l,c){const h={fields:{[u0]:{stringValue:l0},[f0]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&im(c)&&(c=Bc(c)),c&&(h.fields[c0]=c),{mapValue:h}}(i,t):r instanceof Dl?x0(r,t):r instanceof Il?V0(r,t):function(l,c){const h=I0(l,c),m=Uv(h)+Uv(l.Ie);return Vd(h)&&Vd(l.Ie)?D0(m):om(l.serializer,m)}(r,t)}function Vw(r,t,i){return r instanceof Dl?x0(r,t):r instanceof Il?V0(r,t):i}function I0(r,t){return r instanceof Ac?function(a){return Vd(a)||function(c){return!!c&&"doubleValue"in c}(a)}(t)?t:{integerValue:0}:null}class Sc extends Hc{}class Dl extends Hc{constructor(t){super(),this.elements=t}}function x0(r,t){const i=O0(t);for(const a of r.elements)i.some(l=>zi(l,a))||i.push(a);return{arrayValue:{values:i}}}class Il extends Hc{constructor(t){super(),this.elements=t}}function V0(r,t){let i=O0(t);for(const a of r.elements)i=i.filter(l=>!zi(l,a));return{arrayValue:{values:i}}}class Ac extends Hc{constructor(t,i){super(),this.serializer=t,this.Ie=i}}function Uv(r){return Ee(r.integerValue||r.doubleValue)}function O0(r){return rm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function Ow(r,t){return r.field.isEqual(t.field)&&function(a,l){return a instanceof Dl&&l instanceof Dl||a instanceof Il&&l instanceof Il?Ya(a.elements,l.elements,zi):a instanceof Ac&&l instanceof Ac?zi(a.Ie,l.Ie):a instanceof Sc&&l instanceof Sc}(r.transform,t.transform)}class Mw{constructor(t,i){this.version=t,this.transformResults=i}}class fr{constructor(t,i){this.updateTime=t,this.exists=i}static none(){return new fr}static exists(t){return new fr(void 0,t)}static updateTime(t){return new fr(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function hc(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class Fc{}function M0(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new U0(r.key,fr.none()):new Nl(r.key,r.data,fr.none());{const i=r.data,a=ii.empty();let l=new ke(an.comparator);for(let c of t.fields)if(!l.has(c)){let h=i.field(c);h===null&&c.length>1&&(c=c.popLast(),h=i.field(c)),h===null?a.delete(c):a.set(c,h),l=l.add(c)}return new $s(r.key,a,new fi(l.toArray()),fr.none())}}function Nw(r,t,i){r instanceof Nl?function(l,c,h){const m=l.value.clone(),p=zv(l.fieldTransforms,c,h.transformResults);m.setAll(p),c.convertToFoundDocument(h.version,m).setHasCommittedMutations()}(r,t,i):r instanceof $s?function(l,c,h){if(!hc(l.precondition,c))return void c.convertToUnknownDocument(h.version);const m=zv(l.fieldTransforms,c,h.transformResults),p=c.data;p.setAll(N0(l)),p.setAll(m),c.convertToFoundDocument(h.version,p).setHasCommittedMutations()}(r,t,i):function(l,c,h){c.convertToNoDocument(h.version).setHasCommittedMutations()}(0,t,i)}function yl(r,t,i,a){return r instanceof Nl?function(c,h,m,p){if(!hc(c.precondition,h))return m;const y=c.value.clone(),E=Pv(c.fieldTransforms,p,h);return y.setAll(E),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null}(r,t,i,a):r instanceof $s?function(c,h,m,p){if(!hc(c.precondition,h))return m;const y=Pv(c.fieldTransforms,p,h),E=h.data;return E.setAll(N0(c)),E.setAll(y),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(A=>A.field))}(r,t,i,a):function(c,h,m){return hc(c.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m}(r,t,i)}function Uw(r,t){let i=null;for(const a of r.fieldTransforms){const l=t.data.field(a.field),c=I0(a.transform,l||null);c!=null&&(i===null&&(i=ii.empty()),i.set(a.field,c))}return i||null}function Lv(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!function(a,l){return a===void 0&&l===void 0||!(!a||!l)&&Ya(a,l,(c,h)=>Ow(c,h))}(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class Nl extends Fc{constructor(t,i,a,l=[]){super(),this.key=t,this.value=i,this.precondition=a,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class $s extends Fc{constructor(t,i,a,l,c=[]){super(),this.key=t,this.data=i,this.fieldMask=a,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function N0(r){const t=new Map;return r.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const a=r.data.field(i);t.set(i,a)}}),t}function zv(r,t,i){const a=new Map;$t(r.length===i.length);for(let l=0;l<i.length;l++){const c=r[l],h=c.transform,m=t.data.field(c.field);a.set(c.field,Vw(h,m,i[l]))}return a}function Pv(r,t,i){const a=new Map;for(const l of r){const c=l.transform,h=i.data.field(l.field);a.set(l.field,xw(c,h,t))}return a}class U0 extends Fc{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Lw extends Fc{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(t,i,a,l){this.batchId=t,this.localWriteTime=i,this.baseMutations=a,this.mutations=l}applyToRemoteDocument(t,i){const a=i.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(t.key)&&Nw(c,t,a[l])}}applyToLocalView(t,i){for(const a of this.baseMutations)a.key.isEqual(t.key)&&(i=yl(a,t,i,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(t.key)&&(i=yl(a,t,i,this.localWriteTime));return i}applyToLocalDocumentSet(t,i){const a=C0();return this.mutations.forEach(l=>{const c=t.get(l.key),h=c.overlayedDocument;let m=this.applyToLocalView(h,c.mutatedFields);m=i.has(l.key)?null:m;const p=M0(h,m);p!==null&&a.set(l.key,p),h.isValidDocument()||h.convertToNoDocument(Rt.min())}),a}keys(){return this.mutations.reduce((t,i)=>t.add(i.key),zt())}isEqual(t){return this.batchId===t.batchId&&Ya(this.mutations,t.mutations,(i,a)=>Lv(i,a))&&Ya(this.baseMutations,t.baseMutations,(i,a)=>Lv(i,a))}}class lm{constructor(t,i,a,l){this.batch=t,this.commitVersion=i,this.mutationResults=a,this.docVersions=l}static from(t,i,a){$t(t.mutations.length===a.length);let l=function(){return ww}();const c=t.mutations;for(let h=0;h<c.length;h++)l=l.insert(c[h].key,a[h].version);return new lm(t,i,a,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(t,i){this.largestBatchId=t,this.mutation=i}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(t,i){this.count=t,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we,qt;function Bw(r){switch(r){case J.OK:return wt();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return wt()}}function L0(r){if(r===void 0)return mr("GRPC error has no .code"),J.UNKNOWN;switch(r){case we.OK:return J.OK;case we.CANCELLED:return J.CANCELLED;case we.UNKNOWN:return J.UNKNOWN;case we.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case we.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case we.INTERNAL:return J.INTERNAL;case we.UNAVAILABLE:return J.UNAVAILABLE;case we.UNAUTHENTICATED:return J.UNAUTHENTICATED;case we.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case we.NOT_FOUND:return J.NOT_FOUND;case we.ALREADY_EXISTS:return J.ALREADY_EXISTS;case we.PERMISSION_DENIED:return J.PERMISSION_DENIED;case we.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case we.ABORTED:return J.ABORTED;case we.OUT_OF_RANGE:return J.OUT_OF_RANGE;case we.UNIMPLEMENTED:return J.UNIMPLEMENTED;case we.DATA_LOSS:return J.DATA_LOSS;default:return wt()}}(qt=we||(we={}))[qt.OK=0]="OK",qt[qt.CANCELLED=1]="CANCELLED",qt[qt.UNKNOWN=2]="UNKNOWN",qt[qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qt[qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qt[qt.NOT_FOUND=5]="NOT_FOUND",qt[qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",qt[qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",qt[qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",qt[qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qt[qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qt[qt.ABORTED=10]="ABORTED",qt[qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",qt[qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",qt[qt.INTERNAL=13]="INTERNAL",qt[qt.UNAVAILABLE=14]="UNAVAILABLE",qt[qt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw=new Jr([4294967295,4294967295],0);function kv(r){const t=i0().encode(r),i=new $_;return i.update(t),new Uint8Array(i.digest())}function Bv(r){const t=new DataView(r.buffer),i=t.getUint32(0,!0),a=t.getUint32(4,!0),l=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new Jr([i,a],0),new Jr([l,c],0)]}class um{constructor(t,i,a){if(this.bitmap=t,this.padding=i,this.hashCount=a,i<0||i>=8)throw new hl(`Invalid padding: ${i}`);if(a<0)throw new hl(`Invalid hash count: ${a}`);if(t.length>0&&this.hashCount===0)throw new hl(`Invalid hash count: ${a}`);if(t.length===0&&i!==0)throw new hl(`Invalid padding when bitmap length is 0: ${i}`);this.Ee=8*t.length-i,this.de=Jr.fromNumber(this.Ee)}Ae(t,i,a){let l=t.add(i.multiply(Jr.fromNumber(a)));return l.compare(jw)===1&&(l=new Jr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const i=kv(t),[a,l]=Bv(i);for(let c=0;c<this.hashCount;c++){const h=this.Ae(a,l,c);if(!this.Re(h))return!1}return!0}static create(t,i,a){const l=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),h=new um(c,l,i);return a.forEach(m=>h.insert(m)),h}insert(t){if(this.Ee===0)return;const i=kv(t),[a,l]=Bv(i);for(let c=0;c<this.hashCount;c++){const h=this.Ae(a,l,c);this.Ve(h)}}Ve(t){const i=Math.floor(t/8),a=t%8;this.bitmap[i]|=1<<a}}class hl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(t,i,a,l,c){this.snapshotVersion=t,this.targetChanges=i,this.targetMismatches=a,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,i,a){const l=new Map;return l.set(t,Ul.createSynthesizedTargetChangeForCurrentChange(t,i,a)),new Gc(Rt.min(),l,new fe(Nt),gr(),zt())}}class Ul{constructor(t,i,a,l,c){this.resumeToken=t,this.current=i,this.addedDocuments=a,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,i,a){return new Ul(a,i,zt(),zt(),zt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(t,i,a,l){this.me=t,this.removedTargetIds=i,this.key=a,this.fe=l}}class z0{constructor(t,i){this.targetId=t,this.ge=i}}class P0{constructor(t,i,a=on.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=i,this.resumeToken=a,this.cause=l}}class jv{constructor(){this.pe=0,this.ye=qv(),this.we=on.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=zt(),i=zt(),a=zt();return this.ye.forEach((l,c)=>{switch(c){case 0:t=t.add(l);break;case 2:i=i.add(l);break;case 1:a=a.add(l);break;default:wt()}}),new Ul(this.we,this.Se,t,i,a)}Me(){this.be=!1,this.ye=qv()}xe(t,i){this.be=!0,this.ye=this.ye.insert(t,i)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,$t(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class qw{constructor(t){this.ke=t,this.qe=new Map,this.Qe=gr(),this.$e=rc(),this.Ue=rc(),this.Ke=new fe(Nt)}We(t){for(const i of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(i,t.fe):this.ze(i,t.key,t.fe);for(const i of t.removedTargetIds)this.ze(i,t.key,t.fe)}je(t){this.forEachTarget(t,i=>{const a=this.He(i);switch(t.state){case 0:this.Je(i)&&a.Ce(t.resumeToken);break;case 1:a.Be(),a.De||a.Me(),a.Ce(t.resumeToken);break;case 2:a.Be(),a.De||this.removeTarget(i);break;case 3:this.Je(i)&&(a.Le(),a.Ce(t.resumeToken));break;case 4:this.Je(i)&&(this.Ye(i),a.Ce(t.resumeToken));break;default:wt()}})}forEachTarget(t,i){t.targetIds.length>0?t.targetIds.forEach(i):this.qe.forEach((a,l)=>{this.Je(l)&&i(l)})}Ze(t){const i=t.targetId,a=t.ge.count,l=this.Xe(i);if(l){const c=l.target;if(Md(c))if(a===0){const h=new Tt(c.path);this.ze(i,h,pn.newNoDocument(h,Rt.min()))}else $t(a===1);else{const h=this.et(i);if(h!==a){const m=this.tt(t),p=m?this.nt(m,t,h):1;if(p!==0){this.Ye(i);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(i,y)}}}}}tt(t){const i=t.ge.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:a="",padding:l=0},hashCount:c=0}=i;let h,m;try{h=as(a).toUint8Array()}catch(p){if(p instanceof o0)return Qa("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new um(h,l,c)}catch(p){return Qa(p instanceof hl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.Ee===0?null:m}nt(t,i,a){return i.ge.count===a-this.st(t,i.targetId)?0:2}st(t,i){const a=this.ke.getRemoteKeysForTarget(i);let l=0;return a.forEach(c=>{const h=this.ke.it(),m=`projects/${h.projectId}/databases/${h.database}/documents/${c.path.canonicalString()}`;t.mightContain(m)||(this.ze(i,c,null),l++)}),l}ot(t){const i=new Map;this.qe.forEach((c,h)=>{const m=this.Xe(h);if(m){if(c.current&&Md(m.target)){const p=new Tt(m.target.path);this._t(p).has(h)||this.ut(h,p)||this.ze(h,p,pn.newNoDocument(p,t))}c.ve&&(i.set(h,c.Fe()),c.Me())}});let a=zt();this.Ue.forEach((c,h)=>{let m=!0;h.forEachWhile(p=>{const y=this.Xe(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(a=a.add(c))}),this.Qe.forEach((c,h)=>h.setReadTime(t));const l=new Gc(t,i,this.Ke,this.Qe,a);return this.Qe=gr(),this.$e=rc(),this.Ue=rc(),this.Ke=new fe(Nt),l}Ge(t,i){if(!this.Je(t))return;const a=this.ut(t,i.key)?2:0;this.He(t).xe(i.key,a),this.Qe=this.Qe.insert(i.key,i),this.$e=this.$e.insert(i.key,this._t(i.key).add(t)),this.Ue=this.Ue.insert(i.key,this.ct(i.key).add(t))}ze(t,i,a){if(!this.Je(t))return;const l=this.He(t);this.ut(t,i)?l.xe(i,1):l.Oe(i),this.Ue=this.Ue.insert(i,this.ct(i).delete(t)),this.Ue=this.Ue.insert(i,this.ct(i).add(t)),a&&(this.Qe=this.Qe.insert(i,a))}removeTarget(t){this.qe.delete(t)}et(t){const i=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+i.addedDocuments.size-i.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let i=this.qe.get(t);return i||(i=new jv,this.qe.set(t,i)),i}ct(t){let i=this.Ue.get(t);return i||(i=new ke(Nt),this.Ue=this.Ue.insert(t,i)),i}_t(t){let i=this.$e.get(t);return i||(i=new ke(Nt),this.$e=this.$e.insert(t,i)),i}Je(t){const i=this.Xe(t)!==null;return i||dt("WatchChangeAggregator","Detected inactive target",t),i}Xe(t){const i=this.qe.get(t);return i&&i.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new jv),this.ke.getRemoteKeysForTarget(t).forEach(i=>{this.ze(t,i,null)})}ut(t,i){return this.ke.getRemoteKeysForTarget(t).has(i)}}function rc(){return new fe(Tt.comparator)}function qv(){return new fe(Tt.comparator)}const Hw={asc:"ASCENDING",desc:"DESCENDING"},Fw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Gw={and:"AND",or:"OR"};class Qw{constructor(t,i){this.databaseId=t,this.useProto3Json=i}}function Ld(r,t){return r.useProto3Json||kc(t)?t:{value:t}}function wc(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function k0(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function Yw(r,t){return wc(r,t.toTimestamp())}function Li(r){return $t(!!r),Rt.fromTimestamp(function(i){const a=ss(i);return new Pe(a.seconds,a.nanos)}(r))}function cm(r,t){return zd(r,t).canonicalString()}function zd(r,t){const i=function(l){return new oe(["projects",l.projectId,"databases",l.database])}(r).child("documents");return t===void 0?i:i.child(t)}function B0(r){const t=oe.fromString(r);return $t(G0(t)),t}function Pd(r,t){return cm(r.databaseId,t.path)}function hd(r,t){const i=B0(t);if(i.get(1)!==r.databaseId.projectId)throw new pt(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+r.databaseId.projectId);if(i.get(3)!==r.databaseId.database)throw new pt(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+r.databaseId.database);return new Tt(q0(i))}function j0(r,t){return cm(r.databaseId,t)}function Kw(r){const t=B0(r);return t.length===4?oe.emptyPath():q0(t)}function kd(r){return new oe(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function q0(r){return $t(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function Hv(r,t,i){return{name:Pd(r,t),fields:i.value.mapValue.fields}}function Xw(r,t){let i;if("targetChange"in t){t.targetChange;const a=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:wt()}(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],c=function(y,E){return y.useProto3Json?($t(E===void 0||typeof E=="string"),on.fromBase64String(E||"")):($t(E===void 0||E instanceof Buffer||E instanceof Uint8Array),on.fromUint8Array(E||new Uint8Array))}(r,t.targetChange.resumeToken),h=t.targetChange.cause,m=h&&function(y){const E=y.code===void 0?J.UNKNOWN:L0(y.code);return new pt(E,y.message||"")}(h);i=new P0(a,l,c,m||null)}else if("documentChange"in t){t.documentChange;const a=t.documentChange;a.document,a.document.name,a.document.updateTime;const l=hd(r,a.document.name),c=Li(a.document.updateTime),h=a.document.createTime?Li(a.document.createTime):Rt.min(),m=new ii({mapValue:{fields:a.document.fields}}),p=pn.newFoundDocument(l,c,h,m),y=a.targetIds||[],E=a.removedTargetIds||[];i=new dc(y,E,p.key,p)}else if("documentDelete"in t){t.documentDelete;const a=t.documentDelete;a.document;const l=hd(r,a.document),c=a.readTime?Li(a.readTime):Rt.min(),h=pn.newNoDocument(l,c),m=a.removedTargetIds||[];i=new dc([],m,h.key,h)}else if("documentRemove"in t){t.documentRemove;const a=t.documentRemove;a.document;const l=hd(r,a.document),c=a.removedTargetIds||[];i=new dc([],c,l,null)}else{if(!("filter"in t))return wt();{t.filter;const a=t.filter;a.targetId;const{count:l=0,unchangedNames:c}=a,h=new kw(l,c),m=a.targetId;i=new z0(m,h)}}return i}function $w(r,t){let i;if(t instanceof Nl)i={update:Hv(r,t.key,t.value)};else if(t instanceof U0)i={delete:Pd(r,t.key)};else if(t instanceof $s)i={update:Hv(r,t.key,t.data),updateMask:s1(t.fieldMask)};else{if(!(t instanceof Lw))return wt();i={verify:Pd(r,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map(a=>function(c,h){const m=h.transform;if(m instanceof Sc)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Dl)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Il)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Ac)return{fieldPath:h.field.canonicalString(),increment:m.Ie};throw wt()}(0,a))),t.precondition.isNone||(i.currentDocument=function(l,c){return c.updateTime!==void 0?{updateTime:Yw(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:wt()}(r,t.precondition)),i}function Zw(r,t){return r&&r.length>0?($t(t!==void 0),r.map(i=>function(l,c){let h=l.updateTime?Li(l.updateTime):Li(c);return h.isEqual(Rt.min())&&(h=Li(c)),new Mw(h,l.transformResults||[])}(i,t))):[]}function Ww(r,t){return{documents:[j0(r,t.path)]}}function Jw(r,t){const i={structuredQuery:{}},a=t.path;let l;t.collectionGroup!==null?(l=a,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=a.popLast(),i.structuredQuery.from=[{collectionId:a.lastSegment()}]),i.parent=j0(r,l);const c=function(y){if(y.length!==0)return F0(hi.create(y,"and"))}(t.filters);c&&(i.structuredQuery.where=c);const h=function(y){if(y.length!==0)return y.map(E=>function(I){return{field:qa(I.field),direction:n1(I.dir)}}(E))}(t.orderBy);h&&(i.structuredQuery.orderBy=h);const m=Ld(r,t.limit);return m!==null&&(i.structuredQuery.limit=m),t.startAt&&(i.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(t.startAt)),t.endAt&&(i.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(t.endAt)),{ht:i,parent:l}}function t1(r){let t=Kw(r.parent);const i=r.structuredQuery,a=i.from?i.from.length:0;let l=null;if(a>0){$t(a===1);const E=i.from[0];E.allDescendants?l=E.collectionId:t=t.child(E.collectionId)}let c=[];i.where&&(c=function(A){const I=H0(A);return I instanceof hi&&y0(I)?I.getFilters():[I]}(i.where));let h=[];i.orderBy&&(h=function(A){return A.map(I=>function(H){return new bc(Ha(H.field),function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(H.direction))}(I))}(i.orderBy));let m=null;i.limit&&(m=function(A){let I;return I=typeof A=="object"?A.value:A,kc(I)?null:I}(i.limit));let p=null;i.startAt&&(p=function(A){const I=!!A.before,V=A.values||[];return new Tc(V,I)}(i.startAt));let y=null;return i.endAt&&(y=function(A){const I=!A.before,V=A.values||[];return new Tc(V,I)}(i.endAt)),Ew(t,l,h,c,m,"F",p,y)}function e1(r,t){const i=function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return wt()}}(t.purpose);return i==null?null:{"goog-listen-tags":i}}function H0(r){return r.unaryFilter!==void 0?function(i){switch(i.unaryFilter.op){case"IS_NAN":const a=Ha(i.unaryFilter.field);return Re.create(a,"==",{doubleValue:NaN});case"IS_NULL":const l=Ha(i.unaryFilter.field);return Re.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ha(i.unaryFilter.field);return Re.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Ha(i.unaryFilter.field);return Re.create(h,"!=",{nullValue:"NULL_VALUE"});default:return wt()}}(r):r.fieldFilter!==void 0?function(i){return Re.create(Ha(i.fieldFilter.field),function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return wt()}}(i.fieldFilter.op),i.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(i){return hi.create(i.compositeFilter.filters.map(a=>H0(a)),function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return wt()}}(i.compositeFilter.op))}(r):wt()}function n1(r){return Hw[r]}function i1(r){return Fw[r]}function r1(r){return Gw[r]}function qa(r){return{fieldPath:r.canonicalString()}}function Ha(r){return an.fromServerFormat(r.fieldPath)}function F0(r){return r instanceof Re?function(i){if(i.op==="=="){if(xv(i.value))return{unaryFilter:{field:qa(i.field),op:"IS_NAN"}};if(Iv(i.value))return{unaryFilter:{field:qa(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(xv(i.value))return{unaryFilter:{field:qa(i.field),op:"IS_NOT_NAN"}};if(Iv(i.value))return{unaryFilter:{field:qa(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qa(i.field),op:i1(i.op),value:i.value}}}(r):r instanceof hi?function(i){const a=i.getFilters().map(l=>F0(l));return a.length===1?a[0]:{compositeFilter:{op:r1(i.op),filters:a}}}(r):wt()}function s1(r){const t=[];return r.fields.forEach(i=>t.push(i.canonicalString())),{fieldPaths:t}}function G0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(t,i,a,l,c=Rt.min(),h=Rt.min(),m=on.EMPTY_BYTE_STRING,p=null){this.target=t,this.targetId=i,this.purpose=a,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(t){return new $r(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,i){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new $r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(t){this.Tt=t}}function o1(r){const t=t1({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Ud(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(){this.Tn=new u1}addToCollectionParentIndex(t,i){return this.Tn.add(i),Z.resolve()}getCollectionParents(t,i){return Z.resolve(this.Tn.getEntries(i))}addFieldIndex(t,i){return Z.resolve()}deleteFieldIndex(t,i){return Z.resolve()}deleteAllFieldIndexes(t){return Z.resolve()}createTargetIndexes(t,i){return Z.resolve()}getDocumentsMatchingTarget(t,i){return Z.resolve(null)}getIndexType(t,i){return Z.resolve(0)}getFieldIndexes(t,i){return Z.resolve([])}getNextCollectionGroupToUpdate(t){return Z.resolve(null)}getMinOffset(t,i){return Z.resolve(rs.min())}getMinOffsetFromCollectionGroup(t,i){return Z.resolve(rs.min())}updateCollectionGroup(t,i,a){return Z.resolve()}updateIndexEntries(t,i){return Z.resolve()}}class u1{constructor(){this.index={}}add(t){const i=t.lastSegment(),a=t.popLast(),l=this.index[i]||new ke(oe.comparator),c=!l.has(a);return this.index[i]=l.add(a),c}has(t){const i=t.lastSegment(),a=t.popLast(),l=this.index[i];return l&&l.has(a)}getEntries(t){return(this.index[t]||new ke(oe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Q0=41943040;class An{static withCacheSize(t){return new An(t,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,i,a){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */An.DEFAULT_COLLECTION_PERCENTILE=10,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,An.DEFAULT=new An(Q0,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),An.DISABLED=new An(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Un(){return new $a(0)}static Kn(){return new $a(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="LruGarbageCollector",c1=1048576;function Qv([r,t],[i,a]){const l=Nt(r,i);return l===0?Nt(t,a):l}class f1{constructor(t){this.Hn=t,this.buffer=new ke(Qv),this.Jn=0}Yn(){return++this.Jn}Zn(t){const i=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(i);else{const a=this.buffer.last();Qv(i,a)<0&&(this.buffer=this.buffer.delete(a).add(i))}}get maxValue(){return this.buffer.last()[0]}}class h1{constructor(t,i,a){this.garbageCollector=t,this.asyncQueue=i,this.localStore=a,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){dt(Gv,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){no(i)?dt(Gv,"Ignoring IndexedDB error during garbage collection: ",i):await eo(i)}await this.er(3e5)})}}class d1{constructor(t,i){this.tr=t,this.params=i}calculateTargetCount(t,i){return this.tr.nr(t).next(a=>Math.floor(i/100*a))}nthSequenceNumber(t,i){if(i===0)return Z.resolve(Pc.ae);const a=new f1(i);return this.tr.forEachTarget(t,l=>a.Zn(l.sequenceNumber)).next(()=>this.tr.rr(t,l=>a.Zn(l))).next(()=>a.maxValue)}removeTargets(t,i,a){return this.tr.removeTargets(t,i,a)}removeOrphanedDocuments(t,i){return this.tr.removeOrphanedDocuments(t,i)}collect(t,i){return this.params.cacheSizeCollectionThreshold===-1?(dt("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(Fv)):this.getCacheSize(t).next(a=>a<this.params.cacheSizeCollectionThreshold?(dt("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Fv):this.ir(t,i))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,i){let a,l,c,h,m,p,y;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(dt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),l=this.params.maximumSequenceNumbersToCollect):l=A,h=Date.now(),this.nthSequenceNumber(t,l))).next(A=>(a=A,m=Date.now(),this.removeTargets(t,a,i))).next(A=>(c=A,p=Date.now(),this.removeOrphanedDocuments(t,a))).next(A=>(y=Date.now(),Ba()<=Ht.DEBUG&&dt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${l} in `+(m-h)+`ms
	Removed ${c} targets in `+(p-m)+`ms
	Removed ${A} documents in `+(y-p)+`ms
Total Duration: ${y-E}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:A})))}}function m1(r,t){return new d1(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(){this.changes=new Xs(t=>t.toString(),(t,i)=>t.isEqual(i)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,i){this.assertNotApplied(),this.changes.set(t,pn.newInvalidDocument(t).setReadTime(i))}getEntry(t,i){this.assertNotApplied();const a=this.changes.get(i);return a!==void 0?Z.resolve(a):this.getFromCache(t,i)}getEntries(t,i){return this.getAllFromCache(t,i)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(t,i){this.overlayedDocument=t,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(t,i,a,l){this.remoteDocumentCache=t,this.mutationQueue=i,this.documentOverlayCache=a,this.indexManager=l}getDocument(t,i){let a=null;return this.documentOverlayCache.getOverlay(t,i).next(l=>(a=l,this.remoteDocumentCache.getEntry(t,i))).next(l=>(a!==null&&yl(a.mutation,l,fi.empty(),Pe.now()),l))}getDocuments(t,i){return this.remoteDocumentCache.getEntries(t,i).next(a=>this.getLocalViewOfDocuments(t,a,zt()).next(()=>a))}getLocalViewOfDocuments(t,i,a=zt()){const l=qs();return this.populateOverlays(t,l,i).next(()=>this.computeViews(t,i,l,a).next(c=>{let h=fl();return c.forEach((m,p)=>{h=h.insert(m,p.overlayedDocument)}),h}))}getOverlayedDocuments(t,i){const a=qs();return this.populateOverlays(t,a,i).next(()=>this.computeViews(t,i,a,zt()))}populateOverlays(t,i,a){const l=[];return a.forEach(c=>{i.has(c)||l.push(c)}),this.documentOverlayCache.getOverlays(t,l).next(c=>{c.forEach((h,m)=>{i.set(h,m)})})}computeViews(t,i,a,l){let c=gr();const h=pl(),m=function(){return pl()}();return i.forEach((p,y)=>{const E=a.get(y.key);l.has(y.key)&&(E===void 0||E.mutation instanceof $s)?c=c.insert(y.key,y):E!==void 0?(h.set(y.key,E.mutation.getFieldMask()),yl(E.mutation,y,E.mutation.getFieldMask(),Pe.now())):h.set(y.key,fi.empty())}),this.recalculateAndSaveOverlays(t,c).next(p=>(p.forEach((y,E)=>h.set(y,E)),i.forEach((y,E)=>{var A;return m.set(y,new p1(E,(A=h.get(y))!==null&&A!==void 0?A:null))}),m))}recalculateAndSaveOverlays(t,i){const a=pl();let l=new fe((h,m)=>h-m),c=zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,i).next(h=>{for(const m of h)m.keys().forEach(p=>{const y=i.get(p);if(y===null)return;let E=a.get(p)||fi.empty();E=m.applyToLocalView(y,E),a.set(p,E);const A=(l.get(m.batchId)||zt()).add(p);l=l.insert(m.batchId,A)})}).next(()=>{const h=[],m=l.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),y=p.key,E=p.value,A=C0();E.forEach(I=>{if(!c.has(I)){const V=M0(i.get(I),a.get(I));V!==null&&A.set(I,V),c=c.add(I)}}),h.push(this.documentOverlayCache.saveOverlays(t,y,A))}return Z.waitFor(h)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(t,i){return this.remoteDocumentCache.getEntries(t,i).next(a=>this.recalculateAndSaveOverlays(t,a))}getDocumentsMatchingQuery(t,i,a,l){return function(h){return Tt.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(i)?this.getDocumentsMatchingDocumentQuery(t,i.path):b0(i)?this.getDocumentsMatchingCollectionGroupQuery(t,i,a,l):this.getDocumentsMatchingCollectionQuery(t,i,a,l)}getNextDocuments(t,i,a,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,i,a,l).next(c=>{const h=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,i,a.largestBatchId,l-c.size):Z.resolve(qs());let m=Al,p=c;return h.next(y=>Z.forEach(y,(E,A)=>(m<A.largestBatchId&&(m=A.largestBatchId),c.get(E)?Z.resolve():this.remoteDocumentCache.getEntry(t,E).next(I=>{p=p.insert(E,I)}))).next(()=>this.populateOverlays(t,y,c)).next(()=>this.computeViews(t,p,y,zt())).next(E=>({batchId:m,changes:R0(E)})))})}getDocumentsMatchingDocumentQuery(t,i){return this.getDocument(t,new Tt(i)).next(a=>{let l=fl();return a.isFoundDocument()&&(l=l.insert(a.key,a)),l})}getDocumentsMatchingCollectionGroupQuery(t,i,a,l){const c=i.collectionGroup;let h=fl();return this.indexManager.getCollectionParents(t,c).next(m=>Z.forEach(m,p=>{const y=function(A,I){return new Ml(I,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(i,p.child(c));return this.getDocumentsMatchingCollectionQuery(t,y,a,l).next(E=>{E.forEach((A,I)=>{h=h.insert(A,I)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(t,i,a,l){let c;return this.documentOverlayCache.getOverlaysForCollection(t,i.path,a.largestBatchId).next(h=>(c=h,this.remoteDocumentCache.getDocumentsMatchingQuery(t,i,a,c,l))).next(h=>{c.forEach((p,y)=>{const E=y.getKey();h.get(E)===null&&(h=h.insert(E,pn.newInvalidDocument(E)))});let m=fl();return h.forEach((p,y)=>{const E=c.get(p);E!==void 0&&yl(E.mutation,y,fi.empty(),Pe.now()),qc(i,y)&&(m=m.insert(p,y))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,i){return Z.resolve(this.dr.get(i))}saveBundleMetadata(t,i){return this.dr.set(i.id,function(l){return{id:l.id,version:l.version,createTime:Li(l.createTime)}}(i)),Z.resolve()}getNamedQuery(t,i){return Z.resolve(this.Ar.get(i))}saveNamedQuery(t,i){return this.Ar.set(i.name,function(l){return{name:l.name,query:o1(l.bundledQuery),readTime:Li(l.readTime)}}(i)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(){this.overlays=new fe(Tt.comparator),this.Rr=new Map}getOverlay(t,i){return Z.resolve(this.overlays.get(i))}getOverlays(t,i){const a=qs();return Z.forEach(i,l=>this.getOverlay(t,l).next(c=>{c!==null&&a.set(l,c)})).next(()=>a)}saveOverlays(t,i,a){return a.forEach((l,c)=>{this.Et(t,i,c)}),Z.resolve()}removeOverlaysForBatchId(t,i,a){const l=this.Rr.get(a);return l!==void 0&&(l.forEach(c=>this.overlays=this.overlays.remove(c)),this.Rr.delete(a)),Z.resolve()}getOverlaysForCollection(t,i,a){const l=qs(),c=i.length+1,h=new Tt(i.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const p=m.getNext().value,y=p.getKey();if(!i.isPrefixOf(y.path))break;y.path.length===c&&p.largestBatchId>a&&l.set(p.getKey(),p)}return Z.resolve(l)}getOverlaysForCollectionGroup(t,i,a,l){let c=new fe((y,E)=>y-E);const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===i&&y.largestBatchId>a){let E=c.get(y.largestBatchId);E===null&&(E=qs(),c=c.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const m=qs(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,E)=>m.set(y,E)),!(m.size()>=l)););return Z.resolve(m)}Et(t,i,a){const l=this.overlays.get(a.key);if(l!==null){const h=this.Rr.get(l.largestBatchId).delete(a.key);this.Rr.set(l.largestBatchId,h)}this.overlays=this.overlays.insert(a.key,new Pw(i,a));let c=this.Rr.get(i);c===void 0&&(c=zt(),this.Rr.set(i,c)),this.Rr.set(i,c.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(){this.sessionToken=on.EMPTY_BYTE_STRING}getSessionToken(t){return Z.resolve(this.sessionToken)}setSessionToken(t,i){return this.sessionToken=i,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(){this.Vr=new ke(Ke.mr),this.gr=new ke(Ke.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,i){const a=new Ke(t,i);this.Vr=this.Vr.add(a),this.gr=this.gr.add(a)}yr(t,i){t.forEach(a=>this.addReference(a,i))}removeReference(t,i){this.wr(new Ke(t,i))}Sr(t,i){t.forEach(a=>this.removeReference(a,i))}br(t){const i=new Tt(new oe([])),a=new Ke(i,t),l=new Ke(i,t+1),c=[];return this.gr.forEachInRange([a,l],h=>{this.wr(h),c.push(h.key)}),c}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const i=new Tt(new oe([])),a=new Ke(i,t),l=new Ke(i,t+1);let c=zt();return this.gr.forEachInRange([a,l],h=>{c=c.add(h.key)}),c}containsKey(t){const i=new Ke(t,0),a=this.Vr.firstAfterOrEqual(i);return a!==null&&t.isEqual(a.key)}}class Ke{constructor(t,i){this.key=t,this.Cr=i}static mr(t,i){return Tt.comparator(t.key,i.key)||Nt(t.Cr,i.Cr)}static pr(t,i){return Nt(t.Cr,i.Cr)||Tt.comparator(t.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(t,i){this.indexManager=t,this.referenceDelegate=i,this.mutationQueue=[],this.Fr=1,this.Mr=new ke(Ke.mr)}checkEmpty(t){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(t,i,a,l){const c=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new zw(c,i,a,l);this.mutationQueue.push(h);for(const m of l)this.Mr=this.Mr.add(new Ke(m.key,c)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return Z.resolve(h)}lookupMutationBatch(t,i){return Z.resolve(this.Or(i))}getNextMutationBatchAfterBatchId(t,i){const a=i+1,l=this.Nr(a),c=l<0?0:l;return Z.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?nm:this.Fr-1)}getAllMutationBatches(t){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,i){const a=new Ke(i,0),l=new Ke(i,Number.POSITIVE_INFINITY),c=[];return this.Mr.forEachInRange([a,l],h=>{const m=this.Or(h.Cr);c.push(m)}),Z.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,i){let a=new ke(Nt);return i.forEach(l=>{const c=new Ke(l,0),h=new Ke(l,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([c,h],m=>{a=a.add(m.Cr)})}),Z.resolve(this.Br(a))}getAllMutationBatchesAffectingQuery(t,i){const a=i.path,l=a.length+1;let c=a;Tt.isDocumentKey(c)||(c=c.child(""));const h=new Ke(new Tt(c),0);let m=new ke(Nt);return this.Mr.forEachWhile(p=>{const y=p.key.path;return!!a.isPrefixOf(y)&&(y.length===l&&(m=m.add(p.Cr)),!0)},h),Z.resolve(this.Br(m))}Br(t){const i=[];return t.forEach(a=>{const l=this.Or(a);l!==null&&i.push(l)}),i}removeMutationBatch(t,i){$t(this.Lr(i.batchId,"removed")===0),this.mutationQueue.shift();let a=this.Mr;return Z.forEach(i.mutations,l=>{const c=new Ke(l.key,i.batchId);return a=a.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)}).next(()=>{this.Mr=a})}qn(t){}containsKey(t,i){const a=new Ke(i,0),l=this.Mr.firstAfterOrEqual(a);return Z.resolve(i.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,Z.resolve()}Lr(t,i){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const i=this.Nr(t);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(t){this.kr=t,this.docs=function(){return new fe(Tt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,i){const a=i.key,l=this.docs.get(a),c=l?l.size:0,h=this.kr(i);return this.docs=this.docs.insert(a,{document:i.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(t,a.path.popLast())}removeEntry(t){const i=this.docs.get(t);i&&(this.docs=this.docs.remove(t),this.size-=i.size)}getEntry(t,i){const a=this.docs.get(i);return Z.resolve(a?a.document.mutableCopy():pn.newInvalidDocument(i))}getEntries(t,i){let a=gr();return i.forEach(l=>{const c=this.docs.get(l);a=a.insert(l,c?c.document.mutableCopy():pn.newInvalidDocument(l))}),Z.resolve(a)}getDocumentsMatchingQuery(t,i,a,l){let c=gr();const h=i.path,m=new Tt(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:y,value:{document:E}}=p.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||WA(ZA(E),a)<=0||(l.has(E.key)||qc(i,E))&&(c=c.insert(E.key,E.mutableCopy()))}return Z.resolve(c)}getAllFromCollectionGroup(t,i,a,l){wt()}qr(t,i){return Z.forEach(this.docs,a=>i(a))}newChangeBuffer(t){return new S1(this)}getSize(t){return Z.resolve(this.size)}}class S1 extends g1{constructor(t){super(),this.Ir=t}applyChanges(t){const i=[];return this.changes.forEach((a,l)=>{l.isValidDocument()?i.push(this.Ir.addEntry(t,l)):this.Ir.removeEntry(a)}),Z.waitFor(i)}getFromCache(t,i){return this.Ir.getEntry(t,i)}getAllFromCache(t,i){return this.Ir.getEntries(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(t){this.persistence=t,this.Qr=new Xs(i=>sm(i),am),this.lastRemoteSnapshotVersion=Rt.min(),this.highestTargetId=0,this.$r=0,this.Ur=new fm,this.targetCount=0,this.Kr=$a.Un()}forEachTarget(t,i){return this.Qr.forEach((a,l)=>i(l)),Z.resolve()}getLastRemoteSnapshotVersion(t){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Z.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Kr.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(t,i,a){return a&&(this.lastRemoteSnapshotVersion=a),i>this.$r&&(this.$r=i),Z.resolve()}zn(t){this.Qr.set(t.target,t);const i=t.targetId;i>this.highestTargetId&&(this.Kr=new $a(i),this.highestTargetId=i),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,i){return this.zn(i),this.targetCount+=1,Z.resolve()}updateTargetData(t,i){return this.zn(i),Z.resolve()}removeTargetData(t,i){return this.Qr.delete(i.target),this.Ur.br(i.targetId),this.targetCount-=1,Z.resolve()}removeTargets(t,i,a){let l=0;const c=[];return this.Qr.forEach((h,m)=>{m.sequenceNumber<=i&&a.get(m.targetId)===null&&(this.Qr.delete(h),c.push(this.removeMatchingKeysForTargetId(t,m.targetId)),l++)}),Z.waitFor(c).next(()=>l)}getTargetCount(t){return Z.resolve(this.targetCount)}getTargetData(t,i){const a=this.Qr.get(i)||null;return Z.resolve(a)}addMatchingKeys(t,i,a){return this.Ur.yr(i,a),Z.resolve()}removeMatchingKeys(t,i,a){this.Ur.Sr(i,a);const l=this.persistence.referenceDelegate,c=[];return l&&i.forEach(h=>{c.push(l.markPotentiallyOrphaned(t,h))}),Z.waitFor(c)}removeMatchingKeysForTargetId(t,i){return this.Ur.br(i),Z.resolve()}getMatchingKeysForTargetId(t,i){const a=this.Ur.vr(i);return Z.resolve(a)}containsKey(t,i){return Z.resolve(this.Ur.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(t,i){this.Wr={},this.overlays={},this.Gr=new Pc(0),this.zr=!1,this.zr=!0,this.jr=new E1,this.referenceDelegate=t(this),this.Hr=new A1(this),this.indexManager=new l1,this.remoteDocumentCache=function(l){return new b1(l)}(a=>this.referenceDelegate.Jr(a)),this.serializer=new a1(i),this.Yr=new v1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let i=this.overlays[t.toKey()];return i||(i=new _1,this.overlays[t.toKey()]=i),i}getMutationQueue(t,i){let a=this.Wr[t.toKey()];return a||(a=new T1(i,this.referenceDelegate),this.Wr[t.toKey()]=a),a}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,i,a){dt("MemoryPersistence","Starting transaction:",t);const l=new w1(this.Gr.next());return this.referenceDelegate.Zr(),a(l).next(c=>this.referenceDelegate.Xr(l).next(()=>c)).toPromise().then(c=>(l.raiseOnCommittedEvent(),c))}ei(t,i){return Z.or(Object.values(this.Wr).map(a=>()=>a.containsKey(t,i)))}}class w1 extends tw{constructor(t){super(),this.currentSequenceNumber=t}}class hm{constructor(t){this.persistence=t,this.ti=new fm,this.ni=null}static ri(t){return new hm(t)}get ii(){if(this.ni)return this.ni;throw wt()}addReference(t,i,a){return this.ti.addReference(a,i),this.ii.delete(a.toString()),Z.resolve()}removeReference(t,i,a){return this.ti.removeReference(a,i),this.ii.add(a.toString()),Z.resolve()}markPotentiallyOrphaned(t,i){return this.ii.add(i.toString()),Z.resolve()}removeTarget(t,i){this.ti.br(i.targetId).forEach(l=>this.ii.add(l.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(t,i.targetId).next(l=>{l.forEach(c=>this.ii.add(c.toString()))}).next(()=>a.removeTargetData(t,i))}Zr(){this.ni=new Set}Xr(t){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.ii,a=>{const l=Tt.fromPath(a);return this.si(t,l).next(c=>{c||i.removeEntry(l,Rt.min())})}).next(()=>(this.ni=null,i.apply(t)))}updateLimboDocument(t,i){return this.si(t,i).next(a=>{a?this.ii.delete(i.toString()):this.ii.add(i.toString())})}Jr(t){return 0}si(t,i){return Z.or([()=>Z.resolve(this.ti.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(t,i),()=>this.persistence.ei(t,i)])}}class Rc{constructor(t,i){this.persistence=t,this.oi=new Xs(a=>iw(a.path),(a,l)=>a.isEqual(l)),this.garbageCollector=m1(this,i)}static ri(t,i){return new Rc(t,i)}Zr(){}Xr(t){return Z.resolve()}forEachTarget(t,i){return this.persistence.getTargetCache().forEachTarget(t,i)}nr(t){const i=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(a=>i.next(l=>a+l))}sr(t){let i=0;return this.rr(t,a=>{i++}).next(()=>i)}rr(t,i){return Z.forEach(this.oi,(a,l)=>this.ar(t,a,l).next(c=>c?Z.resolve():i(l)))}removeTargets(t,i,a){return this.persistence.getTargetCache().removeTargets(t,i,a)}removeOrphanedDocuments(t,i){let a=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.qr(t,h=>this.ar(t,h,i).next(m=>{m||(a++,c.removeEntry(h,Rt.min()))})).next(()=>c.apply(t)).next(()=>a)}markPotentiallyOrphaned(t,i){return this.oi.set(i,t.currentSequenceNumber),Z.resolve()}removeTarget(t,i){const a=i.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,a)}addReference(t,i,a){return this.oi.set(a,t.currentSequenceNumber),Z.resolve()}removeReference(t,i,a){return this.oi.set(a,t.currentSequenceNumber),Z.resolve()}updateLimboDocument(t,i){return this.oi.set(i,t.currentSequenceNumber),Z.resolve()}Jr(t){let i=t.key.toString().length;return t.isFoundDocument()&&(i+=cc(t.data.value)),i}ar(t,i,a){return Z.or([()=>this.persistence.ei(t,i),()=>this.persistence.getTargetCache().containsKey(t,i),()=>{const l=this.oi.get(i);return Z.resolve(l!==void 0&&l>a)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(t,i,a,l){this.targetId=t,this.fromCache=i,this.Hi=a,this.Ji=l}static Yi(t,i){let a=zt(),l=zt();for(const c of i.docChanges)switch(c.type){case 0:a=a.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new dm(t,i.fromCache,a,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return TS()?8:ew(vS())>0?6:4}()}initialize(t,i){this.ns=t,this.indexManager=i,this.Zi=!0}getDocumentsMatchingQuery(t,i,a,l){const c={result:null};return this.rs(t,i).next(h=>{c.result=h}).next(()=>{if(!c.result)return this.ss(t,i,l,a).next(h=>{c.result=h})}).next(()=>{if(c.result)return;const h=new R1;return this._s(t,i,h).next(m=>{if(c.result=m,this.Xi)return this.us(t,i,h,m.size)})}).next(()=>c.result)}us(t,i,a,l){return a.documentReadCount<this.es?(Ba()<=Ht.DEBUG&&dt("QueryEngine","SDK will not create cache indexes for query:",ja(i),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Z.resolve()):(Ba()<=Ht.DEBUG&&dt("QueryEngine","Query:",ja(i),"scans",a.documentReadCount,"local documents and returns",l,"documents as results."),a.documentReadCount>this.ts*l?(Ba()<=Ht.DEBUG&&dt("QueryEngine","The SDK decides to create cache indexes for query:",ja(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ui(i))):Z.resolve())}rs(t,i){if(Nv(i))return Z.resolve(null);let a=Ui(i);return this.indexManager.getIndexType(t,a).next(l=>l===0?null:(i.limit!==null&&l===1&&(i=Ud(i,null,"F"),a=Ui(i)),this.indexManager.getDocumentsMatchingTarget(t,a).next(c=>{const h=zt(...c);return this.ns.getDocuments(t,h).next(m=>this.indexManager.getMinOffset(t,a).next(p=>{const y=this.cs(i,m);return this.ls(i,y,h,p.readTime)?this.rs(t,Ud(i,null,"F")):this.hs(t,y,i,p)}))})))}ss(t,i,a,l){return Nv(i)||l.isEqual(Rt.min())?Z.resolve(null):this.ns.getDocuments(t,a).next(c=>{const h=this.cs(i,c);return this.ls(i,h,a,l)?Z.resolve(null):(Ba()<=Ht.DEBUG&&dt("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),ja(i)),this.hs(t,h,i,$A(l,Al)).next(m=>m))})}cs(t,i){let a=new ke(A0(t));return i.forEach((l,c)=>{qc(t,c)&&(a=a.add(c))}),a}ls(t,i,a,l){if(t.limit===null)return!1;if(a.size!==i.size)return!0;const c=t.limitType==="F"?i.last():i.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}_s(t,i,a){return Ba()<=Ht.DEBUG&&dt("QueryEngine","Using full collection scan to execute query:",ja(i)),this.ns.getDocumentsMatchingQuery(t,i,rs.min(),a)}hs(t,i,a,l){return this.ns.getDocumentsMatchingQuery(t,a,l).next(c=>(i.forEach(h=>{c=c.insert(h.key,h)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="LocalStore",D1=3e8;class I1{constructor(t,i,a,l){this.persistence=t,this.Ps=i,this.serializer=l,this.Ts=new fe(Nt),this.Is=new Xs(c=>sm(c),am),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(a)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new y1(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>t.collect(i,this.Ts))}}function x1(r,t,i,a){return new I1(r,t,i,a)}async function K0(r,t){const i=Dt(r);return await i.persistence.runTransaction("Handle user change","readonly",a=>{let l;return i.mutationQueue.getAllMutationBatches(a).next(c=>(l=c,i.As(t),i.mutationQueue.getAllMutationBatches(a))).next(c=>{const h=[],m=[];let p=zt();for(const y of l){h.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}for(const y of c){m.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}return i.localDocuments.getDocuments(a,p).next(y=>({Rs:y,removedBatchIds:h,addedBatchIds:m}))})})}function V1(r,t){const i=Dt(r);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const l=t.batch.keys(),c=i.ds.newChangeBuffer({trackRemovals:!0});return function(m,p,y,E){const A=y.batch,I=A.keys();let V=Z.resolve();return I.forEach(H=>{V=V.next(()=>E.getEntry(p,H)).next(F=>{const q=y.docVersions.get(H);$t(q!==null),F.version.compareTo(q)<0&&(A.applyToRemoteDocument(F,y),F.isValidDocument()&&(F.setReadTime(y.commitVersion),E.addEntry(F)))})}),V.next(()=>m.mutationQueue.removeMutationBatch(p,A))}(i,a,t,c).next(()=>c.apply(a)).next(()=>i.mutationQueue.performConsistencyCheck(a)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(a,l,t.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(m){let p=zt();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(p=p.add(m.batch.mutations[y].key));return p}(t))).next(()=>i.localDocuments.getDocuments(a,l))})}function X0(r){const t=Dt(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",i=>t.Hr.getLastRemoteSnapshotVersion(i))}function O1(r,t){const i=Dt(r),a=t.snapshotVersion;let l=i.Ts;return i.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const h=i.ds.newChangeBuffer({trackRemovals:!0});l=i.Ts;const m=[];t.targetChanges.forEach((E,A)=>{const I=l.get(A);if(!I)return;m.push(i.Hr.removeMatchingKeys(c,E.removedDocuments,A).next(()=>i.Hr.addMatchingKeys(c,E.addedDocuments,A)));let V=I.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(A)!==null?V=V.withResumeToken(on.EMPTY_BYTE_STRING,Rt.min()).withLastLimboFreeSnapshotVersion(Rt.min()):E.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(E.resumeToken,a)),l=l.insert(A,V),function(F,q,et){return F.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=D1?!0:et.addedDocuments.size+et.modifiedDocuments.size+et.removedDocuments.size>0}(I,V,E)&&m.push(i.Hr.updateTargetData(c,V))});let p=gr(),y=zt();if(t.documentUpdates.forEach(E=>{t.resolvedLimboDocuments.has(E)&&m.push(i.persistence.referenceDelegate.updateLimboDocument(c,E))}),m.push(M1(c,h,t.documentUpdates).next(E=>{p=E.Vs,y=E.fs})),!a.isEqual(Rt.min())){const E=i.Hr.getLastRemoteSnapshotVersion(c).next(A=>i.Hr.setTargetsMetadata(c,c.currentSequenceNumber,a));m.push(E)}return Z.waitFor(m).next(()=>h.apply(c)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,p,y)).next(()=>p)}).then(c=>(i.Ts=l,c))}function M1(r,t,i){let a=zt(),l=zt();return i.forEach(c=>a=a.add(c)),t.getEntries(r,a).next(c=>{let h=gr();return i.forEach((m,p)=>{const y=c.get(m);p.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(m)),p.isNoDocument()&&p.version.isEqual(Rt.min())?(t.removeEntry(m,p.readTime),h=h.insert(m,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(t.addEntry(p),h=h.insert(m,p)):dt(mm,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",p.version)}),{Vs:h,fs:l}})}function N1(r,t){const i=Dt(r);return i.persistence.runTransaction("Get next mutation batch","readonly",a=>(t===void 0&&(t=nm),i.mutationQueue.getNextMutationBatchAfterBatchId(a,t)))}function U1(r,t){const i=Dt(r);return i.persistence.runTransaction("Allocate target","readwrite",a=>{let l;return i.Hr.getTargetData(a,t).next(c=>c?(l=c,Z.resolve(l)):i.Hr.allocateTargetId(a).next(h=>(l=new $r(t,h,"TargetPurposeListen",a.currentSequenceNumber),i.Hr.addTargetData(a,l).next(()=>l))))}).then(a=>{const l=i.Ts.get(a.targetId);return(l===null||a.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(i.Ts=i.Ts.insert(a.targetId,a),i.Is.set(t,a.targetId)),a})}async function Bd(r,t,i){const a=Dt(r),l=a.Ts.get(t),c=i?"readwrite":"readwrite-primary";try{i||await a.persistence.runTransaction("Release target",c,h=>a.persistence.referenceDelegate.removeTarget(h,l))}catch(h){if(!no(h))throw h;dt(mm,`Failed to update sequence numbers for target ${t}: ${h}`)}a.Ts=a.Ts.remove(t),a.Is.delete(l.target)}function Yv(r,t,i){const a=Dt(r);let l=Rt.min(),c=zt();return a.persistence.runTransaction("Execute query","readwrite",h=>function(p,y,E){const A=Dt(p),I=A.Is.get(E);return I!==void 0?Z.resolve(A.Ts.get(I)):A.Hr.getTargetData(y,E)}(a,h,Ui(t)).next(m=>{if(m)return l=m.lastLimboFreeSnapshotVersion,a.Hr.getMatchingKeysForTargetId(h,m.targetId).next(p=>{c=p})}).next(()=>a.Ps.getDocumentsMatchingQuery(h,t,i?l:Rt.min(),i?c:zt())).next(m=>(L1(a,bw(t),m),{documents:m,gs:c})))}function L1(r,t,i){let a=r.Es.get(t)||Rt.min();i.forEach((l,c)=>{c.readTime.compareTo(a)>0&&(a=c.readTime)}),r.Es.set(t,a)}class Kv{constructor(){this.activeTargetIds=Dw()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class z1{constructor(){this.ho=new Kv,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,i,a){}addLocalQueryTarget(t,i=!0){return i&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,i,a){this.Po[t]=i}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new Kv,Promise.resolve()}handleUserChange(t,i,a){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="ConnectivityMonitor";class $v{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){dt(Xv,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){dt(Xv,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sc=null;function jd(){return sc===null?sc=function(){return 268435456+Math.round(2147483648*Math.random())}():sc++,"0x"+sc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd="RestConnection",k1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class B1{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.po=i+"://"+t.host,this.yo=`projects/${a}/databases/${l}`,this.wo=this.databaseId.database===_c?`project_id=${a}`:`project_id=${a}&database_id=${l}`}So(t,i,a,l,c){const h=jd(),m=this.bo(t,i.toUriEncodedString());dt(dd,`Sending RPC '${t}' ${h}:`,m,a);const p={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(p,l,c),this.vo(t,m,p,a).then(y=>(dt(dd,`Received RPC '${t}' ${h}: `,y),y),y=>{throw Qa(dd,`RPC '${t}' ${h} failed with error: `,y,"url: ",m,"request:",a),y})}Co(t,i,a,l,c,h){return this.So(t,i,a,l,c)}Do(t,i,a){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+to}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((l,c)=>t[c]=l),a&&a.headers.forEach((l,c)=>t[c]=l)}bo(t,i){const a=k1[t];return`${this.po}/v1/${i}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Uo(t){this.ko(t)}Ko(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn="WebChannelConnection";class q1 extends B1{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,i,a,l){const c=jd();return new Promise((h,m)=>{const p=new Z_;p.setWithCredentials(!0),p.listenOnce(W_.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case uc.NO_ERROR:const E=p.getResponseJson();dt(mn,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(E)),h(E);break;case uc.TIMEOUT:dt(mn,`RPC '${t}' ${c} timed out`),m(new pt(J.DEADLINE_EXCEEDED,"Request time out"));break;case uc.HTTP_ERROR:const A=p.getStatus();if(dt(mn,`RPC '${t}' ${c} failed with status:`,A,"response text:",p.getResponseText()),A>0){let I=p.getResponseJson();Array.isArray(I)&&(I=I[0]);const V=I==null?void 0:I.error;if(V&&V.status&&V.message){const H=function(q){const et=q.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(et)>=0?et:J.UNKNOWN}(V.status);m(new pt(H,V.message))}else m(new pt(J.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new pt(J.UNAVAILABLE,"Connection failed."));break;default:wt()}}finally{dt(mn,`RPC '${t}' ${c} completed.`)}});const y=JSON.stringify(l);dt(mn,`RPC '${t}' ${c} sending request:`,l),p.send(i,"POST",y,a,15)})}Wo(t,i,a){const l=jd(),c=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],h=e0(),m=t0(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Do(p.initMessageHeaders,i,a),p.encodeInitMessageHeaders=!0;const E=c.join("");dt(mn,`Creating RPC '${t}' stream ${l}: ${E}`,p);const A=h.createWebChannel(E,p);let I=!1,V=!1;const H=new j1({Fo:q=>{V?dt(mn,`Not sending because RPC '${t}' stream ${l} is closed:`,q):(I||(dt(mn,`Opening RPC '${t}' stream ${l} transport.`),A.open(),I=!0),dt(mn,`RPC '${t}' stream ${l} sending:`,q),A.send(q))},Mo:()=>A.close()}),F=(q,et,X)=>{q.listen(et,nt=>{try{X(nt)}catch(ft){setTimeout(()=>{throw ft},0)}})};return F(A,cl.EventType.OPEN,()=>{V||(dt(mn,`RPC '${t}' stream ${l} transport opened.`),H.Qo())}),F(A,cl.EventType.CLOSE,()=>{V||(V=!0,dt(mn,`RPC '${t}' stream ${l} transport closed`),H.Uo())}),F(A,cl.EventType.ERROR,q=>{V||(V=!0,Qa(mn,`RPC '${t}' stream ${l} transport errored:`,q),H.Uo(new pt(J.UNAVAILABLE,"The operation could not be completed")))}),F(A,cl.EventType.MESSAGE,q=>{var et;if(!V){const X=q.data[0];$t(!!X);const nt=X,ft=(nt==null?void 0:nt.error)||((et=nt[0])===null||et===void 0?void 0:et.error);if(ft){dt(mn,`RPC '${t}' stream ${l} received error:`,ft);const lt=ft.status;let ht=function(S){const D=we[S];if(D!==void 0)return L0(D)}(lt),O=ft.message;ht===void 0&&(ht=J.INTERNAL,O="Unknown error status: "+lt+" with message "+ft.message),V=!0,H.Uo(new pt(ht,O)),A.close()}else dt(mn,`RPC '${t}' stream ${l} received:`,X),H.Ko(X)}}),F(m,J_.STAT_EVENT,q=>{q.stat===Dd.PROXY?dt(mn,`RPC '${t}' stream ${l} detected buffering proxy`):q.stat===Dd.NOPROXY&&dt(mn,`RPC '${t}' stream ${l} detected no buffering proxy`)}),setTimeout(()=>{H.$o()},0),H}}function md(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(r){return new Qw(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(t,i,a=1e3,l=1.5,c=6e4){this.Ti=t,this.timerId=i,this.Go=a,this.zo=l,this.jo=c,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const i=Math.floor(this.Ho+this.e_()),a=Math.max(0,Date.now()-this.Yo),l=Math.max(0,i-a);l>0&&dt("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.Ho} ms, delay with jitter: ${i} ms, last attempt: ${a} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,l,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv="PersistentStream";class Z0{constructor(t,i,a,l,c,h,m,p){this.Ti=t,this.n_=a,this.r_=l,this.connection=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new $0(t,i)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,i){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():i&&i.code===J.RESOURCE_EXHAUSTED?(mr(i.toString()),mr("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):i&&i.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(i)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),i=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,l])=>{this.i_===i&&this.V_(a,l)},a=>{t(()=>{const l=new pt(J.UNKNOWN,"Fetching auth token failed: "+a.message);return this.m_(l)})})}V_(t,i){const a=this.R_(this.i_);this.stream=this.f_(t,i),this.stream.xo(()=>{a(()=>this.listener.xo())}),this.stream.No(()=>{a(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(l=>{a(()=>this.m_(l))}),this.stream.onMessage(l=>{a(()=>++this.__==1?this.g_(l):this.onNext(l))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return dt(Zv,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return i=>{this.Ti.enqueueAndForget(()=>this.i_===t?i():(dt(Zv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class H1 extends Z0{constructor(t,i,a,l,c,h){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,a,l,h),this.serializer=c}f_(t,i){return this.connection.Wo("Listen",t,i)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const i=Xw(this.serializer,t),a=function(c){if(!("targetChange"in c))return Rt.min();const h=c.targetChange;return h.targetIds&&h.targetIds.length?Rt.min():h.readTime?Li(h.readTime):Rt.min()}(t);return this.listener.p_(i,a)}y_(t){const i={};i.database=kd(this.serializer),i.addTarget=function(c,h){let m;const p=h.target;if(m=Md(p)?{documents:Ww(c,p)}:{query:Jw(c,p).ht},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=k0(c,h.resumeToken);const y=Ld(c,h.expectedCount);y!==null&&(m.expectedCount=y)}else if(h.snapshotVersion.compareTo(Rt.min())>0){m.readTime=wc(c,h.snapshotVersion.toTimestamp());const y=Ld(c,h.expectedCount);y!==null&&(m.expectedCount=y)}return m}(this.serializer,t);const a=e1(this.serializer,t);a&&(i.labels=a),this.I_(i)}w_(t){const i={};i.database=kd(this.serializer),i.removeTarget=t,this.I_(i)}}class F1 extends Z0{constructor(t,i,a,l,c,h){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,a,l,h),this.serializer=c}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(t,i){return this.connection.Wo("Write",t,i)}g_(t){return $t(!!t.streamToken),this.lastStreamToken=t.streamToken,$t(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){$t(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const i=Zw(t.writeResults,t.commitTime),a=Li(t.commitTime);return this.listener.v_(a,i)}C_(){const t={};t.database=kd(this.serializer),this.I_(t)}b_(t){const i={streamToken:this.lastStreamToken,writes:t.map(a=>$w(this.serializer,a))};this.I_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{}class Q1 extends G1{constructor(t,i,a,l){super(),this.authCredentials=t,this.appCheckCredentials=i,this.connection=a,this.serializer=l,this.F_=!1}M_(){if(this.F_)throw new pt(J.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,i,a,l){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.So(t,zd(i,a),l,c,h)).catch(c=>{throw c.name==="FirebaseError"?(c.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pt(J.UNKNOWN,c.toString())})}Co(t,i,a,l,c){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,m])=>this.connection.Co(t,zd(i,a),l,h,m,c)).catch(h=>{throw h.name==="FirebaseError"?(h.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new pt(J.UNKNOWN,h.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class Y1{constructor(t,i){this.asyncQueue=t,this.onlineStateHandler=i,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const i=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(mr(i),this.N_=!1):dt("OnlineStateTracker",i)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="RemoteStore";class K1{constructor(t,i,a,l,c){this.localStore=t,this.datastore=i,this.asyncQueue=a,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=c,this.z_.To(h=>{a.enqueueAndForget(async()=>{Zs(this)&&(dt(Gs,"Restarting streams for network reachability change."),await async function(p){const y=Dt(p);y.W_.add(4),await Ll(y),y.j_.set("Unknown"),y.W_.delete(4),await Yc(y)}(this))})}),this.j_=new Y1(a,l)}}async function Yc(r){if(Zs(r))for(const t of r.G_)await t(!0)}async function Ll(r){for(const t of r.G_)await t(!1)}function W0(r,t){const i=Dt(r);i.K_.has(t.targetId)||(i.K_.set(t.targetId,t),vm(i)?ym(i):io(i).c_()&&pm(i,t))}function gm(r,t){const i=Dt(r),a=io(i);i.K_.delete(t),a.c_()&&J0(i,t),i.K_.size===0&&(a.c_()?a.P_():Zs(i)&&i.j_.set("Unknown"))}function pm(r,t){if(r.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Rt.min())>0){const i=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}io(r).y_(t)}function J0(r,t){r.H_.Ne(t),io(r).w_(t)}function ym(r){r.H_=new qw({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>r.K_.get(t)||null,it:()=>r.datastore.serializer.databaseId}),io(r).start(),r.j_.B_()}function vm(r){return Zs(r)&&!io(r).u_()&&r.K_.size>0}function Zs(r){return Dt(r).W_.size===0}function tE(r){r.H_=void 0}async function X1(r){r.j_.set("Online")}async function $1(r){r.K_.forEach((t,i)=>{pm(r,t)})}async function Z1(r,t){tE(r),vm(r)?(r.j_.q_(t),ym(r)):r.j_.set("Unknown")}async function W1(r,t,i){if(r.j_.set("Online"),t instanceof P0&&t.state===2&&t.cause)try{await async function(l,c){const h=c.cause;for(const m of c.targetIds)l.K_.has(m)&&(await l.remoteSyncer.rejectListen(m,h),l.K_.delete(m),l.H_.removeTarget(m))}(r,t)}catch(a){dt(Gs,"Failed to remove targets %s: %s ",t.targetIds.join(","),a),await Cc(r,a)}else if(t instanceof dc?r.H_.We(t):t instanceof z0?r.H_.Ze(t):r.H_.je(t),!i.isEqual(Rt.min()))try{const a=await X0(r.localStore);i.compareTo(a)>=0&&await function(c,h){const m=c.H_.ot(h);return m.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const E=c.K_.get(y);E&&c.K_.set(y,E.withResumeToken(p.resumeToken,h))}}),m.targetMismatches.forEach((p,y)=>{const E=c.K_.get(p);if(!E)return;c.K_.set(p,E.withResumeToken(on.EMPTY_BYTE_STRING,E.snapshotVersion)),J0(c,p);const A=new $r(E.target,p,y,E.sequenceNumber);pm(c,A)}),c.remoteSyncer.applyRemoteEvent(m)}(r,i)}catch(a){dt(Gs,"Failed to raise snapshot:",a),await Cc(r,a)}}async function Cc(r,t,i){if(!no(t))throw t;r.W_.add(1),await Ll(r),r.j_.set("Offline"),i||(i=()=>X0(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{dt(Gs,"Retrying IndexedDB access"),await i(),r.W_.delete(1),await Yc(r)})}function eE(r,t){return t().catch(i=>Cc(r,i,t))}async function Kc(r){const t=Dt(r),i=ls(t);let a=t.U_.length>0?t.U_[t.U_.length-1].batchId:nm;for(;J1(t);)try{const l=await N1(t.localStore,a);if(l===null){t.U_.length===0&&i.P_();break}a=l.batchId,tR(t,l)}catch(l){await Cc(t,l)}nE(t)&&iE(t)}function J1(r){return Zs(r)&&r.U_.length<10}function tR(r,t){r.U_.push(t);const i=ls(r);i.c_()&&i.S_&&i.b_(t.mutations)}function nE(r){return Zs(r)&&!ls(r).u_()&&r.U_.length>0}function iE(r){ls(r).start()}async function eR(r){ls(r).C_()}async function nR(r){const t=ls(r);for(const i of r.U_)t.b_(i.mutations)}async function iR(r,t,i){const a=r.U_.shift(),l=lm.from(a,t,i);await eE(r,()=>r.remoteSyncer.applySuccessfulWrite(l)),await Kc(r)}async function rR(r,t){t&&ls(r).S_&&await async function(a,l){if(function(h){return Bw(h)&&h!==J.ABORTED}(l.code)){const c=a.U_.shift();ls(a).h_(),await eE(a,()=>a.remoteSyncer.rejectFailedWrite(c.batchId,l)),await Kc(a)}}(r,t),nE(r)&&iE(r)}async function Wv(r,t){const i=Dt(r);i.asyncQueue.verifyOperationInProgress(),dt(Gs,"RemoteStore received new credentials");const a=Zs(i);i.W_.add(3),await Ll(i),a&&i.j_.set("Unknown"),await i.remoteSyncer.handleCredentialChange(t),i.W_.delete(3),await Yc(i)}async function sR(r,t){const i=Dt(r);t?(i.W_.delete(2),await Yc(i)):t||(i.W_.add(2),await Ll(i),i.j_.set("Unknown"))}function io(r){return r.J_||(r.J_=function(i,a,l){const c=Dt(i);return c.M_(),new H1(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)}(r.datastore,r.asyncQueue,{xo:X1.bind(null,r),No:$1.bind(null,r),Lo:Z1.bind(null,r),p_:W1.bind(null,r)}),r.G_.push(async t=>{t?(r.J_.h_(),vm(r)?ym(r):r.j_.set("Unknown")):(await r.J_.stop(),tE(r))})),r.J_}function ls(r){return r.Y_||(r.Y_=function(i,a,l){const c=Dt(i);return c.M_(),new F1(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)}(r.datastore,r.asyncQueue,{xo:()=>Promise.resolve(),No:eR.bind(null,r),Lo:rR.bind(null,r),D_:nR.bind(null,r),v_:iR.bind(null,r)}),r.G_.push(async t=>{t?(r.Y_.h_(),await Kc(r)):(await r.Y_.stop(),r.U_.length>0&&(dt(Gs,`Stopping write stream with ${r.U_.length} pending writes`),r.U_=[]))})),r.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(t,i,a,l,c){this.asyncQueue=t,this.timerId=i,this.targetTimeMs=a,this.op=l,this.removalCallback=c,this.deferred=new ts,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,i,a,l,c){const h=Date.now()+a,m=new _m(t,i,h,l,c);return m.start(a),m}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pt(J.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Em(r,t){if(mr("AsyncQueue",`${t}: ${r}`),no(r))return new pt(J.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{static emptySet(t){return new Fa(t.comparator)}constructor(t){this.comparator=t?(i,a)=>t(i,a)||Tt.comparator(i.key,a.key):(i,a)=>Tt.comparator(i.key,a.key),this.keyedMap=fl(),this.sortedSet=new fe(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const i=this.keyedMap.get(t);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((i,a)=>(t(i),!1))}add(t){const i=this.delete(t.key);return i.copy(i.keyedMap.insert(t.key,t),i.sortedSet.insert(t,null))}delete(t){const i=this.get(t);return i?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(i)):this}isEqual(t){if(!(t instanceof Fa)||this.size!==t.size)return!1;const i=this.sortedSet.getIterator(),a=t.sortedSet.getIterator();for(;i.hasNext();){const l=i.getNext().key,c=a.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach(i=>{t.push(i.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,i){const a=new Fa;return a.comparator=this.comparator,a.keyedMap=t,a.sortedSet=i,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(){this.Z_=new fe(Tt.comparator)}track(t){const i=t.doc.key,a=this.Z_.get(i);a?t.type!==0&&a.type===3?this.Z_=this.Z_.insert(i,t):t.type===3&&a.type!==1?this.Z_=this.Z_.insert(i,{type:a.type,doc:t.doc}):t.type===2&&a.type===2?this.Z_=this.Z_.insert(i,{type:2,doc:t.doc}):t.type===2&&a.type===0?this.Z_=this.Z_.insert(i,{type:0,doc:t.doc}):t.type===1&&a.type===0?this.Z_=this.Z_.remove(i):t.type===1&&a.type===2?this.Z_=this.Z_.insert(i,{type:1,doc:a.doc}):t.type===0&&a.type===1?this.Z_=this.Z_.insert(i,{type:2,doc:t.doc}):wt():this.Z_=this.Z_.insert(i,t)}X_(){const t=[];return this.Z_.inorderTraversal((i,a)=>{t.push(a)}),t}}class Za{constructor(t,i,a,l,c,h,m,p,y){this.query=t,this.docs=i,this.oldDocs=a,this.docChanges=l,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(t,i,a,l,c){const h=[];return i.forEach(m=>{h.push({type:0,doc:m})}),new Za(t,i,Fa.emptySet(i),h,a,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&jc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const i=this.docChanges,a=t.docChanges;if(i.length!==a.length)return!1;for(let l=0;l<i.length;l++)if(i[l].type!==a[l].type||!i[l].doc.isEqual(a[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class oR{constructor(){this.queries=t_(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(i,a){const l=Dt(i),c=l.queries;l.queries=t_(),c.forEach((h,m)=>{for(const p of m.ta)p.onError(a)})})(this,new pt(J.ABORTED,"Firestore shutting down"))}}function t_(){return new Xs(r=>S0(r),jc)}async function lR(r,t){const i=Dt(r);let a=3;const l=t.query;let c=i.queries.get(l);c?!c.na()&&t.ra()&&(a=2):(c=new aR,a=t.ra()?0:1);try{switch(a){case 0:c.ea=await i.onListen(l,!0);break;case 1:c.ea=await i.onListen(l,!1);break;case 2:await i.onFirstRemoteStoreListen(l)}}catch(h){const m=Em(h,`Initialization of query '${ja(t.query)}' failed`);return void t.onError(m)}i.queries.set(l,c),c.ta.push(t),t.sa(i.onlineState),c.ea&&t.oa(c.ea)&&Tm(i)}async function uR(r,t){const i=Dt(r),a=t.query;let l=3;const c=i.queries.get(a);if(c){const h=c.ta.indexOf(t);h>=0&&(c.ta.splice(h,1),c.ta.length===0?l=t.ra()?0:1:!c.na()&&t.ra()&&(l=2))}switch(l){case 0:return i.queries.delete(a),i.onUnlisten(a,!0);case 1:return i.queries.delete(a),i.onUnlisten(a,!1);case 2:return i.onLastRemoteStoreUnlisten(a);default:return}}function cR(r,t){const i=Dt(r);let a=!1;for(const l of t){const c=l.query,h=i.queries.get(c);if(h){for(const m of h.ta)m.oa(l)&&(a=!0);h.ea=l}}a&&Tm(i)}function fR(r,t,i){const a=Dt(r),l=a.queries.get(t);if(l)for(const c of l.ta)c.onError(i);a.queries.delete(t)}function Tm(r){r.ia.forEach(t=>{t.next()})}var qd,e_;(e_=qd||(qd={}))._a="default",e_.Cache="cache";class hR{constructor(t,i,a){this.query=t,this.aa=i,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=a||{}}oa(t){if(!this.options.includeMetadataChanges){const a=[];for(const l of t.docChanges)l.type!==3&&a.push(l);t=new Za(t.query,t.docs,t.oldDocs,a,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let i=!1;return this.ua?this.la(t)&&(this.aa.next(t),i=!0):this.ha(t,this.onlineState)&&(this.Pa(t),i=!0),this.ca=t,i}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let i=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),i=!0),i}ha(t,i){if(!t.fromCache||!this.ra())return!0;const a=i!=="Offline";return(!this.options.Ta||!a)&&(!t.docs.isEmpty()||t.hasCachedResults||i==="Offline")}la(t){if(t.docChanges.length>0)return!0;const i=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}Pa(t){t=Za.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==qd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(t){this.key=t}}class sE{constructor(t){this.key=t}}class dR{constructor(t,i){this.query=t,this.fa=i,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=zt(),this.mutatedKeys=zt(),this.ya=A0(t),this.wa=new Fa(this.ya)}get Sa(){return this.fa}ba(t,i){const a=i?i.Da:new Jv,l=i?i.wa:this.wa;let c=i?i.mutatedKeys:this.mutatedKeys,h=l,m=!1;const p=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal((E,A)=>{const I=l.get(E),V=qc(this.query,A)?A:null,H=!!I&&this.mutatedKeys.has(I.key),F=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let q=!1;I&&V?I.data.isEqual(V.data)?H!==F&&(a.track({type:3,doc:V}),q=!0):this.va(I,V)||(a.track({type:2,doc:V}),q=!0,(p&&this.ya(V,p)>0||y&&this.ya(V,y)<0)&&(m=!0)):!I&&V?(a.track({type:0,doc:V}),q=!0):I&&!V&&(a.track({type:1,doc:I}),q=!0,(p||y)&&(m=!0)),q&&(V?(h=h.add(V),c=F?c.add(E):c.delete(E)):(h=h.delete(E),c=c.delete(E)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),c=c.delete(E.key),a.track({type:1,doc:E})}return{wa:h,Da:a,ls:m,mutatedKeys:c}}va(t,i){return t.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(t,i,a,l){const c=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const h=t.Da.X_();h.sort((E,A)=>function(V,H){const F=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wt()}};return F(V)-F(H)}(E.type,A.type)||this.ya(E.doc,A.doc)),this.Ca(a),l=l!=null&&l;const m=i&&!l?this.Fa():[],p=this.pa.size===0&&this.current&&!l?1:0,y=p!==this.ga;return this.ga=p,h.length!==0||y?{snapshot:new Za(this.query,t.wa,c,h,t.mutatedKeys,p===0,y,!1,!!a&&a.resumeToken.approximateByteSize()>0),Ma:m}:{Ma:m}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Jv,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(i=>this.fa=this.fa.add(i)),t.modifiedDocuments.forEach(i=>{}),t.removedDocuments.forEach(i=>this.fa=this.fa.delete(i)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=zt(),this.wa.forEach(a=>{this.xa(a.key)&&(this.pa=this.pa.add(a.key))});const i=[];return t.forEach(a=>{this.pa.has(a)||i.push(new sE(a))}),this.pa.forEach(a=>{t.has(a)||i.push(new rE(a))}),i}Oa(t){this.fa=t.gs,this.pa=zt();const i=this.ba(t.documents);return this.applyChanges(i,!0)}Na(){return Za.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const bm="SyncEngine";class mR{constructor(t,i,a){this.query=t,this.targetId=i,this.view=a}}class gR{constructor(t){this.key=t,this.Ba=!1}}class pR{constructor(t,i,a,l,c,h){this.localStore=t,this.remoteStore=i,this.eventManager=a,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.La={},this.ka=new Xs(m=>S0(m),jc),this.qa=new Map,this.Qa=new Set,this.$a=new fe(Tt.comparator),this.Ua=new Map,this.Ka=new fm,this.Wa={},this.Ga=new Map,this.za=$a.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function yR(r,t,i=!0){const a=fE(r);let l;const c=a.ka.get(t);return c?(a.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.Na()):l=await aE(a,t,i,!0),l}async function vR(r,t){const i=fE(r);await aE(i,t,!0,!1)}async function aE(r,t,i,a){const l=await U1(r.localStore,Ui(t)),c=l.targetId,h=r.sharedClientState.addLocalQueryTarget(c,i);let m;return a&&(m=await _R(r,t,c,h==="current",l.resumeToken)),r.isPrimaryClient&&i&&W0(r.remoteStore,l),m}async function _R(r,t,i,a,l){r.Ha=(A,I,V)=>async function(F,q,et,X){let nt=q.view.ba(et);nt.ls&&(nt=await Yv(F.localStore,q.query,!1).then(({documents:O})=>q.view.ba(O,nt)));const ft=X&&X.targetChanges.get(q.targetId),lt=X&&X.targetMismatches.get(q.targetId)!=null,ht=q.view.applyChanges(nt,F.isPrimaryClient,ft,lt);return i_(F,q.targetId,ht.Ma),ht.snapshot}(r,A,I,V);const c=await Yv(r.localStore,t,!0),h=new dR(t,c.gs),m=h.ba(c.documents),p=Ul.createSynthesizedTargetChangeForCurrentChange(i,a&&r.onlineState!=="Offline",l),y=h.applyChanges(m,r.isPrimaryClient,p);i_(r,i,y.Ma);const E=new mR(t,i,h);return r.ka.set(t,E),r.qa.has(i)?r.qa.get(i).push(t):r.qa.set(i,[t]),y.snapshot}async function ER(r,t,i){const a=Dt(r),l=a.ka.get(t),c=a.qa.get(l.targetId);if(c.length>1)return a.qa.set(l.targetId,c.filter(h=>!jc(h,t))),void a.ka.delete(t);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(l.targetId),a.sharedClientState.isActiveQueryTarget(l.targetId)||await Bd(a.localStore,l.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(l.targetId),i&&gm(a.remoteStore,l.targetId),Hd(a,l.targetId)}).catch(eo)):(Hd(a,l.targetId),await Bd(a.localStore,l.targetId,!0))}async function TR(r,t){const i=Dt(r),a=i.ka.get(t),l=i.qa.get(a.targetId);i.isPrimaryClient&&l.length===1&&(i.sharedClientState.removeLocalQueryTarget(a.targetId),gm(i.remoteStore,a.targetId))}async function bR(r,t,i){const a=IR(r);try{const l=await function(h,m){const p=Dt(h),y=Pe.now(),E=m.reduce((V,H)=>V.add(H.key),zt());let A,I;return p.persistence.runTransaction("Locally write mutations","readwrite",V=>{let H=gr(),F=zt();return p.ds.getEntries(V,E).next(q=>{H=q,H.forEach((et,X)=>{X.isValidDocument()||(F=F.add(et))})}).next(()=>p.localDocuments.getOverlayedDocuments(V,H)).next(q=>{A=q;const et=[];for(const X of m){const nt=Uw(X,A.get(X.key).overlayedDocument);nt!=null&&et.push(new $s(X.key,nt,m0(nt.value.mapValue),fr.exists(!0)))}return p.mutationQueue.addMutationBatch(V,y,et,m)}).next(q=>{I=q;const et=q.applyToLocalDocumentSet(A,F);return p.documentOverlayCache.saveOverlays(V,q.batchId,et)})}).then(()=>({batchId:I.batchId,changes:R0(A)}))}(a.localStore,t);a.sharedClientState.addPendingMutation(l.batchId),function(h,m,p){let y=h.Wa[h.currentUser.toKey()];y||(y=new fe(Nt)),y=y.insert(m,p),h.Wa[h.currentUser.toKey()]=y}(a,l.batchId,i),await zl(a,l.changes),await Kc(a.remoteStore)}catch(l){const c=Em(l,"Failed to persist write");i.reject(c)}}async function oE(r,t){const i=Dt(r);try{const a=await O1(i.localStore,t);t.targetChanges.forEach((l,c)=>{const h=i.Ua.get(c);h&&($t(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1),l.addedDocuments.size>0?h.Ba=!0:l.modifiedDocuments.size>0?$t(h.Ba):l.removedDocuments.size>0&&($t(h.Ba),h.Ba=!1))}),await zl(i,a,t)}catch(a){await eo(a)}}function n_(r,t,i){const a=Dt(r);if(a.isPrimaryClient&&i===0||!a.isPrimaryClient&&i===1){const l=[];a.ka.forEach((c,h)=>{const m=h.view.sa(t);m.snapshot&&l.push(m.snapshot)}),function(h,m){const p=Dt(h);p.onlineState=m;let y=!1;p.queries.forEach((E,A)=>{for(const I of A.ta)I.sa(m)&&(y=!0)}),y&&Tm(p)}(a.eventManager,t),l.length&&a.La.p_(l),a.onlineState=t,a.isPrimaryClient&&a.sharedClientState.setOnlineState(t)}}async function SR(r,t,i){const a=Dt(r);a.sharedClientState.updateQueryState(t,"rejected",i);const l=a.Ua.get(t),c=l&&l.key;if(c){let h=new fe(Tt.comparator);h=h.insert(c,pn.newNoDocument(c,Rt.min()));const m=zt().add(c),p=new Gc(Rt.min(),new Map,new fe(Nt),h,m);await oE(a,p),a.$a=a.$a.remove(c),a.Ua.delete(t),Sm(a)}else await Bd(a.localStore,t,!1).then(()=>Hd(a,t,i)).catch(eo)}async function AR(r,t){const i=Dt(r),a=t.batch.batchId;try{const l=await V1(i.localStore,t);uE(i,a,null),lE(i,a),i.sharedClientState.updateMutationState(a,"acknowledged"),await zl(i,l)}catch(l){await eo(l)}}async function wR(r,t,i){const a=Dt(r);try{const l=await function(h,m){const p=Dt(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let E;return p.mutationQueue.lookupMutationBatch(y,m).next(A=>($t(A!==null),E=A.keys(),p.mutationQueue.removeMutationBatch(y,A))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,E,m)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E)).next(()=>p.localDocuments.getDocuments(y,E))})}(a.localStore,t);uE(a,t,i),lE(a,t),a.sharedClientState.updateMutationState(t,"rejected",i),await zl(a,l)}catch(l){await eo(l)}}function lE(r,t){(r.Ga.get(t)||[]).forEach(i=>{i.resolve()}),r.Ga.delete(t)}function uE(r,t,i){const a=Dt(r);let l=a.Wa[a.currentUser.toKey()];if(l){const c=l.get(t);c&&(i?c.reject(i):c.resolve(),l=l.remove(t)),a.Wa[a.currentUser.toKey()]=l}}function Hd(r,t,i=null){r.sharedClientState.removeLocalQueryTarget(t);for(const a of r.qa.get(t))r.ka.delete(a),i&&r.La.Ja(a,i);r.qa.delete(t),r.isPrimaryClient&&r.Ka.br(t).forEach(a=>{r.Ka.containsKey(a)||cE(r,a)})}function cE(r,t){r.Qa.delete(t.path.canonicalString());const i=r.$a.get(t);i!==null&&(gm(r.remoteStore,i),r.$a=r.$a.remove(t),r.Ua.delete(i),Sm(r))}function i_(r,t,i){for(const a of i)a instanceof rE?(r.Ka.addReference(a.key,t),RR(r,a)):a instanceof sE?(dt(bm,"Document no longer in limbo: "+a.key),r.Ka.removeReference(a.key,t),r.Ka.containsKey(a.key)||cE(r,a.key)):wt()}function RR(r,t){const i=t.key,a=i.path.canonicalString();r.$a.get(i)||r.Qa.has(a)||(dt(bm,"New document in limbo: "+i),r.Qa.add(a),Sm(r))}function Sm(r){for(;r.Qa.size>0&&r.$a.size<r.maxConcurrentLimboResolutions;){const t=r.Qa.values().next().value;r.Qa.delete(t);const i=new Tt(oe.fromString(t)),a=r.za.next();r.Ua.set(a,new gR(i)),r.$a=r.$a.insert(i,a),W0(r.remoteStore,new $r(Ui(T0(i.path)),a,"TargetPurposeLimboResolution",Pc.ae))}}async function zl(r,t,i){const a=Dt(r),l=[],c=[],h=[];a.ka.isEmpty()||(a.ka.forEach((m,p)=>{h.push(a.Ha(p,t,i).then(y=>{var E;if((y||i)&&a.isPrimaryClient){const A=y?!y.fromCache:(E=i==null?void 0:i.targetChanges.get(p.targetId))===null||E===void 0?void 0:E.current;a.sharedClientState.updateQueryState(p.targetId,A?"current":"not-current")}if(y){l.push(y);const A=dm.Yi(p.targetId,y);c.push(A)}}))}),await Promise.all(h),a.La.p_(l),await async function(p,y){const E=Dt(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>Z.forEach(y,I=>Z.forEach(I.Hi,V=>E.persistence.referenceDelegate.addReference(A,I.targetId,V)).next(()=>Z.forEach(I.Ji,V=>E.persistence.referenceDelegate.removeReference(A,I.targetId,V)))))}catch(A){if(!no(A))throw A;dt(mm,"Failed to update sequence numbers: "+A)}for(const A of y){const I=A.targetId;if(!A.fromCache){const V=E.Ts.get(I),H=V.snapshotVersion,F=V.withLastLimboFreeSnapshotVersion(H);E.Ts=E.Ts.insert(I,F)}}}(a.localStore,c))}async function CR(r,t){const i=Dt(r);if(!i.currentUser.isEqual(t)){dt(bm,"User change. New user:",t.toKey());const a=await K0(i.localStore,t);i.currentUser=t,function(c,h){c.Ga.forEach(m=>{m.forEach(p=>{p.reject(new pt(J.CANCELLED,h))})}),c.Ga.clear()}(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(t,a.removedBatchIds,a.addedBatchIds),await zl(i,a.Rs)}}function DR(r,t){const i=Dt(r),a=i.Ua.get(t);if(a&&a.Ba)return zt().add(a.key);{let l=zt();const c=i.qa.get(t);if(!c)return l;for(const h of c){const m=i.ka.get(h);l=l.unionWith(m.view.Sa)}return l}}function fE(r){const t=Dt(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=oE.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=DR.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=SR.bind(null,t),t.La.p_=cR.bind(null,t.eventManager),t.La.Ja=fR.bind(null,t.eventManager),t}function IR(r){const t=Dt(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=AR.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=wR.bind(null,t),t}class Dc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Qc(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,i){return null}nu(t,i){return null}eu(t){return x1(this.persistence,new C1,t.initialUser,this.serializer)}Xa(t){return new Y0(hm.ri,this.serializer)}Za(t){return new z1}async terminate(){var t,i;(t=this.gcScheduler)===null||t===void 0||t.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Dc.provider={build:()=>new Dc};class xR extends Dc{constructor(t){super(),this.cacheSizeBytes=t}tu(t,i){$t(this.persistence.referenceDelegate instanceof Rc);const a=this.persistence.referenceDelegate.garbageCollector;return new h1(a,t.asyncQueue,i)}Xa(t){const i=this.cacheSizeBytes!==void 0?An.withCacheSize(this.cacheSizeBytes):An.DEFAULT;return new Y0(a=>Rc.ri(a,i),this.serializer)}}class Fd{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>n_(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=CR.bind(null,this.syncEngine),await sR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new oR}()}createDatastore(t){const i=Qc(t.databaseInfo.databaseId),a=function(c){return new q1(c)}(t.databaseInfo);return function(c,h,m,p){return new Q1(c,h,m,p)}(t.authCredentials,t.appCheckCredentials,a,i)}createRemoteStore(t){return function(a,l,c,h,m){return new K1(a,l,c,h,m)}(this.localStore,this.datastore,t.asyncQueue,i=>n_(this.syncEngine,i,0),function(){return $v.D()?new $v:new P1}())}createSyncEngine(t,i){return function(l,c,h,m,p,y,E){const A=new pR(l,c,h,m,p,y);return E&&(A.ja=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){var t,i;await async function(l){const c=Dt(l);dt(Gs,"RemoteStore shutting down."),c.W_.add(5),await Ll(c),c.z_.shutdown(),c.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()}}Fd.provider={build:()=>new Fd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):mr("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,i){setTimeout(()=>{this.muted||t(i)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us="FirestoreClient";class OR{constructor(t,i,a,l,c){this.authCredentials=t,this.appCheckCredentials=i,this.asyncQueue=a,this.databaseInfo=l,this.user=gn.UNAUTHENTICATED,this.clientId=r0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(a,async h=>{dt(us,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(a,h=>(dt(us,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ts;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(i){const a=Em(i,"Failed to shutdown persistence");t.reject(a)}}),t.promise}}async function gd(r,t){r.asyncQueue.verifyOperationInProgress(),dt(us,"Initializing OfflineComponentProvider");const i=r.configuration;await t.initialize(i);let a=i.initialUser;r.setCredentialChangeListener(async l=>{a.isEqual(l)||(await K0(t.localStore,l),a=l)}),t.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=t}async function r_(r,t){r.asyncQueue.verifyOperationInProgress();const i=await MR(r);dt(us,"Initializing OnlineComponentProvider"),await t.initialize(i,r.configuration),r.setCredentialChangeListener(a=>Wv(t.remoteStore,a)),r.setAppCheckTokenChangeListener((a,l)=>Wv(t.remoteStore,l)),r._onlineComponents=t}async function MR(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){dt(us,"Using user provided OfflineComponentProvider");try{await gd(r,r._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!function(l){return l.name==="FirebaseError"?l.code===J.FAILED_PRECONDITION||l.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11}(i))throw i;Qa("Error using user provided cache. Falling back to memory cache: "+i),await gd(r,new Dc)}}else dt(us,"Using default OfflineComponentProvider"),await gd(r,new xR(void 0));return r._offlineComponents}async function hE(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(dt(us,"Using user provided OnlineComponentProvider"),await r_(r,r._uninitializedComponentsProvider._online)):(dt(us,"Using default OnlineComponentProvider"),await r_(r,new Fd))),r._onlineComponents}function NR(r){return hE(r).then(t=>t.syncEngine)}async function UR(r){const t=await hE(r),i=t.eventManager;return i.onListen=yR.bind(null,t.syncEngine),i.onUnlisten=ER.bind(null,t.syncEngine),i.onFirstRemoteStoreListen=vR.bind(null,t.syncEngine),i.onLastRemoteStoreUnlisten=TR.bind(null,t.syncEngine),i}function LR(r,t,i={}){const a=new ts;return r.asyncQueue.enqueueAndForget(async()=>function(c,h,m,p,y){const E=new VR({next:I=>{E.su(),h.enqueueAndForget(()=>uR(c,A)),I.fromCache&&p.source==="server"?y.reject(new pt(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(I)},error:I=>y.reject(I)}),A=new hR(m,E,{includeMetadataChanges:!0,Ta:!0});return lR(c,A)}(await UR(r),r.asyncQueue,t,i,a)),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mE(r,t,i){if(!i)throw new pt(J.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function zR(r,t,i,a){if(t===!0&&a===!0)throw new pt(J.INVALID_ARGUMENT,`${r} and ${i} cannot be used together.`)}function a_(r){if(!Tt.isDocumentKey(r))throw new pt(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function o_(r){if(Tt.isDocumentKey(r))throw new pt(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Xc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=function(a){return a.constructor?a.constructor.name:null}(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":wt()}function Ic(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new pt(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Xc(r);throw new pt(J.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE="firestore.googleapis.com",l_=!0;class u_{constructor(t){var i,a;if(t.host===void 0){if(t.ssl!==void 0)throw new pt(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gE,this.ssl=l_}else this.host=t.host,this.ssl=(i=t.ssl)!==null&&i!==void 0?i:l_;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Q0;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<c1)throw new pt(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}zR("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dE((a=t.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new pt(J.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new pt(J.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new pt(J.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(a,l){return a.timeoutSeconds===l.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class $c{constructor(t,i,a,l){this._authCredentials=t,this._appCheckCredentials=i,this._databaseId=a,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new u_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pt(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new pt(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new u_(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new jA;switch(a.type){case"firstParty":return new GA(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new pt(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(i){const a=s_.get(i);a&&(dt("ComponentProvider","Removing Datastore"),s_.delete(i),a.terminate())}(this),Promise.resolve()}}function PR(r,t,i,a={}){var l;const c=(r=Ic(r,$c))._getSettings(),h=Object.assign(Object.assign({},c),{emulatorOptions:r._getEmulatorOptions()}),m=`${t}:${i}`;c.host!==gE&&c.host!==m&&Qa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},c),{host:m,ssl:!1,emulatorOptions:a});if(!bl(p,h)&&(r._setSettings(p),a.mockUserToken)){let y,E;if(typeof a.mockUserToken=="string")y=a.mockUserToken,E=gn.MOCK_USER;else{y=yS(a.mockUserToken,(l=r._app)===null||l===void 0?void 0:l.options.projectId);const A=a.mockUserToken.sub||a.mockUserToken.user_id;if(!A)throw new pt(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new gn(A)}r._authCredentials=new qA(new n0(y,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(t,i,a){this.converter=i,this._query=a,this.type="query",this.firestore=t}withConverter(t){return new ro(this.firestore,t,this._query)}}class ri{constructor(t,i,a){this.converter=i,this._key=a,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new es(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ri(this.firestore,t,this._key)}}class es extends ro{constructor(t,i,a){super(t,i,T0(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ri(this.firestore,null,new Tt(t))}withConverter(t){return new es(this.firestore,t,this._path)}}function pE(r,t,...i){if(r=ns(r),mE("collection","path",t),r instanceof $c){const a=oe.fromString(t,...i);return o_(a),new es(r,null,a)}{if(!(r instanceof ri||r instanceof es))throw new pt(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(oe.fromString(t,...i));return o_(a),new es(r.firestore,null,a)}}function kR(r,t,...i){if(r=ns(r),arguments.length===1&&(t=r0.newId()),mE("doc","path",t),r instanceof $c){const a=oe.fromString(t,...i);return a_(a),new ri(r,null,new Tt(a))}{if(!(r instanceof ri||r instanceof es))throw new pt(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(oe.fromString(t,...i));return a_(a),new ri(r.firestore,r instanceof es?r.converter:null,new Tt(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_="AsyncQueue";class f_{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new $0(this,"async_queue_retry"),this.Su=()=>{const a=md();a&&dt(c_,"Visibility state changed to "+a.visibilityState),this.a_.t_()},this.bu=t;const i=md();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const i=md();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const i=new ts;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!no(t))throw t;dt(c_,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const i=this.bu.then(()=>(this.pu=!0,t().catch(a=>{this.gu=a,this.pu=!1;const l=function(h){let m=h.message||"";return h.stack&&(m=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),m}(a);throw mr("INTERNAL UNHANDLED ERROR: ",l),a}).then(a=>(this.pu=!1,a))));return this.bu=i,i}enqueueAfterDelay(t,i,a){this.Du(),this.wu.indexOf(t)>-1&&(i=0);const l=_m.createAndSchedule(this,t,i,a,c=>this.Fu(c));return this.fu.push(l),l}Du(){this.gu&&wt()}verifyOperationInProgress(){}async Mu(){let t;do t=this.bu,await t;while(t!==this.bu)}xu(t){for(const i of this.fu)if(i.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((i,a)=>i.targetTimeMs-a.targetTimeMs);for(const i of this.fu)if(i.skipDelay(),t!=="all"&&i.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const i=this.fu.indexOf(t);this.fu.splice(i,1)}}class Am extends $c{constructor(t,i,a,l){super(t,i,a,l),this.type="firestore",this._queue=new f_,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new f_(t),this._firestoreClient=void 0,await t}}}function BR(r,t){const i=typeof r=="object"?r:Y_(),a=typeof r=="string"?r:_c,l=Ol(i,"firestore").getImmediate({identifier:a});if(!l._initialized){const c=gS("firestore");c&&PR(l,...c)}return l}function yE(r){if(r._terminated)throw new pt(J.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||jR(r),r._firestoreClient}function jR(r){var t,i,a;const l=r._freezeSettings(),c=function(m,p,y,E){return new aw(m,p,y,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,dE(E.experimentalLongPollingOptions),E.useFetchStreams)}(r._databaseId,((t=r._app)===null||t===void 0?void 0:t.options.appId)||"",r._persistenceKey,l);r._componentsProvider||!((i=l.localCache)===null||i===void 0)&&i._offlineComponentProvider&&(!((a=l.localCache)===null||a===void 0)&&a._onlineComponentProvider)&&(r._componentsProvider={_offline:l.localCache._offlineComponentProvider,_online:l.localCache._onlineComponentProvider}),r._firestoreClient=new OR(r._authCredentials,r._appCheckCredentials,r._queue,c,r._componentsProvider&&function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Wa(on.fromBase64String(t))}catch(i){throw new pt(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(t){return new Wa(on.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(...t){for(let i=0;i<t.length;++i)if(t[i].length===0)throw new pt(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new an(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(t,i){if(!isFinite(t)||t<-90||t>90)throw new pt(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(i)||i<-180||i>180)throw new pt(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=t,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Nt(this._lat,t._lat)||Nt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(t){this._values=(t||[]).map(i=>i)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(a,l){if(a.length!==l.length)return!1;for(let c=0;c<a.length;++c)if(a[c]!==l[c])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR=/^__.*__$/;class HR{constructor(t,i,a){this.data=t,this.fieldMask=i,this.fieldTransforms=a}toMutation(t,i){return this.fieldMask!==null?new $s(t,this.data,this.fieldMask,i,this.fieldTransforms):new Nl(t,this.data,i,this.fieldTransforms)}}function _E(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wt()}}class Dm{constructor(t,i,a,l,c,h){this.settings=t,this.databaseId=i,this.serializer=a,this.ignoreUndefinedProperties=l,c===void 0&&this.Bu(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new Dm(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var i;const a=(i=this.path)===null||i===void 0?void 0:i.child(t),l=this.ku({path:a,Qu:!1});return l.$u(t),l}Uu(t){var i;const a=(i=this.path)===null||i===void 0?void 0:i.child(t),l=this.ku({path:a,Qu:!1});return l.Bu(),l}Ku(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return xc(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(i=>t.isPrefixOf(i))!==void 0||this.fieldTransforms.find(i=>t.isPrefixOf(i.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(_E(this.Lu)&&qR.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class FR{constructor(t,i,a){this.databaseId=t,this.ignoreUndefinedProperties=i,this.serializer=a||Qc(t)}ju(t,i,a,l=!1){return new Dm({Lu:t,methodName:i,zu:a,path:an.emptyPath(),Qu:!1,Gu:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function EE(r){const t=r._freezeSettings(),i=Qc(r._databaseId);return new FR(r._databaseId,!!t.ignoreUndefinedProperties,i)}function GR(r,t,i,a,l,c={}){const h=r.ju(c.merge||c.mergeFields?2:0,t,i,l);SE("Data must be an object, but it was:",h,a);const m=TE(a,h);let p,y;if(c.merge)p=new fi(h.fieldMask),y=h.fieldTransforms;else if(c.mergeFields){const E=[];for(const A of c.mergeFields){const I=YR(t,A,i);if(!h.contains(I))throw new pt(J.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);XR(E,I)||E.push(I)}p=new fi(E),y=h.fieldTransforms.filter(A=>p.covers(A.field))}else p=null,y=h.fieldTransforms;return new HR(new ii(m),p,y)}function QR(r,t,i,a=!1){return Im(i,r.ju(a?4:3,t))}function Im(r,t){if(bE(r=ns(r)))return SE("Unsupported field value:",t,r),TE(r,t);if(r instanceof vE)return function(a,l){if(!_E(l.Lu))throw l.Wu(`${a._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Wu(`${a._methodName}() is not currently supported inside arrays`);const c=a._toFieldTransform(l);c&&l.fieldTransforms.push(c)}(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(a,l){const c=[];let h=0;for(const m of a){let p=Im(m,l.Ku(h));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),h++}return{arrayValue:{values:c}}}(r,t)}return function(a,l){if((a=ns(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return Iw(l.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const c=Pe.fromDate(a);return{timestampValue:wc(l.serializer,c)}}if(a instanceof Pe){const c=new Pe(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:wc(l.serializer,c)}}if(a instanceof Rm)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Wa)return{bytesValue:k0(l.serializer,a._byteString)};if(a instanceof ri){const c=l.databaseId,h=a.firestore._databaseId;if(!h.isEqual(c))throw l.Wu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:cm(a.firestore._databaseId||l.databaseId,a._key.path)}}if(a instanceof Cm)return function(h,m){return{mapValue:{fields:{[h0]:{stringValue:d0},[Ec]:{arrayValue:{values:h.toArray().map(y=>{if(typeof y!="number")throw m.Wu("VectorValues must only contain numeric values.");return om(m.serializer,y)})}}}}}}(a,l);throw l.Wu(`Unsupported field value: ${Xc(a)}`)}(r,t)}function TE(r,t){const i={};return a0(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ks(r,(a,l)=>{const c=Im(l,t.qu(a));c!=null&&(i[a]=c)}),{mapValue:{fields:i}}}function bE(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Pe||r instanceof Rm||r instanceof Wa||r instanceof ri||r instanceof vE||r instanceof Cm)}function SE(r,t,i){if(!bE(i)||!function(l){return typeof l=="object"&&l!==null&&(Object.getPrototypeOf(l)===Object.prototype||Object.getPrototypeOf(l)===null)}(i)){const a=Xc(i);throw a==="an object"?t.Wu(r+" a custom object"):t.Wu(r+" "+a)}}function YR(r,t,i){if((t=ns(t))instanceof wm)return t._internalPath;if(typeof t=="string")return AE(r,t);throw xc("Field path arguments must be of type string or ",r,!1,void 0,i)}const KR=new RegExp("[~\\*/\\[\\]]");function AE(r,t,i){if(t.search(KR)>=0)throw xc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,i);try{return new wm(...t.split("."))._internalPath}catch{throw xc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,i)}}function xc(r,t,i,a,l){const c=a&&!a.isEmpty(),h=l!==void 0;let m=`Function ${t}() called with invalid data`;i&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(c||h)&&(p+=" (found",c&&(p+=` in field ${a}`),h&&(p+=` in document ${l}`),p+=")"),new pt(J.INVALID_ARGUMENT,m+r+p)}function XR(r,t){return r.some(i=>i.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(t,i,a,l,c){this._firestore=t,this._userDataWriter=i,this._key=a,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new ri(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new $R(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const i=this._document.data.field(xm("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i)}}}class $R extends wE{data(){return super.data()}}function xm(r,t){return typeof t=="string"?AE(r,t):t instanceof wm?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new pt(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vm{}class WR extends Vm{}function JR(r,t,...i){let a=[];t instanceof Vm&&a.push(t),a=a.concat(i),function(c){const h=c.filter(p=>p instanceof Om).length,m=c.filter(p=>p instanceof Zc).length;if(h>1||h>0&&m>0)throw new pt(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const l of a)r=l._apply(r);return r}class Zc extends WR{constructor(t,i,a){super(),this._field=t,this._op=i,this._value=a,this.type="where"}static _create(t,i,a){return new Zc(t,i,a)}_apply(t){const i=this._parse(t);return RE(t._query,i),new ro(t.firestore,t.converter,Nd(t._query,i))}_parse(t){const i=EE(t.firestore);return function(c,h,m,p,y,E,A){let I;if(y.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new pt(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){m_(A,E);const H=[];for(const F of A)H.push(d_(p,c,F));I={arrayValue:{values:H}}}else I=d_(p,c,A)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||m_(A,E),I=QR(m,h,A,E==="in"||E==="not-in");return Re.create(y,E,I)}(t._query,"where",i,t.firestore._databaseId,this._field,this._op,this._value)}}function h_(r,t,i){const a=t,l=xm("where",r);return Zc._create(l,a,i)}class Om extends Vm{constructor(t,i){super(),this.type=t,this._queryConstraints=i}static _create(t,i){return new Om(t,i)}_parse(t){const i=this._queryConstraints.map(a=>a._parse(t)).filter(a=>a.getFilters().length>0);return i.length===1?i[0]:hi.create(i,this._getOperator())}_apply(t){const i=this._parse(t);return i.getFilters().length===0?t:(function(l,c){let h=l;const m=c.getFlattenedFilters();for(const p of m)RE(h,p),h=Nd(h,p)}(t._query,i),new ro(t.firestore,t.converter,Nd(t._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function d_(r,t,i){if(typeof(i=ns(i))=="string"){if(i==="")throw new pt(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!b0(t)&&i.indexOf("/")!==-1)throw new pt(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const a=t.path.child(oe.fromString(i));if(!Tt.isDocumentKey(a))throw new pt(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Dv(r,new Tt(a))}if(i instanceof ri)return Dv(r,i._key);throw new pt(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xc(i)}.`)}function m_(r,t){if(!Array.isArray(r)||r.length===0)throw new pt(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function RE(r,t){const i=function(l,c){for(const h of l)for(const m of h.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null}(r.filters,function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(i!==null)throw i===t.op?new pt(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new pt(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${i.toString()}' filters.`)}class t2{convertValue(t,i="none"){switch(os(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ee(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,i);case 5:return t.stringValue;case 6:return this.convertBytes(as(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,i);case 11:return this.convertObject(t.mapValue,i);case 10:return this.convertVectorValue(t.mapValue);default:throw wt()}}convertObject(t,i){return this.convertObjectMap(t.fields,i)}convertObjectMap(t,i="none"){const a={};return Ks(t,(l,c)=>{a[l]=this.convertValue(c,i)}),a}convertVectorValue(t){var i,a,l;const c=(l=(a=(i=t.fields)===null||i===void 0?void 0:i[Ec].arrayValue)===null||a===void 0?void 0:a.values)===null||l===void 0?void 0:l.map(h=>Ee(h.doubleValue));return new Cm(c)}convertGeoPoint(t){return new Rm(Ee(t.latitude),Ee(t.longitude))}convertArray(t,i){return(t.values||[]).map(a=>this.convertValue(a,i))}convertServerTimestamp(t,i){switch(i){case"previous":const a=Bc(t);return a==null?null:this.convertValue(a,i);case"estimate":return this.convertTimestamp(wl(t));default:return null}}convertTimestamp(t){const i=ss(t);return new Pe(i.seconds,i.nanos)}convertDocumentKey(t,i){const a=oe.fromString(t);$t(G0(a));const l=new Rl(a.get(1),a.get(3)),c=new Tt(a.popFirst(5));return l.isEqual(i)||mr(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(r,t,i){let a;return a=r?r.toFirestore(t):t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(t,i){this.hasPendingWrites=t,this.fromCache=i}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class n2 extends wE{constructor(t,i,a,l,c,h){super(t,i,a,l,h),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const i=new mc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,i={}){if(this._document){const a=this._document.data.field(xm("DocumentSnapshot.get",t));if(a!==null)return this._userDataWriter.convertValue(a,i.serverTimestamps)}}}class mc extends n2{data(t={}){return super.data(t)}}class i2{constructor(t,i,a,l){this._firestore=t,this._userDataWriter=i,this._snapshot=l,this.metadata=new ac(l.hasPendingWrites,l.fromCache),this.query=a}get docs(){const t=[];return this.forEach(i=>t.push(i)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,i){this._snapshot.docs.forEach(a=>{t.call(i,new mc(this._firestore,this._userDataWriter,a.key,a,new ac(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const i=!!t.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new pt(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(l,c){if(l._snapshot.oldDocs.isEmpty()){let h=0;return l._snapshot.docChanges.map(m=>{const p=new mc(l._firestore,l._userDataWriter,m.doc.key,m.doc,new ac(l._snapshot.mutatedKeys.has(m.doc.key),l._snapshot.fromCache),l.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}})}{let h=l._snapshot.oldDocs;return l._snapshot.docChanges.filter(m=>c||m.type!==3).map(m=>{const p=new mc(l._firestore,l._userDataWriter,m.doc.key,m.doc,new ac(l._snapshot.mutatedKeys.has(m.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,E=-1;return m.type!==0&&(y=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),E=h.indexOf(m.doc.key)),{type:r2(m.type),doc:p,oldIndex:y,newIndex:E}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}}function r2(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wt()}}class s2 extends t2{constructor(t){super(),this.firestore=t}convertBytes(t){return new Wa(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new ri(this.firestore,null,i)}}function a2(r){r=Ic(r,ro);const t=Ic(r.firestore,Am),i=yE(t),a=new s2(t);return ZR(r._query),LR(i,r._query).then(l=>new i2(t,a,r,l))}function o2(r,t){const i=Ic(r.firestore,Am),a=kR(r),l=e2(r.converter,t);return l2(i,[GR(EE(r.firestore),"addDoc",a._key,l,r.converter!==null,{}).toMutation(a._key,fr.exists(!1))]).then(()=>a)}function l2(r,t){return function(a,l){const c=new ts;return a.asyncQueue.enqueueAndForget(async()=>bR(await NR(a),l,c)),c.promise}(yE(r),t)}(function(t,i=!0){(function(l){to=l})(DA),is(new hr("firestore",(a,{instanceIdentifier:l,options:c})=>{const h=a.getProvider("app").getImmediate(),m=new Am(new HA(a.getProvider("auth-internal")),new QA(h,a.getProvider("app-check-internal")),function(y,E){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new pt(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rl(y.options.projectId,E)}(h,l),h);return c=Object.assign({useFetchStreams:i},c),m._setSettings(c),m},"PUBLIC").setMultipleInstances(!0)),Ni(pv,yv,t),Ni(pv,yv,"esm2017")})();const CE="@firebase/installations",Mm="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE=1e4,IE=`w:${Mm}`,xE="FIS_v2",u2="https://firebaseinstallations.googleapis.com/v1",c2=60*60*1e3,f2="installations",h2="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Qs=new zc(f2,h2,d2);function VE(r){return r instanceof cs&&r.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE({projectId:r}){return`${u2}/projects/${r}/installations`}function ME(r){return{token:r.token,requestStatus:2,expiresIn:g2(r.expiresIn),creationTime:Date.now()}}async function NE(r,t){const a=(await t.json()).error;return Qs.create("request-failed",{requestName:r,serverCode:a.code,serverMessage:a.message,serverStatus:a.status})}function UE({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function m2(r,{refreshToken:t}){const i=UE(r);return i.append("Authorization",p2(t)),i}async function LE(r){const t=await r();return t.status>=500&&t.status<600?r():t}function g2(r){return Number(r.replace("s","000"))}function p2(r){return`${xE} ${r}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y2({appConfig:r,heartbeatServiceProvider:t},{fid:i}){const a=OE(r),l=UE(r),c=t.getImmediate({optional:!0});if(c){const y=await c.getHeartbeatsHeader();y&&l.append("x-firebase-client",y)}const h={fid:i,authVersion:xE,appId:r.appId,sdkVersion:IE},m={method:"POST",headers:l,body:JSON.stringify(h)},p=await LE(()=>fetch(a,m));if(p.ok){const y=await p.json();return{fid:y.fid||i,registrationStatus:2,refreshToken:y.refreshToken,authToken:ME(y.authToken)}}else throw await NE("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(r){return new Promise(t=>{setTimeout(t,r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2=/^[cdef][\w-]{21}$/,Gd="";function E2(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;const i=T2(r);return _2.test(i)?i:Gd}catch{return Gd}}function T2(r){return v2(r).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(r){return`${r.appName}!${r.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE=new Map;function kE(r,t){const i=Wc(r);BE(i,t),b2(i,t)}function BE(r,t){const i=PE.get(r);if(i)for(const a of i)a(t)}function b2(r,t){const i=S2();i&&i.postMessage({key:r,fid:t}),A2()}let Hs=null;function S2(){return!Hs&&"BroadcastChannel"in self&&(Hs=new BroadcastChannel("[Firebase] FID Change"),Hs.onmessage=r=>{BE(r.data.key,r.data.fid)}),Hs}function A2(){PE.size===0&&Hs&&(Hs.close(),Hs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2="firebase-installations-database",R2=1,Ys="firebase-installations-store";let pd=null;function Nm(){return pd||(pd=G_(w2,R2,{upgrade:(r,t)=>{switch(t){case 0:r.createObjectStore(Ys)}}})),pd}async function Vc(r,t){const i=Wc(r),l=(await Nm()).transaction(Ys,"readwrite"),c=l.objectStore(Ys),h=await c.get(i);return await c.put(t,i),await l.done,(!h||h.fid!==t.fid)&&kE(r,t.fid),t}async function jE(r){const t=Wc(r),a=(await Nm()).transaction(Ys,"readwrite");await a.objectStore(Ys).delete(t),await a.done}async function Jc(r,t){const i=Wc(r),l=(await Nm()).transaction(Ys,"readwrite"),c=l.objectStore(Ys),h=await c.get(i),m=t(h);return m===void 0?await c.delete(i):await c.put(m,i),await l.done,m&&(!h||h.fid!==m.fid)&&kE(r,m.fid),m}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Um(r){let t;const i=await Jc(r.appConfig,a=>{const l=C2(a),c=D2(r,l);return t=c.registrationPromise,c.installationEntry});return i.fid===Gd?{installationEntry:await t}:{installationEntry:i,registrationPromise:t}}function C2(r){const t=r||{fid:E2(),registrationStatus:0};return qE(t)}function D2(r,t){if(t.registrationStatus===0){if(!navigator.onLine){const l=Promise.reject(Qs.create("app-offline"));return{installationEntry:t,registrationPromise:l}}const i={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},a=I2(r,i);return{installationEntry:i,registrationPromise:a}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:x2(r)}:{installationEntry:t}}async function I2(r,t){try{const i=await y2(r,t);return Vc(r.appConfig,i)}catch(i){throw VE(i)&&i.customData.serverCode===409?await jE(r.appConfig):await Vc(r.appConfig,{fid:t.fid,registrationStatus:0}),i}}async function x2(r){let t=await g_(r.appConfig);for(;t.registrationStatus===1;)await zE(100),t=await g_(r.appConfig);if(t.registrationStatus===0){const{installationEntry:i,registrationPromise:a}=await Um(r);return a||i}return t}function g_(r){return Jc(r,t=>{if(!t)throw Qs.create("installation-not-found");return qE(t)})}function qE(r){return V2(r)?{fid:r.fid,registrationStatus:0}:r}function V2(r){return r.registrationStatus===1&&r.registrationTime+DE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O2({appConfig:r,heartbeatServiceProvider:t},i){const a=M2(r,i),l=m2(r,i),c=t.getImmediate({optional:!0});if(c){const y=await c.getHeartbeatsHeader();y&&l.append("x-firebase-client",y)}const h={installation:{sdkVersion:IE,appId:r.appId}},m={method:"POST",headers:l,body:JSON.stringify(h)},p=await LE(()=>fetch(a,m));if(p.ok){const y=await p.json();return ME(y)}else throw await NE("Generate Auth Token",p)}function M2(r,{fid:t}){return`${OE(r)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lm(r,t=!1){let i;const a=await Jc(r.appConfig,c=>{if(!HE(c))throw Qs.create("not-registered");const h=c.authToken;if(!t&&L2(h))return c;if(h.requestStatus===1)return i=N2(r,t),c;{if(!navigator.onLine)throw Qs.create("app-offline");const m=P2(c);return i=U2(r,m),m}});return i?await i:a.authToken}async function N2(r,t){let i=await p_(r.appConfig);for(;i.authToken.requestStatus===1;)await zE(100),i=await p_(r.appConfig);const a=i.authToken;return a.requestStatus===0?Lm(r,t):a}function p_(r){return Jc(r,t=>{if(!HE(t))throw Qs.create("not-registered");const i=t.authToken;return k2(i)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function U2(r,t){try{const i=await O2(r,t),a=Object.assign(Object.assign({},t),{authToken:i});return await Vc(r.appConfig,a),i}catch(i){if(VE(i)&&(i.customData.serverCode===401||i.customData.serverCode===404))await jE(r.appConfig);else{const a=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Vc(r.appConfig,a)}throw i}}function HE(r){return r!==void 0&&r.registrationStatus===2}function L2(r){return r.requestStatus===2&&!z2(r)}function z2(r){const t=Date.now();return t<r.creationTime||r.creationTime+r.expiresIn<t+c2}function P2(r){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},r),{authToken:t})}function k2(r){return r.requestStatus===1&&r.requestTime+DE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B2(r){const t=r,{installationEntry:i,registrationPromise:a}=await Um(t);return a?a.catch(console.error):Lm(t).catch(console.error),i.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j2(r,t=!1){const i=r;return await q2(i),(await Lm(i,t)).token}async function q2(r){const{registrationPromise:t}=await Um(r);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(r){if(!r||!r.options)throw yd("App Configuration");if(!r.name)throw yd("App Name");const t=["projectId","apiKey","appId"];for(const i of t)if(!r.options[i])throw yd(i);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function yd(r){return Qs.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE="installations",F2="installations-internal",G2=r=>{const t=r.getProvider("app").getImmediate(),i=H2(t),a=Ol(t,"heartbeat");return{app:t,appConfig:i,heartbeatServiceProvider:a,_delete:()=>Promise.resolve()}},Q2=r=>{const t=r.getProvider("app").getImmediate(),i=Ol(t,FE).getImmediate();return{getId:()=>B2(i),getToken:l=>j2(i,l)}};function Y2(){is(new hr(FE,G2,"PUBLIC")),is(new hr(F2,Q2,"PRIVATE"))}Y2();Ni(CE,Mm);Ni(CE,Mm,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc="analytics",K2="firebase_id",X2="origin",$2=60*1e3,Z2="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",zm="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn=new Jd("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Pn=new zc("analytics","Analytics",W2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(r){if(!r.startsWith(zm)){const t=Pn.create("invalid-gtag-resource",{gtagURL:r});return Rn.warn(t.message),""}return r}function GE(r){return Promise.all(r.map(t=>t.catch(i=>i)))}function tC(r,t){let i;return window.trustedTypes&&(i=window.trustedTypes.createPolicy(r,t)),i}function eC(r,t){const i=tC("firebase-js-sdk-policy",{createScriptURL:J2}),a=document.createElement("script"),l=`${zm}?l=${r}&id=${t}`;a.src=i?i==null?void 0:i.createScriptURL(l):l,a.async=!0,document.head.appendChild(a)}function nC(r){let t=[];return Array.isArray(window[r])?t=window[r]:window[r]=t,t}async function iC(r,t,i,a,l,c){const h=a[l];try{if(h)await t[h];else{const p=(await GE(i)).find(y=>y.measurementId===l);p&&await t[p.appId]}}catch(m){Rn.error(m)}r("config",l,c)}async function rC(r,t,i,a,l){try{let c=[];if(l&&l.send_to){let h=l.send_to;Array.isArray(h)||(h=[h]);const m=await GE(i);for(const p of h){const y=m.find(A=>A.measurementId===p),E=y&&t[y.appId];if(E)c.push(E);else{c=[];break}}}c.length===0&&(c=Object.values(t)),await Promise.all(c),r("event",a,l||{})}catch(c){Rn.error(c)}}function sC(r,t,i,a){async function l(c,...h){try{if(c==="event"){const[m,p]=h;await rC(r,t,i,m,p)}else if(c==="config"){const[m,p]=h;await iC(r,t,i,a,m,p)}else if(c==="consent"){const[m,p]=h;r("consent",m,p)}else if(c==="get"){const[m,p,y]=h;r("get",m,p,y)}else if(c==="set"){const[m]=h;r("set",m)}else r(c,...h)}catch(m){Rn.error(m)}}return l}function aC(r,t,i,a,l){let c=function(...h){window[a].push(arguments)};return window[l]&&typeof window[l]=="function"&&(c=window[l]),window[l]=sC(c,r,t,i),{gtagCore:c,wrappedGtag:window[l]}}function oC(r){const t=window.document.getElementsByTagName("script");for(const i of Object.values(t))if(i.src&&i.src.includes(zm)&&i.src.includes(r))return i;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC=30,uC=1e3;class cC{constructor(t={},i=uC){this.throttleMetadata=t,this.intervalMillis=i}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,i){this.throttleMetadata[t]=i}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const QE=new cC;function fC(r){return new Headers({Accept:"application/json","x-goog-api-key":r})}async function hC(r){var t;const{appId:i,apiKey:a}=r,l={method:"GET",headers:fC(a)},c=Z2.replace("{app-id}",i),h=await fetch(c,l);if(h.status!==200&&h.status!==304){let m="";try{const p=await h.json();!((t=p.error)===null||t===void 0)&&t.message&&(m=p.error.message)}catch{}throw Pn.create("config-fetch-failed",{httpStatus:h.status,responseMessage:m})}return h.json()}async function dC(r,t=QE,i){const{appId:a,apiKey:l,measurementId:c}=r.options;if(!a)throw Pn.create("no-app-id");if(!l){if(c)return{measurementId:c,appId:a};throw Pn.create("no-api-key")}const h=t.getThrottleMetadata(a)||{backoffCount:0,throttleEndTimeMillis:Date.now()},m=new pC;return setTimeout(async()=>{m.abort()},$2),YE({appId:a,apiKey:l,measurementId:c},h,m,t)}async function YE(r,{throttleEndTimeMillis:t,backoffCount:i},a,l=QE){var c;const{appId:h,measurementId:m}=r;try{await mC(a,t)}catch(p){if(m)return Rn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${m} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:h,measurementId:m};throw p}try{const p=await hC(r);return l.deleteThrottleMetadata(h),p}catch(p){const y=p;if(!gC(y)){if(l.deleteThrottleMetadata(h),m)return Rn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${m} provided in the "measurementId" field in the local Firebase config. [${y==null?void 0:y.message}]`),{appId:h,measurementId:m};throw p}const E=Number((c=y==null?void 0:y.customData)===null||c===void 0?void 0:c.httpStatus)===503?av(i,l.intervalMillis,lC):av(i,l.intervalMillis),A={throttleEndTimeMillis:Date.now()+E,backoffCount:i+1};return l.setThrottleMetadata(h,A),Rn.debug(`Calling attemptFetch again in ${E} millis`),YE(r,A,a,l)}}function mC(r,t){return new Promise((i,a)=>{const l=Math.max(t-Date.now(),0),c=setTimeout(i,l);r.addEventListener(()=>{clearTimeout(c),a(Pn.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function gC(r){if(!(r instanceof cs)||!r.customData)return!1;const t=Number(r.customData.httpStatus);return t===429||t===500||t===503||t===504}class pC{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function yC(r,t,i,a,l){if(l&&l.global){r("event",i,a);return}else{const c=await t,h=Object.assign(Object.assign({},a),{send_to:c});r("event",i,h)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vC(){if(j_())try{await q_()}catch(r){return Rn.warn(Pn.create("indexeddb-unavailable",{errorInfo:r==null?void 0:r.toString()}).message),!1}else return Rn.warn(Pn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function _C(r,t,i,a,l,c,h){var m;const p=dC(r);p.then(V=>{i[V.measurementId]=V.appId,r.options.measurementId&&V.measurementId!==r.options.measurementId&&Rn.warn(`The measurement ID in the local Firebase config (${r.options.measurementId}) does not match the measurement ID fetched from the server (${V.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(V=>Rn.error(V)),t.push(p);const y=vC().then(V=>{if(V)return a.getId()}),[E,A]=await Promise.all([p,y]);oC(c)||eC(c,E.measurementId),l("js",new Date);const I=(m=h==null?void 0:h.config)!==null&&m!==void 0?m:{};return I[X2]="firebase",I.update=!0,A!=null&&(I[K2]=A),l("config",E.measurementId,I),E.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(t){this.app=t}_delete(){return delete vl[this.app.options.appId],Promise.resolve()}}let vl={},y_=[];const v_={};let vd="dataLayer",TC="gtag",__,KE,E_=!1;function bC(){const r=[];if(ES()&&r.push("This is a browser extension environment."),bS()||r.push("Cookies are not available."),r.length>0){const t=r.map((a,l)=>`(${l+1}) ${a}`).join(" "),i=Pn.create("invalid-analytics-context",{errorInfo:t});Rn.warn(i.message)}}function SC(r,t,i){bC();const a=r.options.appId;if(!a)throw Pn.create("no-app-id");if(!r.options.apiKey)if(r.options.measurementId)Rn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${r.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Pn.create("no-api-key");if(vl[a]!=null)throw Pn.create("already-exists",{id:a});if(!E_){nC(vd);const{wrappedGtag:c,gtagCore:h}=aC(vl,y_,v_,vd,TC);KE=c,__=h,E_=!0}return vl[a]=_C(r,y_,v_,t,__,vd,i),new EC(r)}function AC(r=Y_()){r=ns(r);const t=Ol(r,Oc);return t.isInitialized()?t.getImmediate():wC(r)}function wC(r,t={}){const i=Ol(r,Oc);if(i.isInitialized()){const l=i.getImmediate();if(bl(t,i.getOptions()))return l;throw Pn.create("already-initialized")}return i.initialize({options:t})}function RC(r,t,i,a){r=ns(r),yC(KE,vl[r.app.options.appId],t,i,a).catch(l=>Rn.error(l))}const T_="@firebase/analytics",b_="0.10.12";function CC(){is(new hr(Oc,(t,{options:i})=>{const a=t.getProvider("app").getImmediate(),l=t.getProvider("installations-internal").getImmediate();return SC(a,l,i)},"PUBLIC")),is(new hr("analytics-internal",r,"PRIVATE")),Ni(T_,b_),Ni(T_,b_,"esm2017");function r(t){try{const i=t.getProvider(Oc).getImmediate();return{logEvent:(a,l,c)=>RC(i,a,l,c)}}catch(i){throw Pn.create("interop-component-reg-failed",{reason:i})}}}CC();const S_={apiKey:"AIzaSyCaex7NX6zu73GhmAi0cRJG4Ya19xJ7l3o".split("").reverse().join(""),authDomain:"perfect-line-survey.firebaseapp.com",projectId:"perfect-line-survey",storageBucket:"perfect-line-survey.firebasestorage.app",messagingSenderId:"162467726846",appId:"1:162467726846:web:ba09d2f455f5c4b704ecaf",measurementId:"G-KK8WJ159B3"},DC={...S_,apiKey:S_.apiKey.split("").reverse().join("")},XE=Q_(DC),$E=BR(XE);typeof window<"u"&&AC(XE);const IC=async r=>{try{await o2(pE($E,"surveyResponses"),r),console.log("Response saved to Firestore")}catch(t){throw console.error("Error saving response to Firestore: ",t),t}},xC=async(r,t)=>{console.log(`Querying Firestore for surveyResponses with date: ${r}, questionId: ${t}`);try{const i=JR(pE($E,"surveyResponses"),h_("date","==",r),h_("questionId","==",t)),a=await a2(i);console.log(`Firestore query returned ${a.size} documents.`);const l=[];return a.forEach(c=>{console.log(`Processing document ID: ${c.id}`,c.data());const h=c.data();h&&typeof h.name=="string"&&typeof h.answer=="number"?l.push(h):console.warn(`Skipping document ID: ${c.id} due to unexpected data structure or missing fields.`,h)}),console.log(`Returning ${l.length} processed responses.`),l}catch(i){return console.error("Error getting responses from Firestore: ",i),[]}},tf=()=>new Date().toISOString().split("T")[0],VC=()=>{const r=new Date;return r.setDate(r.getDate()-1),r.toISOString().split("T")[0]},Pm=()=>rS.dailyContent,km=r=>Pm().find(t=>t.date===r),OC=()=>km(tf()),MC=()=>km(VC()),ZE=r=>{const t=km(r);if(t)return t;const i=Pm();if(i.length===0)return null;const a=Math.floor(Math.random()*i.length);return i[a]},NC=r=>{const t=r||tf(),i=ZE(t);if(!i||!i.comparative)return console.warn(`No comparative puzzle defined for date ${t}`),null;const a=i.comparative;return{id:a.id,name:a.name,description:a.description,attribute:a.attribute,items:a.items.map(l=>({id:l.id,name:l.name,value:l.value}))}},UC=r=>{const t=r||tf(),i=ZE(t);if(!i||!i.sequence)return console.warn(`No sequence puzzle defined for date ${t}`),LC();const a=i.sequence,l=a.items.map((c,h)=>({id:`item-${h}`,shortText:c.shortText,longText:c.longText,displayValue:c.displayValue}));return{id:a.id,prompt:a.prompt,leftLabel:a.leftLabel,rightLabel:a.rightLabel,items:l,difficulty:"medium"}},LC=()=>{const t=Pm().filter(h=>h.sequence);if(t.length===0)return null;const i=Math.floor(Math.random()*t.length),a=t[i];if(!a.sequence)return null;const l=a.sequence,c=l.items.map((h,m)=>({id:`item-${m}`,shortText:h.shortText,longText:h.longText,displayValue:h.displayValue}));return{id:l.id,prompt:l.prompt,leftLabel:l.leftLabel,rightLabel:l.rightLabel,items:c,difficulty:"medium"}},zC=()=>{const r=OC();return!r||!r.survey?(console.warn(`No survey question found for today (${tf()}) in dailyContent.json`),null):{id:r.survey.id,date:r.date,question:r.survey.question,unit:r.survey.unit}},PC=()=>{const r=MC();return!r||!r.survey?null:{id:r.survey.id,date:r.date,question:r.survey.question,unit:r.survey.unit}},kC=async r=>{try{await IC(r)}catch(t){console.error("Error saving to Firebase, falling back to localStorage",t),BC(r)}localStorage.setItem("lastSurveySubmitDate",new Date().toISOString().split("T")[0])},BC=r=>{const t=`surveyResponses_${r.date}_${r.questionId}`,i=localStorage.getItem(t);let a=i?JSON.parse(i):[];a.push(r),localStorage.setItem(t,JSON.stringify(a))},jC=async(r,t)=>{try{const i=await xC(r,t);return i.length>0?i:(console.log("No responses found in Firebase, checking localStorage"),A_(r,t))}catch(i){return console.error("Error getting responses from Firebase, falling back to localStorage",i),A_(r,t)}},A_=(r,t)=>{const i=`surveyResponses_${r}_${t}`,a=localStorage.getItem(i);return a?JSON.parse(a):[]},qC=async()=>{const r=PC();if(!r)return null;const t=await jC(r.date,r.id);return{question:r,responses:t}},HC=({items:r,maxRounds:t=6,title:i,description:a,attribute:l="value"})=>{const[c,h]=B.useState(null),[m,p]=B.useState([]),[y,E]=B.useState(null),[A,I]=B.useState(null),[V,H]=B.useState(!1),[F,q]=B.useState(0),[et,X]=B.useState(1),[nt,ft]=B.useState(!1),[lt,ht]=B.useState(null),[O,w]=B.useState(null),[S,D]=B.useState(!1),[M,N]=B.useState(!1),[R,bt]=B.useState([]);B.useEffect(()=>{if(r.length<t+1){console.error("Not enough items provided for the game");return}const ut=[...r].sort(()=>Math.random()-.5);p(ut.slice(2)),h([ut[0],ut[1]]),X(1),q(0),H(!1),E(null),I(null),ht(null),bt([])},[r,t]);const It=ut=>{if(nt||!c)return;const[x,W]=c,ot=x.value>W.value?x:W,st=ut.id===ot.id;st&&q(at=>at+1),ht(ut.id),I(st),E(ot),ft(!0),bt(at=>[...at,st]),setTimeout(()=>{if(et>=t)H(!0);else{const at=et+1;if(X(at),m.length>0){const At=m[0];h([ot,At]),p(_t=>_t.slice(1))}ft(!1),E(null),I(null),ht(null)}},1500)},it=()=>{const ut=[...r].sort(()=>Math.random()-.5);p(ut.slice(2)),h([ut[0],ut[1]]),X(1),q(0),H(!1),E(null),I(null),ft(!1),ht(null),bt([])},ct=()=>{const ut=R.map(x=>x?"🟩":"🟥").join("");return`Perfect Line: Higher/Lower
Score: ${F}/${t}

${ut}

Play at: https://justinvickers.github.io/perfect-line/`},mt=()=>{const ut=ct();console.log("Attempting to share:",ut);try{if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(ut).then(()=>{console.log("Share successful"),alert("Results copied to clipboard!")}).catch(x=>{console.error("Share failed:",x),alert("Failed to copy to clipboard. Try again or manually copy your results.")});else{console.error("Clipboard API not available");const x=document.createElement("textarea");x.value=ut,x.style.position="fixed",document.body.appendChild(x),x.focus(),x.select();try{const ot=document.execCommand("copy")?"successful":"unsuccessful";console.log("Fallback: Copying text command was "+ot),alert("Results copied to clipboard!")}catch(W){console.error("Fallback: Could not copy text: ",W),alert("Failed to copy. Please manually copy your results.")}document.body.removeChild(x)}}catch(x){console.error("Share error:",x),alert("An error occurred while trying to share. Please try again.")}};return c?K.jsxs("div",{style:{width:"100%",maxWidth:"32rem",margin:"0 auto"},children:[K.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[K.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",marginBottom:"0.5rem"},children:i}),K.jsx("p",{style:{fontSize:"0.875rem",opacity:.8,marginBottom:"0.5rem"},children:a}),K.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:"500"},children:["Round: ",et,"/",t," | Score: ",F,"/",t]})]}),V?K.jsxs("div",{style:{textAlign:"center",padding:"1.5rem",backgroundColor:"#3730a3",borderRadius:"0.5rem",color:"white"},children:[K.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Game Over!"}),K.jsxs("p",{style:{fontSize:"1.125rem",marginBottom:"1rem"},children:["Your final score: ",F,"/",t]}),K.jsx("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"center",marginBottom:"1rem"},children:R.map((ut,x)=>K.jsx("div",{style:{width:"1.5rem",height:"1.5rem",backgroundColor:ut?"#22c55e":"#ef4444",borderRadius:"0.25rem"}},x))}),K.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"center"},children:[K.jsx("button",{onClick:mt,onMouseEnter:()=>N(!0),onMouseLeave:()=>N(!1),style:{padding:"0.5rem 1rem",backgroundColor:M?"#2563eb":"#1d4ed8",borderRadius:"0.375rem",fontWeight:"500",cursor:"pointer",border:"none",color:"white",transition:"background-color 0.2s"},children:"Share Results"}),K.jsx("button",{onClick:it,onMouseEnter:()=>D(!0),onMouseLeave:()=>D(!1),style:{padding:"0.5rem 1rem",backgroundColor:S?"#6366f1":"#4f46e5",borderRadius:"0.375rem",fontWeight:"500",cursor:"pointer",border:"none",color:"white",transition:"background-color 0.2s"},children:"Play Again"})]})]}):K.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[K.jsx("div",{style:{display:"flex",justifyContent:"space-between",gap:"1rem"},children:c.map(ut=>K.jsxs("button",{onClick:()=>It(ut),disabled:nt,onMouseEnter:()=>!nt&&w(ut.id),onMouseLeave:()=>w(null),style:{padding:"1.5rem",borderRadius:"0.5rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",transition:"all 0.2s",backgroundColor:nt?ut.id===lt?A?"#22c55e":"#ef4444":ut.id===(y==null?void 0:y.id)?"#16a34a":"#4338ca":O===ut.id?"#4f46e5":"#4338ca",border:nt&&(ut.id===lt||ut.id===(y==null?void 0:y.id))?"3px solid white":"none",cursor:nt?"default":"pointer"},children:[K.jsx("div",{style:{fontWeight:"bold",fontSize:"1.125rem",marginBottom:"0.5rem",color:"white"},children:ut.name}),nt&&K.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[K.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"white"},children:["Value: ",ut.value]}),ut.id===lt&&K.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.875rem",fontWeight:"bold",color:"white"},children:A?"✓ You picked correctly!":"✗ Wrong choice"}),ut.id===(y==null?void 0:y.id)&&ut.id!==lt&&K.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.875rem",fontWeight:"bold",color:"white"},children:"✓ This was the correct answer"})]})]},ut.id))}),nt&&K.jsxs("div",{style:{padding:"0.75rem",textAlign:"center",borderRadius:"0.375rem",backgroundColor:A?"#15803d":"#b91c1c",color:"white",fontWeight:"500"},children:[A?`Correct! ${y==null?void 0:y.name} has a higher ${l} (${y==null?void 0:y.value}).`:`Incorrect. ${y==null?void 0:y.name} has a higher ${l} (${y==null?void 0:y.value}).`,et<t&&K.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.75rem",opacity:"0.75"},children:"The winning item will face a new challenger next round!"})]})]})]}):K.jsx("div",{className:"text-center p-4",children:"Loading game..."})};var dl=z_();function FC(){for(var r=arguments.length,t=new Array(r),i=0;i<r;i++)t[i]=arguments[i];return B.useMemo(()=>a=>{t.forEach(l=>l(a))},t)}const ef=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function so(r){const t=Object.prototype.toString.call(r);return t==="[object Window]"||t==="[object global]"}function Bm(r){return"nodeType"in r}function Cn(r){var t,i;return r?so(r)?r:Bm(r)&&(t=(i=r.ownerDocument)==null?void 0:i.defaultView)!=null?t:window:window}function jm(r){const{Document:t}=Cn(r);return r instanceof t}function Pl(r){return so(r)?!1:r instanceof Cn(r).HTMLElement}function WE(r){return r instanceof Cn(r).SVGElement}function ao(r){return r?so(r)?r.document:Bm(r)?jm(r)?r:Pl(r)||WE(r)?r.ownerDocument:document:document:document}const Pi=ef?B.useLayoutEffect:B.useEffect;function qm(r){const t=B.useRef(r);return Pi(()=>{t.current=r}),B.useCallback(function(){for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return t.current==null?void 0:t.current(...a)},[])}function GC(){const r=B.useRef(null),t=B.useCallback((a,l)=>{r.current=setInterval(a,l)},[]),i=B.useCallback(()=>{r.current!==null&&(clearInterval(r.current),r.current=null)},[]);return[t,i]}function xl(r,t){t===void 0&&(t=[r]);const i=B.useRef(r);return Pi(()=>{i.current!==r&&(i.current=r)},t),i}function kl(r,t){const i=B.useRef();return B.useMemo(()=>{const a=r(i.current);return i.current=a,a},[...t])}function Mc(r){const t=qm(r),i=B.useRef(null),a=B.useCallback(l=>{l!==i.current&&(t==null||t(l,i.current)),i.current=l},[]);return[i,a]}function Qd(r){const t=B.useRef();return B.useEffect(()=>{t.current=r},[r]),t.current}let _d={};function Bl(r,t){return B.useMemo(()=>{if(t)return t;const i=_d[r]==null?0:_d[r]+1;return _d[r]=i,r+"-"+i},[r,t])}function JE(r){return function(t){for(var i=arguments.length,a=new Array(i>1?i-1:0),l=1;l<i;l++)a[l-1]=arguments[l];return a.reduce((c,h)=>{const m=Object.entries(h);for(const[p,y]of m){const E=c[p];E!=null&&(c[p]=E+r*y)}return c},{...t})}}const Ga=JE(1),Nc=JE(-1);function QC(r){return"clientX"in r&&"clientY"in r}function Hm(r){if(!r)return!1;const{KeyboardEvent:t}=Cn(r.target);return t&&r instanceof t}function YC(r){if(!r)return!1;const{TouchEvent:t}=Cn(r.target);return t&&r instanceof t}function Yd(r){if(YC(r)){if(r.touches&&r.touches.length){const{clientX:t,clientY:i}=r.touches[0];return{x:t,y:i}}else if(r.changedTouches&&r.changedTouches.length){const{clientX:t,clientY:i}=r.changedTouches[0];return{x:t,y:i}}}return QC(r)?{x:r.clientX,y:r.clientY}:null}const Ja=Object.freeze({Translate:{toString(r){if(!r)return;const{x:t,y:i}=r;return"translate3d("+(t?Math.round(t):0)+"px, "+(i?Math.round(i):0)+"px, 0)"}},Scale:{toString(r){if(!r)return;const{scaleX:t,scaleY:i}=r;return"scaleX("+t+") scaleY("+i+")"}},Transform:{toString(r){if(r)return[Ja.Translate.toString(r),Ja.Scale.toString(r)].join(" ")}},Transition:{toString(r){let{property:t,duration:i,easing:a}=r;return t+" "+i+"ms "+a}}}),w_="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function KC(r){return r.matches(w_)?r:r.querySelector(w_)}const XC={display:"none"};function $C(r){let{id:t,value:i}=r;return wn.createElement("div",{id:t,style:XC},i)}function ZC(r){let{id:t,announcement:i,ariaLiveType:a="assertive"}=r;const l={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return wn.createElement("div",{id:t,style:l,role:"status","aria-live":a,"aria-atomic":!0},i)}function WC(){const[r,t]=B.useState("");return{announce:B.useCallback(a=>{a!=null&&t(a)},[]),announcement:r}}const tT=B.createContext(null);function JC(r){const t=B.useContext(tT);B.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(r)},[r,t])}function tD(){const[r]=B.useState(()=>new Set),t=B.useCallback(a=>(r.add(a),()=>r.delete(a)),[r]);return[B.useCallback(a=>{let{type:l,event:c}=a;r.forEach(h=>{var m;return(m=h[l])==null?void 0:m.call(h,c)})},[r]),t]}const eD={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},nD={onDragStart(r){let{active:t}=r;return"Picked up draggable item "+t.id+"."},onDragOver(r){let{active:t,over:i}=r;return i?"Draggable item "+t.id+" was moved over droppable area "+i.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(r){let{active:t,over:i}=r;return i?"Draggable item "+t.id+" was dropped over droppable area "+i.id:"Draggable item "+t.id+" was dropped."},onDragCancel(r){let{active:t}=r;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function iD(r){let{announcements:t=nD,container:i,hiddenTextDescribedById:a,screenReaderInstructions:l=eD}=r;const{announce:c,announcement:h}=WC(),m=Bl("DndLiveRegion"),[p,y]=B.useState(!1);if(B.useEffect(()=>{y(!0)},[]),JC(B.useMemo(()=>({onDragStart(A){let{active:I}=A;c(t.onDragStart({active:I}))},onDragMove(A){let{active:I,over:V}=A;t.onDragMove&&c(t.onDragMove({active:I,over:V}))},onDragOver(A){let{active:I,over:V}=A;c(t.onDragOver({active:I,over:V}))},onDragEnd(A){let{active:I,over:V}=A;c(t.onDragEnd({active:I,over:V}))},onDragCancel(A){let{active:I,over:V}=A;c(t.onDragCancel({active:I,over:V}))}}),[c,t])),!p)return null;const E=wn.createElement(wn.Fragment,null,wn.createElement($C,{id:a,value:l.draggable}),wn.createElement(ZC,{id:m,announcement:h}));return i?dl.createPortal(E,i):E}var ze;(function(r){r.DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable"})(ze||(ze={}));function Uc(){}const di=Object.freeze({x:0,y:0});function rD(r,t){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))}function sD(r,t){let{data:{value:i}}=r,{data:{value:a}}=t;return i-a}function aD(r,t){let{data:{value:i}}=r,{data:{value:a}}=t;return a-i}function oD(r,t){if(!r||r.length===0)return null;const[i]=r;return i[t]}function R_(r,t,i){return t===void 0&&(t=r.left),i===void 0&&(i=r.top),{x:t+r.width*.5,y:i+r.height*.5}}const eT=r=>{let{collisionRect:t,droppableRects:i,droppableContainers:a}=r;const l=R_(t,t.left,t.top),c=[];for(const h of a){const{id:m}=h,p=i.get(m);if(p){const y=rD(R_(p),l);c.push({id:m,data:{droppableContainer:h,value:y}})}}return c.sort(sD)};function lD(r,t){const i=Math.max(t.top,r.top),a=Math.max(t.left,r.left),l=Math.min(t.left+t.width,r.left+r.width),c=Math.min(t.top+t.height,r.top+r.height),h=l-a,m=c-i;if(a<l&&i<c){const p=t.width*t.height,y=r.width*r.height,E=h*m,A=E/(p+y-E);return Number(A.toFixed(4))}return 0}const uD=r=>{let{collisionRect:t,droppableRects:i,droppableContainers:a}=r;const l=[];for(const c of a){const{id:h}=c,m=i.get(h);if(m){const p=lD(m,t);p>0&&l.push({id:h,data:{droppableContainer:c,value:p}})}}return l.sort(aD)};function cD(r,t,i){return{...r,scaleX:t&&i?t.width/i.width:1,scaleY:t&&i?t.height/i.height:1}}function nT(r,t){return r&&t?{x:r.left-t.left,y:r.top-t.top}:di}function fD(r){return function(i){for(var a=arguments.length,l=new Array(a>1?a-1:0),c=1;c<a;c++)l[c-1]=arguments[c];return l.reduce((h,m)=>({...h,top:h.top+r*m.y,bottom:h.bottom+r*m.y,left:h.left+r*m.x,right:h.right+r*m.x}),{...i})}}const hD=fD(1);function dD(r){if(r.startsWith("matrix3d(")){const t=r.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(r.startsWith("matrix(")){const t=r.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function mD(r,t,i){const a=dD(t);if(!a)return r;const{scaleX:l,scaleY:c,x:h,y:m}=a,p=r.left-h-(1-l)*parseFloat(i),y=r.top-m-(1-c)*parseFloat(i.slice(i.indexOf(" ")+1)),E=l?r.width/l:r.width,A=c?r.height/c:r.height;return{width:E,height:A,top:y,right:p+E,bottom:y+A,left:p}}const gD={ignoreTransform:!1};function oo(r,t){t===void 0&&(t=gD);let i=r.getBoundingClientRect();if(t.ignoreTransform){const{transform:y,transformOrigin:E}=Cn(r).getComputedStyle(r);y&&(i=mD(i,y,E))}const{top:a,left:l,width:c,height:h,bottom:m,right:p}=i;return{top:a,left:l,width:c,height:h,bottom:m,right:p}}function C_(r){return oo(r,{ignoreTransform:!0})}function pD(r){const t=r.innerWidth,i=r.innerHeight;return{top:0,left:0,right:t,bottom:i,width:t,height:i}}function yD(r,t){return t===void 0&&(t=Cn(r).getComputedStyle(r)),t.position==="fixed"}function vD(r,t){t===void 0&&(t=Cn(r).getComputedStyle(r));const i=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(l=>{const c=t[l];return typeof c=="string"?i.test(c):!1})}function Fm(r,t){const i=[];function a(l){if(t!=null&&i.length>=t||!l)return i;if(jm(l)&&l.scrollingElement!=null&&!i.includes(l.scrollingElement))return i.push(l.scrollingElement),i;if(!Pl(l)||WE(l)||i.includes(l))return i;const c=Cn(r).getComputedStyle(l);return l!==r&&vD(l,c)&&i.push(l),yD(l,c)?i:a(l.parentNode)}return r?a(r):i}function iT(r){const[t]=Fm(r,1);return t??null}function Ed(r){return!ef||!r?null:so(r)?r:Bm(r)?jm(r)||r===ao(r).scrollingElement?window:Pl(r)?r:null:null}function rT(r){return so(r)?r.scrollX:r.scrollLeft}function sT(r){return so(r)?r.scrollY:r.scrollTop}function Kd(r){return{x:rT(r),y:sT(r)}}var Xe;(function(r){r[r.Forward=1]="Forward",r[r.Backward=-1]="Backward"})(Xe||(Xe={}));function aT(r){return!ef||!r?!1:r===document.scrollingElement}function oT(r){const t={x:0,y:0},i=aT(r)?{height:window.innerHeight,width:window.innerWidth}:{height:r.clientHeight,width:r.clientWidth},a={x:r.scrollWidth-i.width,y:r.scrollHeight-i.height},l=r.scrollTop<=t.y,c=r.scrollLeft<=t.x,h=r.scrollTop>=a.y,m=r.scrollLeft>=a.x;return{isTop:l,isLeft:c,isBottom:h,isRight:m,maxScroll:a,minScroll:t}}const _D={x:.2,y:.2};function ED(r,t,i,a,l){let{top:c,left:h,right:m,bottom:p}=i;a===void 0&&(a=10),l===void 0&&(l=_D);const{isTop:y,isBottom:E,isLeft:A,isRight:I}=oT(r),V={x:0,y:0},H={x:0,y:0},F={height:t.height*l.y,width:t.width*l.x};return!y&&c<=t.top+F.height?(V.y=Xe.Backward,H.y=a*Math.abs((t.top+F.height-c)/F.height)):!E&&p>=t.bottom-F.height&&(V.y=Xe.Forward,H.y=a*Math.abs((t.bottom-F.height-p)/F.height)),!I&&m>=t.right-F.width?(V.x=Xe.Forward,H.x=a*Math.abs((t.right-F.width-m)/F.width)):!A&&h<=t.left+F.width&&(V.x=Xe.Backward,H.x=a*Math.abs((t.left+F.width-h)/F.width)),{direction:V,speed:H}}function TD(r){if(r===document.scrollingElement){const{innerWidth:c,innerHeight:h}=window;return{top:0,left:0,right:c,bottom:h,width:c,height:h}}const{top:t,left:i,right:a,bottom:l}=r.getBoundingClientRect();return{top:t,left:i,right:a,bottom:l,width:r.clientWidth,height:r.clientHeight}}function lT(r){return r.reduce((t,i)=>Ga(t,Kd(i)),di)}function bD(r){return r.reduce((t,i)=>t+rT(i),0)}function SD(r){return r.reduce((t,i)=>t+sT(i),0)}function AD(r,t){if(t===void 0&&(t=oo),!r)return;const{top:i,left:a,bottom:l,right:c}=t(r);iT(r)&&(l<=0||c<=0||i>=window.innerHeight||a>=window.innerWidth)&&r.scrollIntoView({block:"center",inline:"center"})}const wD=[["x",["left","right"],bD],["y",["top","bottom"],SD]];class Gm{constructor(t,i){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const a=Fm(i),l=lT(a);this.rect={...t},this.width=t.width,this.height=t.height;for(const[c,h,m]of wD)for(const p of h)Object.defineProperty(this,p,{get:()=>{const y=m(a),E=l[c]-y;return this.rect[p]+E},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class _l{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(i=>{var a;return(a=this.target)==null?void 0:a.removeEventListener(...i)})},this.target=t}add(t,i,a){var l;(l=this.target)==null||l.addEventListener(t,i,a),this.listeners.push([t,i,a])}}function RD(r){const{EventTarget:t}=Cn(r);return r instanceof t?r:ao(r)}function Td(r,t){const i=Math.abs(r.x),a=Math.abs(r.y);return typeof t=="number"?Math.sqrt(i**2+a**2)>t:"x"in t&&"y"in t?i>t.x&&a>t.y:"x"in t?i>t.x:"y"in t?a>t.y:!1}var ni;(function(r){r.Click="click",r.DragStart="dragstart",r.Keydown="keydown",r.ContextMenu="contextmenu",r.Resize="resize",r.SelectionChange="selectionchange",r.VisibilityChange="visibilitychange"})(ni||(ni={}));function D_(r){r.preventDefault()}function CD(r){r.stopPropagation()}var Kt;(function(r){r.Space="Space",r.Down="ArrowDown",r.Right="ArrowRight",r.Left="ArrowLeft",r.Up="ArrowUp",r.Esc="Escape",r.Enter="Enter",r.Tab="Tab"})(Kt||(Kt={}));const uT={start:[Kt.Space,Kt.Enter],cancel:[Kt.Esc],end:[Kt.Space,Kt.Enter,Kt.Tab]},DD=(r,t)=>{let{currentCoordinates:i}=t;switch(r.code){case Kt.Right:return{...i,x:i.x+25};case Kt.Left:return{...i,x:i.x-25};case Kt.Down:return{...i,y:i.y+25};case Kt.Up:return{...i,y:i.y-25}}};class cT{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:i}}=t;this.props=t,this.listeners=new _l(ao(i)),this.windowListeners=new _l(Cn(i)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ni.Resize,this.handleCancel),this.windowListeners.add(ni.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ni.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:i}=this.props,a=t.node.current;a&&AD(a),i(di)}handleKeyDown(t){if(Hm(t)){const{active:i,context:a,options:l}=this.props,{keyboardCodes:c=uT,coordinateGetter:h=DD,scrollBehavior:m="smooth"}=l,{code:p}=t;if(c.end.includes(p)){this.handleEnd(t);return}if(c.cancel.includes(p)){this.handleCancel(t);return}const{collisionRect:y}=a.current,E=y?{x:y.left,y:y.top}:di;this.referenceCoordinates||(this.referenceCoordinates=E);const A=h(t,{active:i,context:a.current,currentCoordinates:E});if(A){const I=Nc(A,E),V={x:0,y:0},{scrollableAncestors:H}=a.current;for(const F of H){const q=t.code,{isTop:et,isRight:X,isLeft:nt,isBottom:ft,maxScroll:lt,minScroll:ht}=oT(F),O=TD(F),w={x:Math.min(q===Kt.Right?O.right-O.width/2:O.right,Math.max(q===Kt.Right?O.left:O.left+O.width/2,A.x)),y:Math.min(q===Kt.Down?O.bottom-O.height/2:O.bottom,Math.max(q===Kt.Down?O.top:O.top+O.height/2,A.y))},S=q===Kt.Right&&!X||q===Kt.Left&&!nt,D=q===Kt.Down&&!ft||q===Kt.Up&&!et;if(S&&w.x!==A.x){const M=F.scrollLeft+I.x,N=q===Kt.Right&&M<=lt.x||q===Kt.Left&&M>=ht.x;if(N&&!I.y){F.scrollTo({left:M,behavior:m});return}N?V.x=F.scrollLeft-M:V.x=q===Kt.Right?F.scrollLeft-lt.x:F.scrollLeft-ht.x,V.x&&F.scrollBy({left:-V.x,behavior:m});break}else if(D&&w.y!==A.y){const M=F.scrollTop+I.y,N=q===Kt.Down&&M<=lt.y||q===Kt.Up&&M>=ht.y;if(N&&!I.x){F.scrollTo({top:M,behavior:m});return}N?V.y=F.scrollTop-M:V.y=q===Kt.Down?F.scrollTop-lt.y:F.scrollTop-ht.y,V.y&&F.scrollBy({top:-V.y,behavior:m});break}}this.handleMove(t,Ga(Nc(A,this.referenceCoordinates),V))}}}handleMove(t,i){const{onMove:a}=this.props;t.preventDefault(),a(i)}handleEnd(t){const{onEnd:i}=this.props;t.preventDefault(),this.detach(),i()}handleCancel(t){const{onCancel:i}=this.props;t.preventDefault(),this.detach(),i()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}cT.activators=[{eventName:"onKeyDown",handler:(r,t,i)=>{let{keyboardCodes:a=uT,onActivation:l}=t,{active:c}=i;const{code:h}=r.nativeEvent;if(a.start.includes(h)){const m=c.activatorNode.current;return m&&r.target!==m?!1:(r.preventDefault(),l==null||l({event:r.nativeEvent}),!0)}return!1}}];function I_(r){return!!(r&&"distance"in r)}function x_(r){return!!(r&&"delay"in r)}class Qm{constructor(t,i,a){var l;a===void 0&&(a=RD(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=i;const{event:c}=t,{target:h}=c;this.props=t,this.events=i,this.document=ao(h),this.documentListeners=new _l(this.document),this.listeners=new _l(a),this.windowListeners=new _l(Cn(h)),this.initialCoordinates=(l=Yd(c))!=null?l:di,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:i,bypassActivationConstraint:a}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(ni.Resize,this.handleCancel),this.windowListeners.add(ni.DragStart,D_),this.windowListeners.add(ni.VisibilityChange,this.handleCancel),this.windowListeners.add(ni.ContextMenu,D_),this.documentListeners.add(ni.Keydown,this.handleKeydown),i){if(a!=null&&a({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(x_(i)){this.timeoutId=setTimeout(this.handleStart,i.delay),this.handlePending(i);return}if(I_(i)){this.handlePending(i);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,i){const{active:a,onPending:l}=this.props;l(a,t,this.initialCoordinates,i)}handleStart(){const{initialCoordinates:t}=this,{onStart:i}=this.props;t&&(this.activated=!0,this.documentListeners.add(ni.Click,CD,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ni.SelectionChange,this.removeTextSelection),i(t))}handleMove(t){var i;const{activated:a,initialCoordinates:l,props:c}=this,{onMove:h,options:{activationConstraint:m}}=c;if(!l)return;const p=(i=Yd(t))!=null?i:di,y=Nc(l,p);if(!a&&m){if(I_(m)){if(m.tolerance!=null&&Td(y,m.tolerance))return this.handleCancel();if(Td(y,m.distance))return this.handleStart()}if(x_(m)&&Td(y,m.tolerance))return this.handleCancel();this.handlePending(m,y);return}t.cancelable&&t.preventDefault(),h(p)}handleEnd(){const{onAbort:t,onEnd:i}=this.props;this.detach(),this.activated||t(this.props.active),i()}handleCancel(){const{onAbort:t,onCancel:i}=this.props;this.detach(),this.activated||t(this.props.active),i()}handleKeydown(t){t.code===Kt.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const ID={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class fT extends Qm{constructor(t){const{event:i}=t,a=ao(i.target);super(t,ID,a)}}fT.activators=[{eventName:"onPointerDown",handler:(r,t)=>{let{nativeEvent:i}=r,{onActivation:a}=t;return!i.isPrimary||i.button!==0?!1:(a==null||a({event:i}),!0)}}];const xD={move:{name:"mousemove"},end:{name:"mouseup"}};var Xd;(function(r){r[r.RightClick=2]="RightClick"})(Xd||(Xd={}));class VD extends Qm{constructor(t){super(t,xD,ao(t.event.target))}}VD.activators=[{eventName:"onMouseDown",handler:(r,t)=>{let{nativeEvent:i}=r,{onActivation:a}=t;return i.button===Xd.RightClick?!1:(a==null||a({event:i}),!0)}}];const bd={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class OD extends Qm{constructor(t){super(t,bd)}static setup(){return window.addEventListener(bd.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(bd.move.name,t)};function t(){}}}OD.activators=[{eventName:"onTouchStart",handler:(r,t)=>{let{nativeEvent:i}=r,{onActivation:a}=t;const{touches:l}=i;return l.length>1?!1:(a==null||a({event:i}),!0)}}];var El;(function(r){r[r.Pointer=0]="Pointer",r[r.DraggableRect=1]="DraggableRect"})(El||(El={}));var Lc;(function(r){r[r.TreeOrder=0]="TreeOrder",r[r.ReversedTreeOrder=1]="ReversedTreeOrder"})(Lc||(Lc={}));function MD(r){let{acceleration:t,activator:i=El.Pointer,canScroll:a,draggingRect:l,enabled:c,interval:h=5,order:m=Lc.TreeOrder,pointerCoordinates:p,scrollableAncestors:y,scrollableAncestorRects:E,delta:A,threshold:I}=r;const V=UD({delta:A,disabled:!c}),[H,F]=GC(),q=B.useRef({x:0,y:0}),et=B.useRef({x:0,y:0}),X=B.useMemo(()=>{switch(i){case El.Pointer:return p?{top:p.y,bottom:p.y,left:p.x,right:p.x}:null;case El.DraggableRect:return l}},[i,l,p]),nt=B.useRef(null),ft=B.useCallback(()=>{const ht=nt.current;if(!ht)return;const O=q.current.x*et.current.x,w=q.current.y*et.current.y;ht.scrollBy(O,w)},[]),lt=B.useMemo(()=>m===Lc.TreeOrder?[...y].reverse():y,[m,y]);B.useEffect(()=>{if(!c||!y.length||!X){F();return}for(const ht of lt){if((a==null?void 0:a(ht))===!1)continue;const O=y.indexOf(ht),w=E[O];if(!w)continue;const{direction:S,speed:D}=ED(ht,w,X,t,I);for(const M of["x","y"])V[M][S[M]]||(D[M]=0,S[M]=0);if(D.x>0||D.y>0){F(),nt.current=ht,H(ft,h),q.current=D,et.current=S;return}}q.current={x:0,y:0},et.current={x:0,y:0},F()},[t,ft,a,F,c,h,JSON.stringify(X),JSON.stringify(V),H,y,lt,E,JSON.stringify(I)])}const ND={x:{[Xe.Backward]:!1,[Xe.Forward]:!1},y:{[Xe.Backward]:!1,[Xe.Forward]:!1}};function UD(r){let{delta:t,disabled:i}=r;const a=Qd(t);return kl(l=>{if(i||!a||!l)return ND;const c={x:Math.sign(t.x-a.x),y:Math.sign(t.y-a.y)};return{x:{[Xe.Backward]:l.x[Xe.Backward]||c.x===-1,[Xe.Forward]:l.x[Xe.Forward]||c.x===1},y:{[Xe.Backward]:l.y[Xe.Backward]||c.y===-1,[Xe.Forward]:l.y[Xe.Forward]||c.y===1}}},[i,t,a])}function LD(r,t){const i=t!=null?r.get(t):void 0,a=i?i.node.current:null;return kl(l=>{var c;return t==null?null:(c=a??l)!=null?c:null},[a,t])}function zD(r,t){return B.useMemo(()=>r.reduce((i,a)=>{const{sensor:l}=a,c=l.activators.map(h=>({eventName:h.eventName,handler:t(h.handler,a)}));return[...i,...c]},[]),[r,t])}var Vl;(function(r){r[r.Always=0]="Always",r[r.BeforeDragging=1]="BeforeDragging",r[r.WhileDragging=2]="WhileDragging"})(Vl||(Vl={}));var $d;(function(r){r.Optimized="optimized"})($d||($d={}));const V_=new Map;function PD(r,t){let{dragging:i,dependencies:a,config:l}=t;const[c,h]=B.useState(null),{frequency:m,measure:p,strategy:y}=l,E=B.useRef(r),A=q(),I=xl(A),V=B.useCallback(function(et){et===void 0&&(et=[]),!I.current&&h(X=>X===null?et:X.concat(et.filter(nt=>!X.includes(nt))))},[I]),H=B.useRef(null),F=kl(et=>{if(A&&!i)return V_;if(!et||et===V_||E.current!==r||c!=null){const X=new Map;for(let nt of r){if(!nt)continue;if(c&&c.length>0&&!c.includes(nt.id)&&nt.rect.current){X.set(nt.id,nt.rect.current);continue}const ft=nt.node.current,lt=ft?new Gm(p(ft),ft):null;nt.rect.current=lt,lt&&X.set(nt.id,lt)}return X}return et},[r,c,i,A,p]);return B.useEffect(()=>{E.current=r},[r]),B.useEffect(()=>{A||V()},[i,A]),B.useEffect(()=>{c&&c.length>0&&h(null)},[JSON.stringify(c)]),B.useEffect(()=>{A||typeof m!="number"||H.current!==null||(H.current=setTimeout(()=>{V(),H.current=null},m))},[m,A,V,...a]),{droppableRects:F,measureDroppableContainers:V,measuringScheduled:c!=null};function q(){switch(y){case Vl.Always:return!1;case Vl.BeforeDragging:return i;default:return!i}}}function hT(r,t){return kl(i=>r?i||(typeof t=="function"?t(r):r):null,[t,r])}function kD(r,t){return hT(r,t)}function BD(r){let{callback:t,disabled:i}=r;const a=qm(t),l=B.useMemo(()=>{if(i||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:c}=window;return new c(a)},[a,i]);return B.useEffect(()=>()=>l==null?void 0:l.disconnect(),[l]),l}function nf(r){let{callback:t,disabled:i}=r;const a=qm(t),l=B.useMemo(()=>{if(i||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:c}=window;return new c(a)},[i]);return B.useEffect(()=>()=>l==null?void 0:l.disconnect(),[l]),l}function jD(r){return new Gm(oo(r),r)}function O_(r,t,i){t===void 0&&(t=jD);const[a,l]=B.useState(null);function c(){l(p=>{if(!r)return null;if(r.isConnected===!1){var y;return(y=p??i)!=null?y:null}const E=t(r);return JSON.stringify(p)===JSON.stringify(E)?p:E})}const h=BD({callback(p){if(r)for(const y of p){const{type:E,target:A}=y;if(E==="childList"&&A instanceof HTMLElement&&A.contains(r)){c();break}}}}),m=nf({callback:c});return Pi(()=>{c(),r?(m==null||m.observe(r),h==null||h.observe(document.body,{childList:!0,subtree:!0})):(m==null||m.disconnect(),h==null||h.disconnect())},[r]),a}function qD(r){const t=hT(r);return nT(r,t)}const M_=[];function HD(r){const t=B.useRef(r),i=kl(a=>r?a&&a!==M_&&r&&t.current&&r.parentNode===t.current.parentNode?a:Fm(r):M_,[r]);return B.useEffect(()=>{t.current=r},[r]),i}function FD(r){const[t,i]=B.useState(null),a=B.useRef(r),l=B.useCallback(c=>{const h=Ed(c.target);h&&i(m=>m?(m.set(h,Kd(h)),new Map(m)):null)},[]);return B.useEffect(()=>{const c=a.current;if(r!==c){h(c);const m=r.map(p=>{const y=Ed(p);return y?(y.addEventListener("scroll",l,{passive:!0}),[y,Kd(y)]):null}).filter(p=>p!=null);i(m.length?new Map(m):null),a.current=r}return()=>{h(r),h(c)};function h(m){m.forEach(p=>{const y=Ed(p);y==null||y.removeEventListener("scroll",l)})}},[l,r]),B.useMemo(()=>r.length?t?Array.from(t.values()).reduce((c,h)=>Ga(c,h),di):lT(r):di,[r,t])}function N_(r,t){t===void 0&&(t=[]);const i=B.useRef(null);return B.useEffect(()=>{i.current=null},t),B.useEffect(()=>{const a=r!==di;a&&!i.current&&(i.current=r),!a&&i.current&&(i.current=null)},[r]),i.current?Nc(r,i.current):di}function GD(r){B.useEffect(()=>{if(!ef)return;const t=r.map(i=>{let{sensor:a}=i;return a.setup==null?void 0:a.setup()});return()=>{for(const i of t)i==null||i()}},r.map(t=>{let{sensor:i}=t;return i}))}function QD(r,t){return B.useMemo(()=>r.reduce((i,a)=>{let{eventName:l,handler:c}=a;return i[l]=h=>{c(h,t)},i},{}),[r,t])}function dT(r){return B.useMemo(()=>r?pD(r):null,[r])}const U_=[];function YD(r,t){t===void 0&&(t=oo);const[i]=r,a=dT(i?Cn(i):null),[l,c]=B.useState(U_);function h(){c(()=>r.length?r.map(p=>aT(p)?a:new Gm(t(p),p)):U_)}const m=nf({callback:h});return Pi(()=>{m==null||m.disconnect(),h(),r.forEach(p=>m==null?void 0:m.observe(p))},[r]),l}function KD(r){if(!r)return null;if(r.children.length>1)return r;const t=r.children[0];return Pl(t)?t:r}function XD(r){let{measure:t}=r;const[i,a]=B.useState(null),l=B.useCallback(y=>{for(const{target:E}of y)if(Pl(E)){a(A=>{const I=t(E);return A?{...A,width:I.width,height:I.height}:I});break}},[t]),c=nf({callback:l}),h=B.useCallback(y=>{const E=KD(y);c==null||c.disconnect(),E&&(c==null||c.observe(E)),a(E?t(E):null)},[t,c]),[m,p]=Mc(h);return B.useMemo(()=>({nodeRef:m,rect:i,setRef:p}),[i,m,p])}const $D=[{sensor:fT,options:{}},{sensor:cT,options:{}}],ZD={current:{}},gc={draggable:{measure:C_},droppable:{measure:C_,strategy:Vl.WhileDragging,frequency:$d.Optimized},dragOverlay:{measure:oo}};class Tl extends Map{get(t){var i;return t!=null&&(i=super.get(t))!=null?i:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:i}=t;return!i})}getNodeFor(t){var i,a;return(i=(a=this.get(t))==null?void 0:a.node.current)!=null?i:void 0}}const WD={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Tl,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Uc},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:gc,measureDroppableContainers:Uc,windowRect:null,measuringScheduled:!1},JD={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Uc,draggableNodes:new Map,over:null,measureDroppableContainers:Uc},rf=B.createContext(JD),mT=B.createContext(WD);function tI(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Tl}}}function eI(r,t){switch(t.type){case ze.DragStart:return{...r,draggable:{...r.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case ze.DragMove:return r.draggable.active==null?r:{...r,draggable:{...r.draggable,translate:{x:t.coordinates.x-r.draggable.initialCoordinates.x,y:t.coordinates.y-r.draggable.initialCoordinates.y}}};case ze.DragEnd:case ze.DragCancel:return{...r,draggable:{...r.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case ze.RegisterDroppable:{const{element:i}=t,{id:a}=i,l=new Tl(r.droppable.containers);return l.set(a,i),{...r,droppable:{...r.droppable,containers:l}}}case ze.SetDroppableDisabled:{const{id:i,key:a,disabled:l}=t,c=r.droppable.containers.get(i);if(!c||a!==c.key)return r;const h=new Tl(r.droppable.containers);return h.set(i,{...c,disabled:l}),{...r,droppable:{...r.droppable,containers:h}}}case ze.UnregisterDroppable:{const{id:i,key:a}=t,l=r.droppable.containers.get(i);if(!l||a!==l.key)return r;const c=new Tl(r.droppable.containers);return c.delete(i),{...r,droppable:{...r.droppable,containers:c}}}default:return r}}function nI(r){let{disabled:t}=r;const{active:i,activatorEvent:a,draggableNodes:l}=B.useContext(rf),c=Qd(a),h=Qd(i==null?void 0:i.id);return B.useEffect(()=>{if(!t&&!a&&c&&h!=null){if(!Hm(c)||document.activeElement===c.target)return;const m=l.get(h);if(!m)return;const{activatorNode:p,node:y}=m;if(!p.current&&!y.current)return;requestAnimationFrame(()=>{for(const E of[p.current,y.current]){if(!E)continue;const A=KC(E);if(A){A.focus();break}}})}},[a,t,l,h,c]),null}function iI(r,t){let{transform:i,...a}=t;return r!=null&&r.length?r.reduce((l,c)=>c({transform:l,...a}),i):i}function rI(r){return B.useMemo(()=>({draggable:{...gc.draggable,...r==null?void 0:r.draggable},droppable:{...gc.droppable,...r==null?void 0:r.droppable},dragOverlay:{...gc.dragOverlay,...r==null?void 0:r.dragOverlay}}),[r==null?void 0:r.draggable,r==null?void 0:r.droppable,r==null?void 0:r.dragOverlay])}function sI(r){let{activeNode:t,measure:i,initialRect:a,config:l=!0}=r;const c=B.useRef(!1),{x:h,y:m}=typeof l=="boolean"?{x:l,y:l}:l;Pi(()=>{if(!h&&!m||!t){c.current=!1;return}if(c.current||!a)return;const y=t==null?void 0:t.node.current;if(!y||y.isConnected===!1)return;const E=i(y),A=nT(E,a);if(h||(A.x=0),m||(A.y=0),c.current=!0,Math.abs(A.x)>0||Math.abs(A.y)>0){const I=iT(y);I&&I.scrollBy({top:A.y,left:A.x})}},[t,h,m,a,i])}const gT=B.createContext({...di,scaleX:1,scaleY:1});var Xr;(function(r){r[r.Uninitialized=0]="Uninitialized",r[r.Initializing=1]="Initializing",r[r.Initialized=2]="Initialized"})(Xr||(Xr={}));const pT=B.memo(function(t){var i,a,l,c;let{id:h,accessibility:m,autoScroll:p=!0,children:y,sensors:E=$D,collisionDetection:A=uD,measuring:I,modifiers:V,...H}=t;const F=B.useReducer(eI,void 0,tI),[q,et]=F,[X,nt]=tD(),[ft,lt]=B.useState(Xr.Uninitialized),ht=ft===Xr.Initialized,{draggable:{active:O,nodes:w,translate:S},droppable:{containers:D}}=q,M=O!=null?w.get(O):null,N=B.useRef({initial:null,translated:null}),R=B.useMemo(()=>{var se;return O!=null?{id:O,data:(se=M==null?void 0:M.data)!=null?se:ZD,rect:N}:null},[O,M]),bt=B.useRef(null),[It,it]=B.useState(null),[ct,mt]=B.useState(null),ut=xl(H,Object.values(H)),x=Bl("DndDescribedBy",h),W=B.useMemo(()=>D.getEnabled(),[D]),ot=rI(I),{droppableRects:st,measureDroppableContainers:at,measuringScheduled:At}=PD(W,{dragging:ht,dependencies:[S.x,S.y],config:ot.droppable}),_t=LD(w,O),ie=B.useMemo(()=>ct?Yd(ct):null,[ct]),xt=Bn(),Ft=kD(_t,ot.draggable.measure);sI({activeNode:O!=null?w.get(O):null,config:xt.layoutShiftCompensation,initialRect:Ft,measure:ot.draggable.measure});const vt=O_(_t,ot.draggable.measure,Ft),ye=O_(_t?_t.parentElement:null),Te=B.useRef({activatorEvent:null,active:null,activeNode:_t,collisionRect:null,collisions:null,droppableRects:st,draggableNodes:w,draggingNode:null,draggingNodeRect:null,droppableContainers:D,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ce=D.getNodeFor((i=Te.current.over)==null?void 0:i.id),Be=XD({measure:ot.dragOverlay.measure}),yn=(a=Be.nodeRef.current)!=null?a:_t,ln=ht?(l=Be.rect)!=null?l:vt:null,pr=!!(Be.nodeRef.current&&Be.rect),ki=qD(pr?null:vt),mi=dT(yn?Cn(yn):null),un=HD(ht?Ce??_t:null),si=YD(un),yr=iI(V,{transform:{x:S.x-ki.x,y:S.y-ki.y,scaleX:1,scaleY:1},activatorEvent:ct,active:R,activeNodeRect:vt,containerNodeRect:ye,draggingNodeRect:ln,over:Te.current.over,overlayNodeRect:Be.rect,scrollableAncestors:un,scrollableAncestorRects:si,windowRect:mi}),vr=ie?Ga(ie,S):null,$e=FD(un),Ws=N_($e),ve=N_($e,[vt]),re=Ga(yr,Ws),cn=ln?hD(ln,yr):null,gi=R&&cn?A({active:R,collisionRect:cn,droppableRects:st,droppableContainers:W,pointerCoordinates:vr}):null,_r=oD(gi,"id"),[kn,pi]=B.useState(null),yi=pr?yr:Ga(yr,ve),je=cD(yi,(c=kn==null?void 0:kn.rect)!=null?c:null,vt),Bi=B.useRef(null),Dn=B.useCallback((se,ae)=>{let{sensor:te,options:We}=ae;if(bt.current==null)return;const De=w.get(bt.current);if(!De)return;const Ie=se.nativeEvent,xe=new te({active:bt.current,activeNode:De,event:Ie,options:We,context:Te,onAbort(Ot){if(!w.get(Ot))return;const{onDragAbort:Ve}=ut.current,qe={id:Ot};Ve==null||Ve(qe),X({type:"onDragAbort",event:qe})},onPending(Ot,xn,Ve,qe){if(!w.get(Ot))return;const{onDragPending:_i}=ut.current,Je={id:Ot,constraint:xn,initialCoordinates:Ve,offset:qe};_i==null||_i(Je),X({type:"onDragPending",event:Je})},onStart(Ot){const xn=bt.current;if(xn==null)return;const Ve=w.get(xn);if(!Ve)return;const{onDragStart:qe}=ut.current,vi={activatorEvent:Ie,active:{id:xn,data:Ve.data,rect:N}};dl.unstable_batchedUpdates(()=>{qe==null||qe(vi),lt(Xr.Initializing),et({type:ze.DragStart,initialCoordinates:Ot,active:xn}),X({type:"onDragStart",event:vi}),it(Bi.current),mt(Ie)})},onMove(Ot){et({type:ze.DragMove,coordinates:Ot})},onEnd:In(ze.DragEnd),onCancel:In(ze.DragCancel)});Bi.current=xe;function In(Ot){return async function(){const{active:Ve,collisions:qe,over:vi,scrollAdjustedTranslate:_i}=Te.current;let Je=null;if(Ve&&_i){const{cancelDrop:fn}=ut.current;Je={activatorEvent:Ie,active:Ve,collisions:qe,delta:_i,over:vi},Ot===ze.DragEnd&&typeof fn=="function"&&await Promise.resolve(fn(Je))&&(Ot=ze.DragCancel)}bt.current=null,dl.unstable_batchedUpdates(()=>{et({type:Ot}),lt(Xr.Uninitialized),pi(null),it(null),mt(null),Bi.current=null;const fn=Ot===ze.DragEnd?"onDragEnd":"onDragCancel";if(Je){const he=ut.current[fn];he==null||he(Je),X({type:fn,event:Je})}})}}},[w]),Ze=B.useCallback((se,ae)=>(te,We)=>{const De=te.nativeEvent,Ie=w.get(We);if(bt.current!==null||!Ie||De.dndKit||De.defaultPrevented)return;const xe={active:Ie};se(te,ae.options,xe)===!0&&(De.dndKit={capturedBy:ae.sensor},bt.current=We,Dn(te,ae))},[w,Dn]),Er=zD(E,Ze);GD(E),Pi(()=>{vt&&ft===Xr.Initializing&&lt(Xr.Initialized)},[vt,ft]),B.useEffect(()=>{const{onDragMove:se}=ut.current,{active:ae,activatorEvent:te,collisions:We,over:De}=Te.current;if(!ae||!te)return;const Ie={active:ae,activatorEvent:te,collisions:We,delta:{x:re.x,y:re.y},over:De};dl.unstable_batchedUpdates(()=>{se==null||se(Ie),X({type:"onDragMove",event:Ie})})},[re.x,re.y]),B.useEffect(()=>{const{active:se,activatorEvent:ae,collisions:te,droppableContainers:We,scrollAdjustedTranslate:De}=Te.current;if(!se||bt.current==null||!ae||!De)return;const{onDragOver:Ie}=ut.current,xe=We.get(_r),In=xe&&xe.rect.current?{id:xe.id,rect:xe.rect.current,data:xe.data,disabled:xe.disabled}:null,Ot={active:se,activatorEvent:ae,collisions:te,delta:{x:De.x,y:De.y},over:In};dl.unstable_batchedUpdates(()=>{pi(In),Ie==null||Ie(Ot),X({type:"onDragOver",event:Ot})})},[_r]),Pi(()=>{Te.current={activatorEvent:ct,active:R,activeNode:_t,collisionRect:cn,collisions:gi,droppableRects:st,draggableNodes:w,draggingNode:yn,draggingNodeRect:ln,droppableContainers:D,over:kn,scrollableAncestors:un,scrollAdjustedTranslate:re},N.current={initial:ln,translated:cn}},[R,_t,gi,cn,w,yn,ln,st,D,kn,un,re]),MD({...xt,delta:S,draggingRect:cn,pointerCoordinates:vr,scrollableAncestors:un,scrollableAncestorRects:si});const Js=B.useMemo(()=>({active:R,activeNode:_t,activeNodeRect:vt,activatorEvent:ct,collisions:gi,containerNodeRect:ye,dragOverlay:Be,draggableNodes:w,droppableContainers:D,droppableRects:st,over:kn,measureDroppableContainers:at,scrollableAncestors:un,scrollableAncestorRects:si,measuringConfiguration:ot,measuringScheduled:At,windowRect:mi}),[R,_t,vt,ct,gi,ye,Be,w,D,st,kn,at,un,si,ot,At,mi]),ta=B.useMemo(()=>({activatorEvent:ct,activators:Er,active:R,activeNodeRect:vt,ariaDescribedById:{draggable:x},dispatch:et,draggableNodes:w,over:kn,measureDroppableContainers:at}),[ct,Er,R,vt,et,x,w,kn,at]);return wn.createElement(tT.Provider,{value:nt},wn.createElement(rf.Provider,{value:ta},wn.createElement(mT.Provider,{value:Js},wn.createElement(gT.Provider,{value:je},y)),wn.createElement(nI,{disabled:(m==null?void 0:m.restoreFocus)===!1})),wn.createElement(iD,{...m,hiddenTextDescribedById:x}));function Bn(){const se=(It==null?void 0:It.autoScrollEnabled)===!1,ae=typeof p=="object"?p.enabled===!1:p===!1,te=ht&&!se&&!ae;return typeof p=="object"?{...p,enabled:te}:{enabled:te}}}),aI=B.createContext(null),L_="button",oI="Draggable";function lI(r){let{id:t,data:i,disabled:a=!1,attributes:l}=r;const c=Bl(oI),{activators:h,activatorEvent:m,active:p,activeNodeRect:y,ariaDescribedById:E,draggableNodes:A,over:I}=B.useContext(rf),{role:V=L_,roleDescription:H="draggable",tabIndex:F=0}=l??{},q=(p==null?void 0:p.id)===t,et=B.useContext(q?gT:aI),[X,nt]=Mc(),[ft,lt]=Mc(),ht=QD(h,t),O=xl(i);Pi(()=>(A.set(t,{id:t,key:c,node:X,activatorNode:ft,data:O}),()=>{const S=A.get(t);S&&S.key===c&&A.delete(t)}),[A,t]);const w=B.useMemo(()=>({role:V,tabIndex:F,"aria-disabled":a,"aria-pressed":q&&V===L_?!0:void 0,"aria-roledescription":H,"aria-describedby":E.draggable}),[a,V,F,q,H,E.draggable]);return{active:p,activatorEvent:m,activeNodeRect:y,attributes:w,isDragging:q,listeners:a?void 0:ht,node:X,over:I,setNodeRef:nt,setActivatorNodeRef:lt,transform:et}}function uI(){return B.useContext(mT)}const cI="Droppable",fI={timeout:25};function hI(r){let{data:t,disabled:i=!1,id:a,resizeObserverConfig:l}=r;const c=Bl(cI),{active:h,dispatch:m,over:p,measureDroppableContainers:y}=B.useContext(rf),E=B.useRef({disabled:i}),A=B.useRef(!1),I=B.useRef(null),V=B.useRef(null),{disabled:H,updateMeasurementsFor:F,timeout:q}={...fI,...l},et=xl(F??a),X=B.useCallback(()=>{if(!A.current){A.current=!0;return}V.current!=null&&clearTimeout(V.current),V.current=setTimeout(()=>{y(Array.isArray(et.current)?et.current:[et.current]),V.current=null},q)},[q]),nt=nf({callback:X,disabled:H||!h}),ft=B.useCallback((w,S)=>{nt&&(S&&(nt.unobserve(S),A.current=!1),w&&nt.observe(w))},[nt]),[lt,ht]=Mc(ft),O=xl(t);return B.useEffect(()=>{!nt||!lt.current||(nt.disconnect(),A.current=!1,nt.observe(lt.current))},[lt,nt]),B.useEffect(()=>(m({type:ze.RegisterDroppable,element:{id:a,key:c,disabled:i,node:lt,rect:I,data:O}}),()=>m({type:ze.UnregisterDroppable,key:c,id:a})),[a]),B.useEffect(()=>{i!==E.current.disabled&&(m({type:ze.SetDroppableDisabled,id:a,key:c,disabled:i}),E.current.disabled=i)},[a,c,i,m]),{active:h,rect:I,isOver:(p==null?void 0:p.id)===a,node:lt,over:p,setNodeRef:ht}}function sf(r,t,i){const a=r.slice();return a.splice(i<0?a.length+i:i,0,a.splice(t,1)[0]),a}function dI(r,t){return r.reduce((i,a,l)=>{const c=t.get(a);return c&&(i[l]=c),i},Array(r.length))}function oc(r){return r!==null&&r>=0}function mI(r,t){if(r===t)return!0;if(r.length!==t.length)return!1;for(let i=0;i<r.length;i++)if(r[i]!==t[i])return!1;return!0}function gI(r){return typeof r=="boolean"?{draggable:r,droppable:r}:r}const yT=r=>{let{rects:t,activeIndex:i,overIndex:a,index:l}=r;const c=sf(t,a,i),h=t[l],m=c[l];return!m||!h?null:{x:m.left-h.left,y:m.top-h.top,scaleX:m.width/h.width,scaleY:m.height/h.height}},lc={scaleX:1,scaleY:1},pI=r=>{var t;let{activeIndex:i,activeNodeRect:a,index:l,rects:c,overIndex:h}=r;const m=(t=c[i])!=null?t:a;if(!m)return null;if(l===i){const y=c[h];return y?{x:0,y:i<h?y.top+y.height-(m.top+m.height):y.top-m.top,...lc}:null}const p=yI(c,l,i);return l>i&&l<=h?{x:0,y:-m.height-p,...lc}:l<i&&l>=h?{x:0,y:m.height+p,...lc}:{x:0,y:0,...lc}};function yI(r,t,i){const a=r[t],l=r[t-1],c=r[t+1];return a?i<t?l?a.top-(l.top+l.height):c?c.top-(a.top+a.height):0:c?c.top-(a.top+a.height):l?a.top-(l.top+l.height):0:0}const vT="Sortable",_T=wn.createContext({activeIndex:-1,containerId:vT,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:yT,disabled:{draggable:!1,droppable:!1}});function ET(r){let{children:t,id:i,items:a,strategy:l=yT,disabled:c=!1}=r;const{active:h,dragOverlay:m,droppableRects:p,over:y,measureDroppableContainers:E}=uI(),A=Bl(vT,i),I=m.rect!==null,V=B.useMemo(()=>a.map(ht=>typeof ht=="object"&&"id"in ht?ht.id:ht),[a]),H=h!=null,F=h?V.indexOf(h.id):-1,q=y?V.indexOf(y.id):-1,et=B.useRef(V),X=!mI(V,et.current),nt=q!==-1&&F===-1||X,ft=gI(c);Pi(()=>{X&&H&&E(V)},[X,V,H,E]),B.useEffect(()=>{et.current=V},[V]);const lt=B.useMemo(()=>({activeIndex:F,containerId:A,disabled:ft,disableTransforms:nt,items:V,overIndex:q,useDragOverlay:I,sortedRects:dI(V,p),strategy:l}),[F,A,ft.draggable,ft.droppable,nt,V,q,p,I,l]);return wn.createElement(_T.Provider,{value:lt},t)}const vI=r=>{let{id:t,items:i,activeIndex:a,overIndex:l}=r;return sf(i,a,l).indexOf(t)},_I=r=>{let{containerId:t,isSorting:i,wasDragging:a,index:l,items:c,newIndex:h,previousItems:m,previousContainerId:p,transition:y}=r;return!y||!a||m!==c&&l===h?!1:i?!0:h!==l&&t===p},EI={duration:200,easing:"ease"},TT="transform",TI=Ja.Transition.toString({property:TT,duration:0,easing:"linear"}),bI={roleDescription:"sortable"};function SI(r){let{disabled:t,index:i,node:a,rect:l}=r;const[c,h]=B.useState(null),m=B.useRef(i);return Pi(()=>{if(!t&&i!==m.current&&a.current){const p=l.current;if(p){const y=oo(a.current,{ignoreTransform:!0}),E={x:p.left-y.left,y:p.top-y.top,scaleX:p.width/y.width,scaleY:p.height/y.height};(E.x||E.y)&&h(E)}}i!==m.current&&(m.current=i)},[t,i,a,l]),B.useEffect(()=>{c&&h(null)},[c]),c}function bT(r){let{animateLayoutChanges:t=_I,attributes:i,disabled:a,data:l,getNewIndex:c=vI,id:h,strategy:m,resizeObserverConfig:p,transition:y=EI}=r;const{items:E,containerId:A,activeIndex:I,disabled:V,disableTransforms:H,sortedRects:F,overIndex:q,useDragOverlay:et,strategy:X}=B.useContext(_T),nt=AI(a,V),ft=E.indexOf(h),lt=B.useMemo(()=>({sortable:{containerId:A,index:ft,items:E},...l}),[A,l,ft,E]),ht=B.useMemo(()=>E.slice(E.indexOf(h)),[E,h]),{rect:O,node:w,isOver:S,setNodeRef:D}=hI({id:h,data:lt,disabled:nt.droppable,resizeObserverConfig:{updateMeasurementsFor:ht,...p}}),{active:M,activatorEvent:N,activeNodeRect:R,attributes:bt,setNodeRef:It,listeners:it,isDragging:ct,over:mt,setActivatorNodeRef:ut,transform:x}=lI({id:h,data:lt,attributes:{...bI,...i},disabled:nt.draggable}),W=FC(D,It),ot=!!M,st=ot&&!H&&oc(I)&&oc(q),at=!et&&ct,At=at&&st?x:null,ie=st?At??(m??X)({rects:F,activeNodeRect:R,activeIndex:I,overIndex:q,index:ft}):null,xt=oc(I)&&oc(q)?c({id:h,items:E,activeIndex:I,overIndex:q}):ft,Ft=M==null?void 0:M.id,vt=B.useRef({activeId:Ft,items:E,newIndex:xt,containerId:A}),ye=E!==vt.current.items,Te=t({active:M,containerId:A,isDragging:ct,isSorting:ot,id:h,index:ft,items:E,newIndex:vt.current.newIndex,previousItems:vt.current.items,previousContainerId:vt.current.containerId,transition:y,wasDragging:vt.current.activeId!=null}),Ce=SI({disabled:!Te,index:ft,node:w,rect:O});return B.useEffect(()=>{ot&&vt.current.newIndex!==xt&&(vt.current.newIndex=xt),A!==vt.current.containerId&&(vt.current.containerId=A),E!==vt.current.items&&(vt.current.items=E)},[ot,xt,A,E]),B.useEffect(()=>{if(Ft===vt.current.activeId)return;if(Ft!=null&&vt.current.activeId==null){vt.current.activeId=Ft;return}const yn=setTimeout(()=>{vt.current.activeId=Ft},50);return()=>clearTimeout(yn)},[Ft]),{active:M,activeIndex:I,attributes:bt,data:lt,rect:O,index:ft,newIndex:xt,items:E,isOver:S,isSorting:ot,isDragging:ct,listeners:it,node:w,overIndex:q,over:mt,setNodeRef:W,setActivatorNodeRef:ut,setDroppableNodeRef:D,setDraggableNodeRef:It,transform:Ce??ie,transition:Be()};function Be(){if(Ce||ye&&vt.current.newIndex===ft)return TI;if(!(at&&!Hm(N)||!y)&&(ot||Te))return Ja.Transition.toString({...y,property:TT})}}function AI(r,t){var i,a;return typeof r=="boolean"?{draggable:r,droppable:!1}:{draggable:(i=r==null?void 0:r.draggable)!=null?i:t.draggable,droppable:(a=r==null?void 0:r.droppable)!=null?a:t.droppable}}Kt.Down,Kt.Right,Kt.Up,Kt.Left;const wI=({id:r,text:t,displayValue:i,isCorrect:a,isWrong:l,isSubmitted:c})=>{const{attributes:h,listeners:m,setNodeRef:p,transform:y,transition:E}=bT({id:r}),A={transform:Ja.Transform.toString(y),transition:E,backgroundColor:c?a?"#22c55e":l?"#ef4444":"#4338ca":"#4338ca",padding:"1rem",borderRadius:"0.5rem",userSelect:"none",cursor:c?"default":"grab",color:"white",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"};return K.jsxs("div",{ref:p,style:A,...h,...c?{}:m,children:[K.jsx("div",{style:{fontWeight:"bold",marginBottom:"0.25rem"},children:t}),c&&i&&K.jsx("div",{style:{fontSize:"0.875rem",opacity:.9},children:i})]})},RI=({puzzle:r})=>{const[t,i]=B.useState({currentPuzzle:r,userOrder:[...r.items.map(I=>I.id)].sort(()=>Math.random()-.5),isSubmitted:!1,results:[]}),a=I=>{const{active:V,over:H}=I;if(!H||t.isSubmitted)return;const F=V.id,q=H.id,et=t.userOrder.indexOf(F),X=t.userOrder.indexOf(q);if(et===X)return;const nt=sf(t.userOrder,et,X);i(ft=>({...ft,userOrder:nt}))},l=()=>{if(!t.currentPuzzle)return;const I=[...t.currentPuzzle.items].sort((et,X)=>{const nt=typeof et.displayValue=="string"?parseFloat(et.displayValue):et.displayValue,ft=typeof X.displayValue=="string"?parseFloat(X.displayValue):X.displayValue;return Number(nt)-Number(ft)}),V=new Map;I.forEach((et,X)=>{V.set(et.id,X)});const H=t.userOrder.map(et=>V.get(et)??-1),F=c(H),q=Array(t.userOrder.length).fill(!1);F.forEach(et=>{q[et]=!0}),i(et=>({...et,isSubmitted:!0,results:q}))},c=I=>{if(I.length===0)return[];const V=Array(I.length).fill(1),H=Array(I.length).fill(-1);for(let X=1;X<I.length;X++)for(let nt=0;nt<X;nt++)I[nt]<I[X]&&V[nt]+1>V[X]&&(V[X]=V[nt]+1,H[X]=nt);let F=0;for(let X=1;X<I.length;X++)V[X]>V[F]&&(F=X);const q=[];let et=F;for(;et!==-1;)q.unshift(et),et=H[et];return q},h=()=>{if(!t.isSubmitted)return[0,0];let I=0;return t.results.forEach(V=>{V&&I++}),[I,t.results.length]},m=()=>{var q;if(!t.isSubmitted)return"";const[I,V]=h(),H=t.results.map(et=>et?"🟩":"🟥").join("");return`Perfect Line: ${((q=t.currentPuzzle)==null?void 0:q.prompt)||"Sequence Game"}
Score: ${I}/${V}

${H}

Play at: https://justinvickers.github.io/perfect-line/`},p=()=>{const I=m();console.log("Attempting to share:",I);try{if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(I).then(()=>{console.log("Share successful"),alert("Results copied to clipboard!")}).catch(V=>{console.error("Share failed:",V),alert("Failed to copy to clipboard. Try again or manually copy your results.")});else{console.error("Clipboard API not available");const V=document.createElement("textarea");V.value=I,V.style.position="fixed",document.body.appendChild(V),V.focus(),V.select();try{const F=document.execCommand("copy")?"successful":"unsuccessful";console.log("Fallback: Copying text command was "+F),alert("Results copied to clipboard!")}catch(H){console.error("Fallback: Could not copy text: ",H),alert("Failed to copy. Please manually copy your results.")}document.body.removeChild(V)}}catch(V){console.error("Share error:",V),alert("An error occurred while trying to share. Please try again.")}},y=()=>{i({currentPuzzle:r,userOrder:[...r.items.map(I=>I.id)].sort(()=>Math.random()-.5),isSubmitted:!1,results:[]})},[E,A]=h();return t.currentPuzzle?K.jsxs("div",{style:{width:"100%",maxWidth:"32rem",margin:"0 auto"},children:[K.jsx("div",{style:{marginBottom:"1.5rem",textAlign:"center"},children:K.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",marginBottom:"0.75rem"},children:t.currentPuzzle.prompt})}),K.jsx("div",{style:{textAlign:"center",fontSize:"0.875rem",marginBottom:"0.5rem",fontWeight:"500",opacity:.8},children:t.currentPuzzle.leftLabel}),K.jsx("div",{style:{backgroundColor:"#312e81",padding:"1rem",borderRadius:"0.5rem",marginBottom:"0.5rem"},children:K.jsx(pT,{collisionDetection:eT,onDragEnd:a,children:K.jsx(ET,{items:t.userOrder,children:K.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"0.5rem"},children:t.userOrder.map((I,V)=>{var F;const H=(F=t.currentPuzzle)==null?void 0:F.items.find(q=>q.id===I);return H?K.jsx(wI,{id:I,text:H.shortText,displayValue:H.displayValue,isCorrect:t.isSubmitted&&t.results[V],isWrong:t.isSubmitted&&!t.results[V],isSubmitted:t.isSubmitted},I):null})})})})}),K.jsx("div",{style:{textAlign:"center",fontSize:"0.875rem",marginBottom:"1rem",fontWeight:"500",opacity:.8},children:t.currentPuzzle.rightLabel}),K.jsx("div",{children:t.isSubmitted?K.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",backgroundColor:"rgba(67, 56, 202, 0.7)",borderRadius:"0.5rem",textAlign:"center"},children:[K.jsxs("p",{style:{fontSize:"1.125rem",fontWeight:"bold",marginBottom:"0.5rem"},children:["Score: ",E,"/",A]}),K.jsx("p",{style:{fontSize:"0.875rem",marginBottom:"1rem"},children:E===A?"Perfect!":"Keep practicing!"}),K.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1rem",gap:"0.25rem"},children:t.results.map((I,V)=>K.jsx("div",{style:{width:"1.5rem",height:"1.5rem",backgroundColor:I?"#22c55e":"#ef4444",borderRadius:"0.25rem"}},V))}),K.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"0.5rem"},children:[K.jsx("button",{onClick:p,style:{padding:"0.5rem 1rem",backgroundColor:"#1d4ed8",color:"white",borderRadius:"0.375rem",border:"none",fontWeight:"500",cursor:"pointer"},children:"Share"}),K.jsx("button",{onClick:y,style:{padding:"0.5rem 1rem",backgroundColor:"#4f46e5",color:"white",borderRadius:"0.375rem",border:"none",fontWeight:"500",cursor:"pointer"},children:"Play Again"})]})]}):K.jsx("button",{onClick:l,style:{width:"100%",padding:"0.75rem",backgroundColor:"#1d4ed8",color:"white",borderRadius:"0.375rem",border:"none",fontWeight:"500",cursor:"pointer"},children:"Submit"})})]}):K.jsx("div",{children:"Loading..."})};function CI({id:r,name:t,answer:i,unit:a,isCorrect:l,isWrong:c,isSubmitted:h}){const{attributes:m,listeners:p,setNodeRef:y,transform:E,transition:A,isDragging:I}=bT({id:r}),V={transition:A,zIndex:I?100:1,backgroundColor:l?"#15803d":c?"#b91c1c":"rgba(30, 27, 75, 0.7)",color:"white",padding:"0.75rem",borderRadius:"0.375rem",cursor:h?"default":"grab",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem",opacity:I?.8:1,transform:Ja.Transform.toString(E),boxShadow:I?"0 5px 10px rgba(0, 0, 0, 0.15)":"none"};return K.jsxs("div",{ref:y,style:V,...m,...p,children:[K.jsxs("div",{style:{fontWeight:"500"},children:[t,l&&K.jsx("span",{style:{marginLeft:"0.5rem"},children:"✓"}),c&&K.jsx("span",{style:{marginLeft:"0.5rem"},children:"✗"})]}),K.jsxs("div",{children:[i," ",a]})]})}const DI=()=>{const[r,t]=B.useState(null),[i,a]=B.useState(null),[l,c]=B.useState(""),[h,m]=B.useState(""),[p,y]=B.useState(!1),[E,A]=B.useState(null),[I,V]=B.useState(!0),[H,F]=B.useState(!1),[q,et]=B.useState([]),[X,nt]=B.useState(!1),[ft,lt]=B.useState([0,0]);B.useEffect(()=>{(async()=>{V(!0);try{t(zC());const R=await qC();if(console.log("Fetched yesterday's results:",R),a(R),R&&R.responses.length>0){console.log(`Found ${R.responses.length} responses. Shuffling...`);const It=[...R.responses].sort(()=>Math.random()-.5);console.log("Shuffled responses for game state:",It),et(It)}else console.log("No responses found for yesterday or results structure invalid.");localStorage.getItem("lastSurveySubmitDate")===new Date().toISOString().split("T")[0]&&y(!0)}catch(R){console.error("Error loading survey data:",R),A("There was a problem loading the survey data. Please try again later.")}finally{V(!1)}})()},[]);const ht=N=>{const{active:R,over:bt}=N;if(!bt||X)return;const It=R.id,it=bt.id;It!==it&&et(ct=>{const mt=ct.findIndex(x=>`response-${x.timestamp}`===It),ut=ct.findIndex(x=>`response-${x.timestamp}`===it);return sf(ct,mt,ut)})},O=async N=>{if(N.preventDefault(),!l.trim()){A("Please enter your name");return}if(!h.trim()){A("Please enter your answer");return}const R=parseFloat(h);if(isNaN(R)||R<0){A("Please enter a valid positive number");return}if(r){F(!0),A(null);try{const bt={questionId:r.id,date:r.date,name:l.trim(),answer:R,timestamp:new Date().toISOString()};await kC(bt),localStorage.setItem("lastSurveySubmitDate",new Date().toISOString().split("T")[0]),y(!0)}catch(bt){console.error("Error submitting response:",bt),A("There was a problem saving your response. Please try again later.")}finally{F(!1)}}},w=()=>{if(!i)return;const N=[...i.responses].sort((bt,It)=>bt.answer-It.answer);let R=0;q.map((bt,It)=>{const ct=N.findIndex(mt=>mt.timestamp===bt.timestamp)===It;return ct&&R++,ct}),lt([R,q.length]),nt(!0)},S=()=>{if(!X||!i)return"";const[N,R]=ft,bt=q.map((It,it)=>{const ct=[...i.responses].sort((W,ot)=>W.answer-ot.answer),mt=q[it].timestamp,ut=ct.findIndex(W=>W.timestamp===mt);return it===ut?"🟩":"🟥"}).join("");return`Perfect Line: Survey Mode ${N}/${R}

${bt}

Play at: https://justinvickers.github.io/perfect-line/`},D=()=>{const N=S();console.log("Attempting to share:",N);try{if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(N).then(()=>{alert("Results copied to clipboard!")}).catch(R=>{console.error("Share failed:",R),alert("Failed to copy to clipboard. Try again or manually copy your results.")});else{const R=document.createElement("textarea");R.value=N,R.style.position="fixed",document.body.appendChild(R),R.focus(),R.select();try{document.execCommand("copy"),alert("Results copied to clipboard!")}catch(bt){console.error("Fallback: Could not copy text: ",bt),alert("Failed to copy. Please manually copy your results.")}document.body.removeChild(R)}}catch(R){console.error("Share error:",R),alert("An error occurred while trying to share. Please try again.")}},M=()=>{if(i){const N=[...i.responses].sort(()=>Math.random()-.5);et(N),nt(!1),lt([0,0])}};return I?K.jsx("div",{style:{width:"100%",maxWidth:"32rem",margin:"0 auto",textAlign:"center",padding:"2rem"},children:K.jsx("p",{children:"Loading survey data..."})}):K.jsxs("div",{style:{width:"100%",maxWidth:"32rem",margin:"0 auto"},children:[K.jsxs("div",{style:{marginBottom:"2rem",textAlign:"center"},children:[K.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"0.75rem"},children:"Daily Survey"}),K.jsx("p",{style:{fontSize:"0.875rem",opacity:.9,marginBottom:"1rem"},children:"Answer today's question and order yesterday's results!"})]}),i&&i.responses.length>1&&K.jsxs("div",{style:{marginBottom:"2rem",padding:"1rem",backgroundColor:"rgba(67, 56, 202, 0.7)",borderRadius:"0.5rem"},children:[K.jsxs("h3",{style:{fontSize:"1.125rem",fontWeight:"bold",marginBottom:"0.75rem",textAlign:"center"},children:["Yesterday's Question:",K.jsx("div",{style:{marginTop:"0.25rem",fontSize:"1rem"},children:i.question.question})]}),K.jsxs("div",{style:{marginTop:"1rem"},children:[K.jsx("h4",{style:{fontSize:"1rem",fontWeight:"500",marginBottom:"0.5rem",textAlign:"center"},children:X?"Results (Ordered by Value):":"Drag to order from lowest to highest:"}),K.jsx(pT,{collisionDetection:eT,onDragEnd:ht,children:K.jsx("div",{style:{backgroundColor:"rgba(30, 27, 75, 0.5)",borderRadius:"0.375rem",padding:"0.75rem"},children:K.jsx(ET,{items:q.map(N=>`response-${N.timestamp}`),strategy:pI,children:q.map((N,R)=>{const bt=X&&R===[...i.responses].sort((it,ct)=>it.answer-ct.answer).findIndex(it=>it.timestamp===N.timestamp),It=X?N.answer:0;return K.jsx(CI,{id:`response-${N.timestamp}`,name:N.name,answer:It,unit:i.question.unit,isCorrect:bt,isWrong:X&&!bt,isSubmitted:X},`response-${N.timestamp}`)})})})}),X?K.jsxs("div",{style:{marginTop:"1rem",textAlign:"center",padding:"0.75rem",backgroundColor:ft[0]===ft[1]?"#15803d":"#b91c1c",color:"white",borderRadius:"0.375rem",fontWeight:"500"},children:[K.jsxs("p",{children:["Your score: ",ft[0],"/",ft[1]]}),K.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"0.5rem",marginTop:"1rem"},children:[K.jsx("button",{onClick:D,style:{padding:"0.5rem 1rem",backgroundColor:"#4f46e5",borderRadius:"0.25rem",border:"none",cursor:"pointer"},children:"Share Results"}),K.jsx("button",{onClick:M,style:{padding:"0.5rem 1rem",backgroundColor:"#6366f1",borderRadius:"0.25rem",border:"none",cursor:"pointer"},children:"Play Again"})]})]}):K.jsx("button",{onClick:w,style:{width:"100%",padding:"0.75rem",backgroundColor:"#4f46e5",color:"white",borderRadius:"0.375rem",border:"none",fontWeight:"500",cursor:"pointer",marginTop:"1rem"},children:"Submit Your Order"})]})]}),r&&K.jsxs("div",{style:{padding:"1rem",backgroundColor:"rgba(67, 56, 202, 0.7)",borderRadius:"0.5rem"},children:[K.jsxs("h3",{style:{fontSize:"1.125rem",fontWeight:"bold",marginBottom:"0.75rem",textAlign:"center"},children:["Today's Question:",K.jsx("div",{style:{marginTop:"0.25rem",fontSize:"1rem"},children:r.question})]}),p?K.jsx("div",{style:{textAlign:"center",padding:"1rem"},children:K.jsx("p",{children:"Thanks for submitting your answer for today!"})}):K.jsxs("form",{onSubmit:O,children:[K.jsxs("div",{style:{marginBottom:"1rem"},children:[K.jsx("label",{htmlFor:"name",style:{display:"block",marginBottom:"0.25rem",fontSize:"0.875rem"},children:"Your Name:"}),K.jsx("input",{id:"name",type:"text",value:l,onChange:N=>c(N.target.value),style:{width:"100%",padding:"0.5rem",backgroundColor:"rgba(30, 27, 75, 0.5)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"0.25rem",color:"white"},placeholder:"Enter your name",disabled:H})]}),K.jsxs("div",{style:{marginBottom:"1rem"},children:[K.jsx("label",{htmlFor:"answer",style:{display:"block",marginBottom:"0.25rem",fontSize:"0.875rem"},children:"Your Answer:"}),K.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[K.jsx("input",{id:"answer",type:"number",value:h,onChange:N=>m(N.target.value),style:{flex:1,padding:"0.5rem",backgroundColor:"rgba(30, 27, 75, 0.5)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"0.25rem",color:"white"},placeholder:"Enter a number",min:"0",step:"any",disabled:H}),r.unit&&K.jsx("span",{style:{marginLeft:"0.5rem"},children:r.unit})]})]}),E&&K.jsx("div",{style:{marginBottom:"1rem",padding:"0.5rem",backgroundColor:"rgba(220, 38, 38, 0.5)",borderRadius:"0.25rem",fontSize:"0.875rem"},children:E}),K.jsx("button",{type:"submit",style:{width:"100%",padding:"0.75rem",backgroundColor:"#1d4ed8",color:"white",borderRadius:"0.375rem",border:"none",fontWeight:"500",cursor:H?"not-allowed":"pointer",opacity:H?.7:1},disabled:H,children:H?"Saving...":"Submit Answer"})]})]})]})};function II(){const[r,t]=B.useState(new Date().toISOString().split("T")[0]),[i,a]=B.useState("survey"),[l,c]=B.useState(!0),[h,m]=B.useState(null),[p,y]=B.useState(null);B.useEffect(()=>{E()},[]),B.useEffect(()=>{E()},[r]);const E=()=>{const H=NC(r);m(H);const F=UC(r);y(F),c(!0)},A=H=>{t(H.target.value)},I=H=>{a(H),c(!1)},V=()=>K.jsxs("div",{className:"w-full max-w-lg mx-auto bg-indigo-900 p-6 rounded-lg",children:[K.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Select Game Mode"}),K.jsxs("div",{className:"flex flex-col gap-4",children:[K.jsxs("button",{onClick:()=>h&&I("comparative"),className:`p-4 ${h?"bg-indigo-700 hover:bg-indigo-600":"bg-indigo-900 opacity-60 cursor-not-allowed"} rounded-lg`,children:[K.jsx("h3",{className:"text-xl font-bold mb-2",children:"Higher or Lower"}),K.jsx("p",{className:"text-sm opacity-80",children:h?"Compare pairs of items and choose the one with the higher value. The winner stays for the next round!":"No Higher or Lower challenge available for this date."})]}),p&&K.jsxs("button",{onClick:()=>I("sequence"),className:"p-4 bg-indigo-700 hover:bg-indigo-600 rounded-lg",children:[K.jsx("h3",{className:"text-xl font-bold mb-2",children:"Sequence Mode"}),K.jsx("p",{className:"text-sm opacity-80",children:"Arrange items in the correct sequence from lowest to highest value"})]}),K.jsxs("button",{onClick:()=>I("survey"),className:"p-4 bg-indigo-700 hover:bg-indigo-600 rounded-lg",children:[K.jsx("h3",{className:"text-xl font-bold mb-2",children:"Daily Survey"}),K.jsx("p",{className:"text-sm opacity-80",children:"Answer today's numerical question and order yesterday's results!"})]})]})]});return K.jsxs("div",{style:{backgroundColor:"#1e1b4b",color:"white",minHeight:"100vh",padding:"1rem",display:"flex",flexDirection:"column",alignItems:"center"},children:[K.jsxs("header",{style:{width:"100%",maxWidth:"32rem",marginLeft:"auto",marginRight:"auto",padding:"1rem",display:"flex",flexDirection:"column",alignItems:"center"},children:[K.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"white",marginBottom:"0.5rem",textAlign:"center"},children:"Perfect Line"}),K.jsxs("div",{className:"mb-4 flex flex-wrap justify-center gap-2",children:[K.jsx("input",{type:"date",value:r,onChange:A,className:"bg-indigo-700 text-white p-1 md:p-2 rounded text-sm md:text-base"}),K.jsx("div",{className:"relative",children:K.jsx("button",{className:"px-3 py-1.5 bg-indigo-600 hover:bg-indigo-500 text-white rounded-md flex items-center space-x-1",onClick:()=>t(new Date().toISOString().split("T")[0]),children:K.jsx("span",{children:"Today"})})}),!l&&K.jsx("button",{className:"px-3 py-1.5 bg-indigo-600 hover:bg-indigo-500 text-white rounded-md",onClick:()=>c(!0),children:"Change Mode"})]})]}),l?V():i==="comparative"&&h?K.jsx(HC,{items:h.items,maxRounds:6,title:h.name,description:`Select the item with the HIGHER ${h.attribute}`,attribute:h.attribute}):i==="sequence"&&p?K.jsx(RI,{puzzle:p}):i==="survey"?K.jsx(DI,{}):K.jsxs("div",{className:"w-full max-w-lg mx-auto text-center p-6 bg-indigo-800 rounded-lg",children:[K.jsx("h3",{className:"text-xl font-bold mb-4",children:"No Puzzle Available"}),K.jsx("p",{className:"mb-4",children:"There is no puzzle available for the selected mode and date."}),K.jsx("button",{onClick:()=>c(!0),className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 rounded font-medium",children:"Choose Another Mode"})]}),!1]})}nS.createRoot(document.getElementById("root")).render(K.jsx(B.StrictMode,{children:K.jsx(II,{})}));
